<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="icon" href=".././favicon.svg"></link><link rel="mask-icon" href=".././favicon.svg" color="#000000"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>Init.Util</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="Init.Util";</script><script type="module" src=".././jump-src.js"></script><script type="module" src=".././search.js"></script><script type="module" src=".././expand-nav.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Init</span>.<span class="name">Util</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init/Data/String/Basic.html">Init.Data.String.Basic</a></li><li><a href=".././Init/Data/ToString/Basic.html">Init.Data.ToString.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Init.Util" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#dbgTrace"><span class="name">dbgTrace</span></a></div><div class="nav_link"><a class="break_within" href="#dbgTraceVal"><span class="name">dbgTraceVal</span></a></div><div class="nav_link"><a class="break_within" href="#dbgTraceIfShared"><span class="name">dbgTraceIfShared</span></a></div><div class="nav_link"><a class="break_within" href="#dbgStackTrace"><span class="name">dbgStackTrace</span></a></div><div class="nav_link"><a class="break_within" href="#dbgSleep"><span class="name">dbgSleep</span></a></div><div class="nav_link"><a class="break_within" href="#panicWithPos"><span class="name">panicWithPos</span></a></div><div class="nav_link"><a class="break_within" href="#panicWithPosWithDecl"><span class="name">panicWithPosWithDecl</span></a></div><div class="nav_link"><a class="break_within" href="#ptrAddrUnsafe"><span class="name">ptrAddrUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#isExclusiveUnsafe"><span class="name">isExclusiveUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#withPtrAddrUnsafe"><span class="name">withPtrAddrUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#ptrEq"><span class="name">ptrEq</span></a></div><div class="nav_link"><a class="break_within" href="#ptrEqList"><span class="name">ptrEqList</span></a></div><div class="nav_link"><a class="break_within" href="#withPtrEqUnsafe"><span class="name">withPtrEqUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#withPtrEq"><span class="name">withPtrEq</span></a></div><div class="nav_link"><a class="break_within" href="#withPtrEqDecEq"><span class="name">withPtrEqDecEq</span></a></div><div class="nav_link"><a class="break_within" href="#withPtrAddr"><span class="name">withPtrAddr</span></a></div><div class="nav_link"><a class="break_within" href="#Runtime.markMultiThreaded"><span class="name">Runtime</span>.<span class="name">markMultiThreaded</span></a></div><div class="nav_link"><a class="break_within" href="#Runtime.markPersistent"><span class="name">Runtime</span>.<span class="name">markPersistent</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Debugging-helper-functions">Debugging helper functions <a class="hover-link" href="#Debugging-helper-functions">#</a></h1></div><div class="decl" id="dbgTrace"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L16-L16">source</a></div><div class="attributes">@[never_extract, extern  lean_dbg_trace]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#dbgTrace"><span class="name">dbgTrace</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(s : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#dbgTrace">dbgTrace</a> <span class="fn">s</span> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">f</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span></span></li></ul></details><details id="instances-for-list-dbgTrace" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="dbgTraceVal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L18-L19">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#dbgTraceVal"><span class="name">dbgTraceVal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString">ToString</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#dbgTraceVal">dbgTraceVal</a> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Util.html#dbgTrace">dbgTrace</a> <span class="fn">(<a href=".././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">a</span>)</span> <span class="fn">fun (<span class="fn">x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) =&gt; <span class="fn">a</span></span></span></span></li></ul></details><details id="instances-for-list-dbgTraceVal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="dbgTraceIfShared"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L24-L24">source</a></div><div class="attributes">@[never_extract, extern  lean_dbg_trace_if_shared]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#dbgTraceIfShared"><span class="name">dbgTraceIfShared</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(s : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><p>Display the given message if <code>a</code> is shared, that is, RC(a) &gt; 1</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#dbgTraceIfShared">dbgTraceIfShared</a> <span class="fn">s</span> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-dbgTraceIfShared" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="dbgStackTrace"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L28-L28">source</a></div><div class="attributes">@[never_extract, extern  lean_dbg_stack_trace]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#dbgStackTrace"><span class="name">dbgStackTrace</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(f : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><p>Print stack trace to stderr before evaluating given closure. Currently supported on Linux only.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#dbgStackTrace">dbgStackTrace</a> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">f</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span></span></li></ul></details><details id="instances-for-list-dbgStackTrace" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="dbgSleep"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L31-L31">source</a></div><div class="attributes">@[extern  lean_dbg_sleep]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#dbgSleep"><span class="name">dbgSleep</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(ms : <a href=".././Init/Prelude.html#UInt32">UInt32</a>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#dbgSleep">dbgSleep</a> <span class="fn">ms</span> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">f</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span></span></li></ul></details><details id="instances-for-list-dbgSleep" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="panicWithPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L36-L37">source</a></div><div class="attributes">@[never_extract, inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#panicWithPos"><span class="name">panicWithPos</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(modName : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(line : <a href=".././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(col : <a href=".././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#panicWithPos">panicWithPos</a> <span class="fn">modName</span> <span class="fn">line</span> <span class="fn">col</span> <span class="fn">msg</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#panic">panic</a> <span class="fn">(<a href=".././Init/Util.html#_private.Init.Util.0.mkPanicMessage">mkPanicMessage</a> <span class="fn">modName</span> <span class="fn">line</span> <span class="fn">col</span> <span class="fn">msg</span>)</span></span></span></li></ul></details><details id="instances-for-list-panicWithPos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="panicWithPosWithDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L42-L43">source</a></div><div class="attributes">@[never_extract, inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#panicWithPosWithDecl"><span class="name">panicWithPosWithDecl</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(modName : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(declName : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(line : <a href=".././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(col : <a href=".././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#panicWithPosWithDecl">panicWithPosWithDecl</a> <span class="fn">modName</span> <span class="fn">declName</span> <span class="fn">line</span> <span class="fn">col</span> <span class="fn">msg</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#panic">panic</a> <span class="fn">(<a href=".././Init/Util.html#_private.Init.Util.0.mkPanicMessageWithDecl">mkPanicMessageWithDecl</a> <span class="fn">modName</span> <span class="fn">declName</span> <span class="fn">line</span> <span class="fn">col</span> <span class="fn">msg</span>)</span></span></span></li></ul></details><details id="instances-for-list-panicWithPosWithDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="ptrAddrUnsafe"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L46-L46">source</a></div><div class="attributes">@[extern  lean_ptr_addr]</div>
<div class="decl_header"><span class="decl_kind">unsafe opaque</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#ptrAddrUnsafe"><span class="name">ptrAddrUnsafe</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#USize">USize</a></div></div></div></div><div class="decl" id="isExclusiveUnsafe"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L53-L53">source</a></div><div class="attributes">@[extern  lean_is_exclusive_obj]</div>
<div class="decl_header"><span class="decl_kind">unsafe opaque</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#isExclusiveUnsafe"><span class="name">isExclusiveUnsafe</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><p>Returns <code>true</code> if <code>a</code> is an exclusive object.
We say an object is exclusive if it is single-threaded and its reference counter is 1.</p></div></div><div class="decl" id="withPtrAddrUnsafe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L56-L57">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#withPtrAddrUnsafe"><span class="name">withPtrAddrUnsafe</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href=".././foundational_types.html">Type</a> v}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href=".././Init/Prelude.html#USize">USize</a> → <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(h : <span class="fn">∀ (<span class="fn">u₁ </span><span class="fn">u₂</span> : <a href=".././Init/Prelude.html#USize">USize</a>), <span class="fn"><span class="fn"><span class="fn">k</span> <span class="fn">u₁</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">u₂</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">β</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#withPtrAddrUnsafe">withPtrAddrUnsafe</a> <span class="fn">a</span> <span class="fn">k</span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">(<a href=".././Init/Util.html#ptrAddrUnsafe">ptrAddrUnsafe</a> <span class="fn">a</span>)</span></span></span></li></ul></details><details id="instances-for-list-withPtrAddrUnsafe" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="ptrEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L59-L59">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#ptrEq"><span class="name">ptrEq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(b : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#ptrEq">ptrEq</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">(<span class="fn"><a href=".././Init/Util.html#ptrAddrUnsafe">ptrAddrUnsafe</a> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#BEq.beq">==</a> <span class="fn"><a href=".././Init/Util.html#ptrAddrUnsafe">ptrAddrUnsafe</a> <span class="fn">b</span></span>)</span></span></li></ul></details><details id="instances-for-list-ptrEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="ptrEqList"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L61-L64">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#ptrEqList"><span class="name">ptrEqList</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(as : <span class="fn"><a href=".././Init/Prelude.html#List">List</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(bs : <span class="fn"><a href=".././Init/Prelude.html#List">List</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#ptrEqList">ptrEqList</a> <span class="fn">x✝</span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x✝</span>, <span class="fn">x</span> with
  | <span class="fn">[]</span>, <span class="fn">[]</span> =&gt; <a href=".././Init/Prelude.html#Bool.true">true</a>
  | <span class="fn"><span class="fn">a</span> <a href=".././Init/Prelude.html#List.cons">::</a> <span class="fn">as</span></span>, <span class="fn"><span class="fn">b</span> <a href=".././Init/Prelude.html#List.cons">::</a> <span class="fn">bs</span></span> =&gt; <span class="fn">if <span class="fn"><span class="fn"><a href=".././Init/Util.html#ptrEq">ptrEq</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href=".././Init/Util.html#ptrEqList">ptrEqList</a> <span class="fn">as</span> <span class="fn">bs</span></span> else <a href=".././Init/Prelude.html#Bool.false">false</a></span>
  | <span class="fn">x</span>, <span class="fn">x_1</span> =&gt; <a href=".././Init/Prelude.html#Bool.false">false</a></span></span></li></ul></details><details id="instances-for-list-ptrEqList" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="withPtrEqUnsafe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L67-L68">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#withPtrEqUnsafe"><span class="name">withPtrEqUnsafe</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(b : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(h : <span class="fn"><span class="fn"><span class="fn">a</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">b</span></span> → <span class="fn"><span class="fn"><span class="fn">k</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#withPtrEqUnsafe">withPtrEqUnsafe</a> <span class="fn">a</span> <span class="fn">b</span> <span class="fn">k</span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">if <span class="fn"><span class="fn"><a href=".././Init/Util.html#ptrEq">ptrEq</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span> then <a href=".././Init/Prelude.html#Bool.true">true</a> else <span class="fn"><span class="fn">k</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span></span></span></li></ul></details><details id="instances-for-list-withPtrEqUnsafe" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="withPtrEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L71-L71">source</a></div><div class="attributes">@[implemented_by withPtrEqUnsafe]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#withPtrEq"><span class="name">withPtrEq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(b : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <a href=".././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(h : <span class="fn"><span class="fn"><span class="fn">a</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">b</span></span> → <span class="fn"><span class="fn"><span class="fn">k</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#withPtrEq">withPtrEq</a> <span class="fn">a</span> <span class="fn">b</span> <span class="fn">k</span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <a href=".././Init/Prelude.html#Unit.unit">()</a></span></span></li></ul></details><details id="instances-for-list-withPtrEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="withPtrEqDecEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L74-L78">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#withPtrEqDecEq"><span class="name">withPtrEqDecEq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(b : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href=".././Init/Prelude.html#Unit">Unit</a> → <span class="fn"><a href=".././Init/Prelude.html#Decidable">Decidable</a> <span class="fn">(<span class="fn">a</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">b</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Decidable">Decidable</a> <span class="fn">(<span class="fn">a</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">b</span>)</span></span></div></div><p><code><a href=".././Init/Util.html#withPtrEq">withPtrEq</a></code> for <code><a href=".././Init/Prelude.html#DecidableEq">DecidableEq</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#withPtrEqDecEq">withPtrEqDecEq</a> <span class="fn">a</span> <span class="fn">b</span> <span class="fn">k</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">let <span class="fn">b_1</span> := <span class="fn"><a href=".././Init/Util.html#withPtrEq">withPtrEq</a> <span class="fn">a</span> <span class="fn">b</span> <span class="fn">(fun (<span class="fn">x</span> : <a href=".././Init/Prelude.html#Unit">Unit</a>) =&gt; <span class="fn"><a href=".././Init/Core.html#toBoolUsing">toBoolUsing</a> <span class="fn">(<span class="fn">k</span> <a href=".././Init/Prelude.html#Unit.unit">()</a>)</span></span>)</span> <span class="fn">⋯</span></span>;
  <span class="fn">match h : <span class="fn">b_1</span> with
  | <a href=".././Init/Prelude.html#Bool.true">true</a> =&gt; <span class="fn"><a href=".././Init/Prelude.html#Decidable.isTrue">isTrue</a> <span class="fn">⋯</span></span>
  | <a href=".././Init/Prelude.html#Bool.false">false</a> =&gt; <span class="fn"><a href=".././Init/Prelude.html#Decidable.isFalse">isFalse</a> <span class="fn">⋯</span></span></span></span></span></li></ul></details><details id="instances-for-list-withPtrEqDecEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="withPtrAddr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L81-L81">source</a></div><div class="attributes">@[implemented_by withPtrAddrUnsafe]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#withPtrAddr"><span class="name">withPtrAddr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href=".././foundational_types.html">Type</a> v}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href=".././Init/Prelude.html#USize">USize</a> → <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(h : <span class="fn">∀ (<span class="fn">u₁ </span><span class="fn">u₂</span> : <a href=".././Init/Prelude.html#USize">USize</a>), <span class="fn"><span class="fn"><span class="fn">k</span> <span class="fn">u₁</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">u₂</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">β</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#withPtrAddr">withPtrAddr</a> <span class="fn">a</span> <span class="fn">k</span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">0</span></span></span></li></ul></details><details id="instances-for-list-withPtrAddr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Runtime.markMultiThreaded"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L90-L90">source</a></div><div class="attributes">@[extern  lean_runtime_mark_multi_threaded]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#Runtime.markMultiThreaded"><span class="name">Runtime</span>.<span class="name">markMultiThreaded</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Sort</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><p>Marks given value and its object graph closure as multi-threaded if currently
marked single-threaded. This will make reference counter updates atomic and
thus more costly. It can still be useful to do eagerly when the value will be
shared between threads later anyway and there is available time budget to mark
it now.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#Runtime.markMultiThreaded">Runtime.markMultiThreaded</a> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-Runtime.markMultiThreaded" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Runtime.markPersistent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Init/Util.lean#L99-L99">source</a></div><div class="attributes">@[extern  lean_runtime_mark_persistent]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././Init/Util.html#Runtime.markPersistent"><span class="name">Runtime</span>.<span class="name">markPersistent</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href=".././foundational_types.html">Sort</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(a : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">α</span></div></div><p>Marks given value and its object graph closure as persistent. This will remove
reference counter updates but prevent the closure from being deallocated until
the end of the process! It can still be useful to do eagerly when the value
will be marked persistent later anyway and there is available time budget to
mark it now or it would be unnecessarily marked multi-threaded in between.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././Init/Util.html#Runtime.markPersistent">Runtime.markPersistent</a> <span class="fn">a</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">a</span></span></li></ul></details><details id="instances-for-list-Runtime.markPersistent" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src=".././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>