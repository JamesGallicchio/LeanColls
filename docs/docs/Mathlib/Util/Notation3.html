<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Util.Notation3</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Util.Notation3";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Util</span>.<span class="name">Notation3</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Batteries/Lean/Syntax.html">Batteries.Lean.Syntax</a></li><li><a href="../.././Batteries/Linter/UnreachableTactic.html">Batteries.Linter.UnreachableTactic</a></li><li><a href="../.././Batteries/Util/ExtendedBinder.html">Batteries.Util.ExtendedBinder</a></li><li><a href="../.././Mathlib/Tactic/ScopedNS.html">Mathlib.Tactic.ScopedNS</a></li><li><a href="../.././Mathlib/Lean/Elab/Term.html">Mathlib.Lean.Elab.Term</a></li><li><a href="../.././Mathlib/Lean/PrettyPrinter/Delaborator.html">Mathlib.Lean.PrettyPrinter.Delaborator</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Util.Notation3" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">«termExpand_binders%(_=&gt;_)_,_»</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.expandFoldl"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">expandFoldl</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.expandFoldr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">expandFoldr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.foldKind"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">foldKind</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.bindersItem"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">bindersItem</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.foldAction"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">foldAction</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.identOptScoped"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">identOptScoped</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.notation3Item"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">notation3Item</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.Matcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">Matcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.empty"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">empty</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.withVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">withVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.delabVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">delabVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.captureSubexpr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">captureSubexpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.getFoldArray"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">getFoldArray</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.getBinders"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">getBinders</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.MatchState.pushFold"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">pushFold</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchExpr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchFVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchFVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchTypeOf"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchTypeOf</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.natLitMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">natLitMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchApp"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchApp</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchForall"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchForall</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchLambda"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchLambda</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.setupLCtx"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">setupLCtx</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.exprToMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">exprToMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.mkExprMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkExprMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchScoped"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchScoped</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchScoped.go"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchScoped</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.mkScopedMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkScopedMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.matchFoldl"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchFoldl</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.mkFoldlMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkFoldlMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.mkFoldrMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkFoldrMatcher</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.mkNameFromSyntax"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkNameFromSyntax</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.BoundValueType"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">BoundValueType</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.prettyPrintOpt"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">prettyPrintOpt</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.getPrettyPrintOpt"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">getPrettyPrintOpt</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Notation3.notation3"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">notation3</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-notation3-macro-simulating-Lean-3-s-notation">The notation3 macro, simulating Lean 3's notation. <a class="hover-link" href="#The-notation3-macro-simulating-Lean-3-s-notation">#</a></h1></div><div class="mod_doc"><h3 class="markdown-heading" id="Syntaxes-supporting-notation3">Syntaxes supporting <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> <a class="hover-link" href="#Syntaxes-supporting-notation3">#</a></h3></div><div class="decl" id="Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L28-L35">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">«termExpand_binders%(_=&gt;_)_,_»</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Expands binders into nested combinators.
For example, the familiar exists is given by:
<code>expand_binders% (p =&gt; <a href="../.././Init/Core.html#Exists">Exists</a> p) x y : Nat, x &lt; y</code>
which expands to the same expression as
<code>∃ x y : Nat, x &lt; y</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.expandFoldl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L58-L62">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.expandFoldl"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">expandFoldl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.expandFoldl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.expandFoldr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L63-L67">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.expandFoldr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">expandFoldr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.expandFoldr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.foldKind"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L69-L70">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.foldKind"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">foldKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Keywording indicating whether to use a left- or right-fold.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.foldKind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.bindersItem"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L71-L72">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.bindersItem"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">bindersItem</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> argument matching <code>extBinders</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.bindersItem" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.foldAction"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L73-L75">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.foldAction"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">foldAction</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> argument simulating a Lean 3 fold notation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.foldAction" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.identOptScoped"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L76-L78">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.identOptScoped"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">identOptScoped</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> argument binding a name.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.identOptScoped" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.notation3Item"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L79-L82">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3Item"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">notation3Item</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> argument.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.notation3Item" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Expression-matching">Expression matching <a class="hover-link" href="#Expression-matching">#</a></h3><p>A more complicated part of <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> is the delaborator generator.
While <code>notation</code> relies on generating app unexpanders, we instead generate a
delaborator directly so that we can control how binders are formatted (we want
to be able to know the types of binders, whether a lambda is a constant function,
and whether it is <code>Prop</code>-valued, which are not things we can answer once we pass
to app unexpanders).</p></div><div class="decl" id="Mathlib.Notation3.MatchState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L95-L105">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>The dynamic state of a <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Matcher</a></code>.</p><ul class="structure_fields" id="Mathlib.Notation3.MatchState.mk"><li id="Mathlib.Notation3.MatchState.vars" class="structure_field"><div class="structure_field_info">vars : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <span class="fn">(<a href="../.././Lean/SubExpr.html#Lean.SubExpr">Lean.SubExpr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/MetavarContext.html#Lean.LocalInstances">Lean.LocalInstances</a></span>)</span></span></div><div class="structure_field_doc"><p>This stores the assignments of variables to subexpressions (and their contexts)
that have been found so far during the course of the matching algorithm.
We store the contexts since we need to delaborate expressions after we leave
scoping constructs.</p></div></li><li id="Mathlib.Notation3.MatchState.scopeState" class="structure_field"><div class="structure_field_info">scopeState : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Batteries.ExtendedBinder.extBinderParenthesized</span>)</span>)</span></span></div><div class="structure_field_doc"><p>The binders accumulated while matching a <code>scoped</code> expression.</p></div></li><li id="Mathlib.Notation3.MatchState.foldState" class="structure_field"><div class="structure_field_info">foldState : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div><div class="structure_field_doc"><p>The arrays of delaborated <code>Term</code>s accumulated while matching
<code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldl">foldl</a></code> and <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldr">foldr</a></code> expressions. For <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldl">foldl</a></code>, the arrays are stored in reverse order.</p></div></li></ul><details id="instances-for-list-Mathlib.Notation3.MatchState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.Matcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L108-L109">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">Matcher</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>A matcher is a delaboration function that transforms <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">MatchState</a></code>s.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">(<a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a> → <span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a></span>)</span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.Matcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.empty"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L112-L115">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.empty"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">empty</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a></div></div><p>The initial state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.empty">Mathlib.Notation3.MatchState.empty</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">vars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">scopeState</span> := <span class="fn">none</span>, <span class="fn">foldState</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a> }</span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.empty" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.withVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L119-L122">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.withVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">withVar</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(m : <span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <span class="fn">α</span></span></div></div><p>Evaluate <code>f</code> with the given variable's value as the <code>SubExpr</code> and within that subexpression's
saved context. Fails if the variable has no value.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.withVar</span> <span class="fn">name</span> <span class="fn">m</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.vars</span>.find?</span> <span class="fn">name</span></span> with
  | <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">(<span class="fn">se</span>, <span class="fn">lctx</span>, <span class="fn">linsts</span>)</span></span> =&gt;
    <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.withLCtx">Lean.Meta.withLCtx</a> <span class="fn">lctx</span> <span class="fn">linsts</span> <span class="fn">(<a href="../.././Init/Prelude.html#withTheReader">withTheReader</a> <a href="../.././Lean/SubExpr.html#Lean.SubExpr">Lean.SubExpr</a> <span class="fn">(fun (<span class="fn">x</span> : <a href="../.././Lean/SubExpr.html#Lean.SubExpr">Lean.SubExpr</a>) =&gt; <span class="fn">se</span>)</span> <span class="fn">m</span>)</span></span>
  | <span class="fn">x</span> =&gt; <span class="fn">failure</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.withVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.delabVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L127-L132">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.delabVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">delabVar</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(checkNot? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></div></div><p>Delaborate the given variable's value. Fails if the variable has no value.
If <code>checkNot</code> is provided, then checks that the expression being delaborated is not
the given one (this is used to prevent infinite loops).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.delabVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.captureSubexpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L135-L136">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.captureSubexpr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">captureSubexpr</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a></span></div></div><p>Assign a variable to the current <code>SubExpr</code>, capturing the local context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.captureSubexpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.getFoldArray"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L140-L141">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.getFoldArray"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">getFoldArray</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></div></div><p>Get the accumulated array of delaborated terms for a given foldr/foldl.
Returns <code>#[]</code> if nothing has been pushed yet.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.getFoldArray</span> <span class="fn">name</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn"><span class="fn">s</span>.foldState</span>.find?</span> <span class="fn">name</span>)</span>.getD</span> <span class="fn">#[]</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.getFoldArray" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.getBinders"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L145-L146">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.getBinders"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">getBinders</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Batteries.ExtendedBinder.extBinderParenthesized</span>)</span></span></div></div><p>Get the accumulated array of delaborated terms for a given foldr/foldl.
Returns <code>#[]</code> if nothing has been pushed yet.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">s</span>.getBinders</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.scopeState</span>.getD</span> <span class="fn">#[]</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.getBinders" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.MatchState.pushFold"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L149-L151">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState.pushFold"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">MatchState</span>.<span class="name">pushFold</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a>)</span></span>
<span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(t : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a></div></div><p>Push a delaborated term onto a foldr/foldl array.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.pushFold</span> <span class="fn">name</span> <span class="fn">t</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">let <span class="fn">ts</span> := <span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">s</span>.getFoldArray</span> <span class="fn">name</span>)</span>.push</span> <span class="fn">t</span></span>;
  <span class="fn">{ <span class="fn">vars</span> := <span class="fn"><span class="fn">s</span>.vars</span>, <span class="fn">scopeState</span> := <span class="fn"><span class="fn">s</span>.scopeState</span>, <span class="fn">foldState</span> := <span class="fn"><span class="fn"><span class="fn"><span class="fn">s</span>.foldState</span>.insert</span> <span class="fn">name</span> <span class="fn">ts</span></span> }</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.MatchState.pushFold" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L155-L160">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchVar</span></a></span><span class="decl_args">
<span class="fn">(c : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher that assigns the current <code>SubExpr</code> into the match state;
if a value already exists, then it checks for equality.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L163-L165">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchExpr"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchExpr</span></a></span><span class="decl_args">
<span class="fn">(p : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher for an expression satisfying a given predicate.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchExpr">Mathlib.Notation3.matchExpr</a> <span class="fn">p</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.PrettyPrinter.Delaborator.SubExpr.getExpr</span>
  <span class="fn"><a href="../.././Init/Control/Basic.html#guard">guard</a> <span class="fn">(<span class="fn"><span class="fn">p</span> <span class="fn">__do_lift</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">s</span></span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchFVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L169-L172">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchFVar"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchFVar</span></a></span><span class="decl_args">
<span class="fn">(userName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(matchTy : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher for <code>Expr.fvar</code>.
It checks that the user name agrees and that the type of the expression is matched by <code>matchTy</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchFVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchTypeOf"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L175-L176">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchTypeOf"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchTypeOf</span></a></span><span class="decl_args">
<span class="fn">(matchTy : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher that checks that the type of the expression is matched by <code>matchTy</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchTypeOf">Mathlib.Notation3.matchTypeOf</a> <span class="fn">matchTy</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/SubExpr.html#Lean.PrettyPrinter.Delaborator.SubExpr.withType">Lean.PrettyPrinter.Delaborator.SubExpr.withType</a> <span class="fn">(<span class="fn">matchTy</span> <span class="fn">s</span>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchTypeOf" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.natLitMatcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L179-L181">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.natLitMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">natLitMatcher</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matches raw nat lits.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.natLitMatcher">Mathlib.Notation3.natLitMatcher</a> <span class="fn">n</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.PrettyPrinter.Delaborator.SubExpr.getExpr</span>
  <span class="fn"><a href="../.././Init/Control/Basic.html#guard">guard</a> <span class="fn">(<span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.rawNatLit?</span> <a href="../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">n</span></span>)</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">s</span></span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.natLitMatcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchApp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L184-L188">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchApp"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchApp</span></a></span><span class="decl_args">
<span class="fn">(matchFun : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args">
<span class="fn">(matchArg : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matches applications.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchApp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchForall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L192-L196">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchForall"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchForall</span></a></span><span class="decl_args">
<span class="fn">(matchDom : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args">
<span class="fn">(matchBody : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matches pi types. The name <code>n</code> should be unique, and <code>matchBody</code> should use <code>n</code>
as the <code>userName</code> of its fvar.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchForall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L199-L203">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchLambda"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchLambda</span></a></span><span class="decl_args">
<span class="fn">(matchDom : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args">
<span class="fn">(matchBody : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matches lambdas. The <code>matchBody</code> takes the fvar introduced when visiting the body.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchLambda" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.setupLCtx"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L208-L216">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.setupLCtx"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">setupLCtx</span></a></span><span class="decl_args">
<span class="fn">(lctx : <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(boundNames : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span></div></div><p>Adds all the names in <code>boundNames</code> to the local context
with types that are fresh metavariables.
This is used for example when initializing <code>p</code> in <code>(scoped p =&gt; ...)</code> when elaborating <code>...</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.setupLCtx" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.exprToMatcher"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L227-L289">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.exprToMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">exprToMatcher</span></a></span><span class="decl_args">
<span class="fn">(boundFVars : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(localFVars : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div></div><p>Given an expression, generate a matcher for it.
The <code>boundFVars</code> hash map records which state variables certain fvars correspond to.
The <code>localFVars</code> hash map records which local variable the matcher should use for an exact
expression match.</p><p>If it succeeds generating a matcher, returns</p><ol>
<li>a list of keys that should be used for the <code>delab</code> attribute
when defining the elaborator</li>
<li>a <code>Term</code> that represents a <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Matcher</a></code> for the given expression <code>e</code>.</li>
</ol></div></div><div class="decl" id="Mathlib.Notation3.mkExprMatcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L297-L311">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkExprMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkExprMatcher</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(boundNames : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div></div><p>Returns a <code>Term</code> that represents a <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Matcher</a></code> for the given pattern <code>stx</code>.
The <code>boundNames</code> set determines which identifiers are variables in the pattern.
Fails in the <code><a href="../.././Init/Control/Option.html#OptionT">OptionT</a></code> sense if it comes across something it's unable to handle.</p><p>Also returns constant names that could serve as a key for a delaborator.
For example, if it's for a function <code>f</code>, then <code>app.f</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.mkExprMatcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchScoped"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L318-L354">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchScoped"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchScoped</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopeId : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(smatcher : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher for processing <code>scoped</code> syntax. Assumes the expression to be matched
against is in the <code>lit</code> variable.</p><p>Runs <code>smatcher</code>, extracts the resulting <code>scopeId</code> variable, processes this value
(which must be a lambda) to produce a binder, and loops.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchScoped">Mathlib.Notation3.matchScoped</a> <span class="fn">lit</span> <span class="fn">scopeId</span> <span class="fn">smatcher</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchScoped.go">Mathlib.Notation3.matchScoped.go</a> <span class="fn">lit</span> <span class="fn">scopeId</span> <span class="fn">smatcher</span> <span class="fn">#[]</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Notation3.matchScoped" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchScoped.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L320-L354">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchScoped.go"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchScoped</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopeId : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(smatcher : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args">
<span class="fn">(binders : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Batteries.ExtendedBinder.extBinderParenthesized</span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a> → <span class="fn"><a href="../.././Lean/PrettyPrinter/Delaborator/Basic.html#Lean.PrettyPrinter.Delaborator.DelabM">Lean.PrettyPrinter.Delaborator.DelabM</a> <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.MatchState">Mathlib.Notation3.MatchState</a></span></span></div></div><p>Variant of <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchScoped">matchScoped</a></code> after some number of <code>binders</code> have already been captured.</p></div></div><div class="decl" id="Mathlib.Notation3.mkScopedMatcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L360-L364">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkScopedMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkScopedMatcher</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopeId : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopedTerm : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(boundNames : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div></div><p>Create a <code>Term</code> that represents a matcher for <code>scoped</code> notation.
Fails in the <code><a href="../.././Init/Control/Option.html#OptionT">OptionT</a></code> sense if a matcher couldn't be constructed.
Also returns a delaborator key like in <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkExprMatcher">mkExprMatcher</a></code>.
Reminder: <code>$lit:ident : (scoped $scopedId:ident =&gt; $scopedTerm:Term)</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.mkScopedMatcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.matchFoldl"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L367-L385">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.matchFoldl"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">matchFoldl</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(y : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(smatcher : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args">
<span class="fn">(sinit : <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.Matcher">Mathlib.Notation3.Matcher</a></div></div><p>Matcher for expressions produced by <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldl">foldl</a></code>.</p></div></div><div class="decl" id="Mathlib.Notation3.mkFoldlMatcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L389-L395">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkFoldlMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkFoldlMatcher</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(y : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopedTerm : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(init : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(boundNames : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div></div><p>Create a <code>Term</code> that represents a matcher for <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldl">foldl</a></code> notation.
Reminder: <code>( lit &quot;,&quot;* =&gt; <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldl">foldl</a> (x y =&gt; scopedTerm) init)</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.mkFoldlMatcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.mkFoldrMatcher"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L399-L406">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkFoldrMatcher"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkFoldrMatcher</span></a></span><span class="decl_args">
<span class="fn">(lit : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(y : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(scopedTerm : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(init : <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span>
<span class="decl_args">
<span class="fn">(boundNames : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span></span></div></div><p>Create a <code>Term</code> that represents a matcher for <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldr">foldr</a></code> notation.
Reminder: <code>( lit &quot;,&quot;* =&gt; <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldr">foldr</a> (x y =&gt; scopedTerm) init)</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.mkFoldrMatcher" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 class="markdown-heading" id="The-notation3-command">The <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> command <a class="hover-link" href="#The-notation3-command">#</a></h3></div><div class="decl" id="Mathlib.Notation3.mkNameFromSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L412-L420">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.mkNameFromSyntax"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">mkNameFromSyntax</span></a></span><span class="decl_args">
<span class="fn">(name? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lean.Parser.Command.namedName</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(syntaxArgs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`stx</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(attrKind : <span class="fn"><a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lean.Parser.Term.attrKind</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM">Lean.Elab.Command.CommandElabM</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Create a name that we can use for the <code>syntax</code> definition, using the
algorithm from <code>notation</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.mkNameFromSyntax" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.BoundValueType"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L424-L430">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">BoundValueType</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Used when processing different kinds of variables when building the
final delaborator.</p><ul class="constructors"><li class="constructor" id="Mathlib.Notation3.BoundValueType.normal">normal: <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType">Mathlib.Notation3.BoundValueType</a><div class="inductive_ctor_doc"><p>A normal variable, delaborate its expression.</p></div></li><li class="constructor" id="Mathlib.Notation3.BoundValueType.foldl">foldl: <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType">Mathlib.Notation3.BoundValueType</a><div class="inductive_ctor_doc"><p>A fold variable, use the fold state (but reverse the array).</p></div></li><li class="constructor" id="Mathlib.Notation3.BoundValueType.foldr">foldr: <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType">Mathlib.Notation3.BoundValueType</a><div class="inductive_ctor_doc"><p>A fold variable, use the fold state (do not reverse the array).</p></div></li></ul><details id="instances-for-list-Mathlib.Notation3.BoundValueType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.prettyPrintOpt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L432-L432">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.prettyPrintOpt"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">prettyPrintOpt</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.prettyPrintOpt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.getPrettyPrintOpt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L435-L441">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.getPrettyPrintOpt"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">getPrettyPrintOpt</span></a></span><span class="decl_args">
<span class="fn">(opt? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Mathlib.Notation3.prettyPrintOpt</span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Interpret a <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.prettyPrintOpt">prettyPrintOpt</a></code>. The default value is <code>true</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.getPrettyPrintOpt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Notation3.notation3"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Util/Notation3.lean#L443-L613">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3"><span class="name">Mathlib</span>.<span class="name">Notation3</span>.<span class="name">notation3</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> declares notation using Lean-3-style syntax.</p><p>Examples:</p><pre><code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a> &quot;∀ᶠ &quot; (...) &quot; in &quot; f &quot;, &quot; r:(scoped p =&gt; Filter.eventually p f) =&gt; r
<a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a> &quot;MyList[&quot; (x&quot;, &quot;* =&gt; <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.BoundValueType.foldr">foldr</a> (a b =&gt; MyList.cons a b) MyList.nil) &quot;]&quot; =&gt; x
</code></pre><p>By default notation is unable to mention any variables defined using <code>variable</code>, but
<code>local <a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a></code> is able to use such local variables.</p><p>Use <code><a href="../.././Mathlib/Util/Notation3.html#Mathlib.Notation3.notation3">notation3</a> (prettyPrint := false)</code> to keep the command from generating a pretty printer
for the notation.</p><p>This command can be used in mathlib4 but it has an uncertain future and was created primarily
for backward compatibility.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Notation3.notation3" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><p><code>scoped[ns]</code> support</p></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>