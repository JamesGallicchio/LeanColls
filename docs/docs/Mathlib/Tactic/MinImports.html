<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.MinImports</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.MinImports";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">MinImports</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././ImportGraph/Imports.html">ImportGraph.Imports</a></li><li><a href="../.././Mathlib/Init.html">Mathlib.Init</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.MinImports" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getSyntaxNodeKinds"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getSyntaxNodeKinds</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getVisited"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getVisited</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getId"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getId</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getIds"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getIds</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getAttrNames"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAttrNames</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getAttrs"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAttrs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.previousInstName"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">previousInstName</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getAllImports"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAllImports</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.getIrredundantImports"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getIrredundantImports</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.minImpsCore"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">minImpsCore</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.minImpsStx"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">minImpsStx</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Command.MinImports.«command#min_imports_in_»"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">«command#min_imports_in_»</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="min-imports-in-a-command-to-find-minimal-imports"><code>#min_imports in</code> a command to find minimal imports <a class="hover-link" href="#min-imports-in-a-command-to-find-minimal-imports">#</a></h1><p><code>#min_imports in stx</code> scans the syntax <code>stx</code> to find a collection of minimal imports that should be
sufficient for <code>stx</code> to make sense.
If <code>stx</code> is a command, then it also elaborates <code>stx</code> and, in case it is a declaration, then
it also finds the imports implied by the declaration.</p><p>Unlike the related <code>#find_home</code>, this command takes into account notation and tactic information.</p><h2 class="markdown-heading" id="Limitations">Limitations <a class="hover-link" href="#Limitations">#</a></h2><p>Parsing of <code>attribute</code>s is hard and the command makes minimal effort to support them.
Here is an example where the command fails to notice a dependency:</p><pre><code class="language-lean">import Mathlib.Data.Sym.Sym2.<a href="../.././Init.html">Init</a> -- the actual minimal import
import Aesop.Frontend.Attribute   -- the import that `#min_imports in` suggests

import <a href="../.././Mathlib/Tactic/MinImports.html">Mathlib.Tactic.MinImports</a>

-- import Aesop.Frontend.Attribute
#min_imports in
@[aesop (rule_sets := [Sym2]) [safe [constructors, cases], norm]]
inductive Rel (α : Type) : α × α → α × α → Prop
  | refl (x y : α) : Rel _ (x, y) (x, y)
  | swap (x y : α) : Rel _ (x, y) (y, x)

-- `import Mathlib.Data.Sym.Sym2.Init` is <a href="../.././Init/Prelude.html#not">not</a> detected by `#min_imports in`.
</code></pre><h2 class="markdown-heading" id="Todo">Todo <a class="hover-link" href="#Todo">#</a></h2><p><em>Examples</em>
When parsing an <code>example</code>, <code>#min_imports in</code> retrieves all the information that it can from the
<code>Syntax</code> of the <code>example</code>, but, since the <code>example</code> is not added to the environment, it fails
to retrieve any <code>Expr</code> information about the proof term.
It would be desirable to make <code>#min_imports in example ...</code> inspect the resulting proof and
report imports, but this feature is missing for the moment.</p><p><em>Using <code>InfoTrees</code></em>
It may be more efficient (not necessarily in terms of speed, but of simplicity of code),
to inspect the <code>InfoTrees</code> for each command and retrieve information from there.
I have not looked into this yet.</p></div><div class="decl" id="Mathlib.Command.MinImports.getSyntaxNodeKinds"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L60-L64">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getSyntaxNodeKinds"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getSyntaxNodeKinds</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getSyntaxNodeKinds">getSyntaxNodeKinds</a> stx</code> takes a <code>Syntax</code> input <code>stx</code> and returns the <code>NameSet</code> of all the
<code>SyntaxNodeKinds</code> and all the identifiers contained in <code>stx</code>.</p></div></div><div class="decl" id="Mathlib.Command.MinImports.getVisited"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L69-L71">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getVisited"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getVisited</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(decl : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></div></div><p>extracts the names of the declarations in <code>env</code> on which <code>decl</code> depends.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getVisited" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.getId"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L77-L88">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getId"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getId</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM">Lean.Elab.Command.CommandElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getId">getId</a> stx</code> takes as input a <code>Syntax</code> <code>stx</code>.
If <code>stx</code> contains a <code>declId</code>, then it returns the <code>ident</code>-syntax for the <code>declId</code>.
If <code>stx</code> is a nameless instance, then it also tries to fetch the <code>ident</code> for the instance.
Otherwise it returns <code>.missing</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getId" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.getIds"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L92-L95">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getIds"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getIds</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getIds">getIds</a> stx</code> extracts all identifiers, collecting them in a <code>NameSet</code>.</p></div></div><div class="decl" id="Mathlib.Command.MinImports.getAttrNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L100-L103">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAttrNames"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAttrNames</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAttrNames">getAttrNames</a> stx</code> extracts <code>attribute</code>s from <code>stx</code>.
It does not collect <code>simp</code>, <code>ext</code>, <code>to_additive</code>.
It should collect almost all other attributes, e.g., <code>fun_prop</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getAttrNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.getAttrs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L107-L114">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAttrs"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAttrs</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAttrs">getAttrs</a> env stx</code> returns all attribute declaration names contained in <code>stx</code> and registered
in the <code>Environment </code>env`.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getAttrs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.previousInstName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L121-L132">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.previousInstName"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">previousInstName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.previousInstName">previousInstName</a> nm</code> takes as input a name <code>nm</code>, assuming that it is the name of an
auto-generated &quot;nameless&quot; <code>instance</code>.
If <code>nm</code> ends in <code>..._n</code>, where <code>n</code> is a number, it returns the same name, but with <code>_n</code> replaced
by <code>_(n-1)</code>, unless <code>n ≤ 1</code>, in which case it simply removes the <code>_n</code> suffix.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.previousInstName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.getAllImports"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L144-L174">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAllImports"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getAllImports</span></a></span><span class="decl_args">
<span class="fn">(cmd : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(id : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(dbg? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM">Lean.Elab.Command.CommandElabM</a> <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getAllImports">getAllImports</a> cmd <a href="../.././Init/Prelude.html#id">id</a></code> takes a <code>Syntax</code> input <code>cmd</code> and returns the <code>NameSet</code> of all the
module names that are implied by</p><ul>
<li>the <code>SyntaxNodeKinds</code>,</li>
<li>the attributes of <code>cmd</code> (if there are any),</li>
<li>the identifiers contained in <code>cmd</code>,</li>
<li>if <code>cmd</code> adds a declaration <code>d</code> to the environment, then also all the module names implied by <code>d</code>.
The argument <code><a href="../.././Init/Prelude.html#id">id</a></code> is expected to be an identifier.
It is used either for the internally generated name of a &quot;nameless&quot; <code>instance</code> or when parsing
an identifier representing the name of a declaration.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getAllImports" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.getIrredundantImports"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L180-L181">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getIrredundantImports"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">getIrredundantImports</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(importNames : <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getIrredundantImports">getIrredundantImports</a> env importNames</code> takes an <code>Environment</code> and a <code>NameSet</code> as inputs.
Assuming that <code>importNames</code> are module names,
it returns the <code>NameSet</code> consisting of a minimal collection of module names whose transitive
closure is enough to parse (and elaborate) <code>cmd</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.getIrredundantImports">Mathlib.Command.MinImports.getIrredundantImports</a> <span class="fn">env</span> <span class="fn">importNames</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Data/RBTree.html#Lean.RBTree.diff">Lean.RBTree.diff</a> <span class="fn">importNames</span> <span class="fn">(<span class="fn"><span class="fn">env</span>.findRedundantImports</span> <span class="fn">(<a href="../.././Lean/Data/RBTree.html#Lean.RBTree.toArray">Lean.RBTree.toArray</a> <span class="fn">importNames</span>)</span>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.getIrredundantImports" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.minImpsCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L194-L197">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.minImpsCore"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">minImpsCore</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(id : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM">Lean.Elab.Command.CommandElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.minImpsCore">minImpsCore</a> stx <a href="../.././Init/Prelude.html#id">id</a></code> is the internal function to elaborate the <code>#min_imports in</code> command.
It collects the irredundant imports to parse and elaborate <code>stx</code> and logs</p><pre><code class="language-lean">import A
import B
...
import Z
</code></pre><p>The <code><a href="../.././Init/Prelude.html#id">id</a></code> input is expected to be the name of the declaration that is currently processed.
It is used to provide the internally generated name for &quot;nameless&quot; <code>instance</code>s.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.minImpsCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.minImpsStx"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L199-L201">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.minImpsStx"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">minImpsStx</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>#min_imports in cmd</code> scans the syntax <code>cmd</code> and the declaration obtained by elaborating <code>cmd</code>
to find a collection of minimal imports that should be sufficient for <code>cmd</code> to work.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.minImpsStx" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Command.MinImports.«command#min_imports_in_»"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/MinImports.lean#L203-L204">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/MinImports.html#Mathlib.Command.MinImports.«command#min_imports_in_»"><span class="name">Mathlib</span>.<span class="name">Command</span>.<span class="name">MinImports</span>.<span class="name">«command#min_imports_in_»</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>#min_imports in cmd</code> scans the syntax <code>cmd</code> and the declaration obtained by elaborating <code>cmd</code>
to find a collection of minimal imports that should be sufficient for <code>cmd</code> to work.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Command.MinImports.«command#min_imports_in_»" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>