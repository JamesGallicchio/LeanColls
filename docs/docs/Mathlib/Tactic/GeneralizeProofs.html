<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.GeneralizeProofs</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.GeneralizeProofs";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/Elab/Tactic/Config.html">Lean.Elab.Tactic.Config</a></li><li><a href="../.././Lean/Elab/Tactic/Location.html">Lean.Elab.Tactic.Location</a></li><li><a href="../.././Mathlib/Lean/Expr/Basic.html">Mathlib.Lean.Expr.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.GeneralizeProofs" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.Config"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">Config</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.elabConfig"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">elabConfig</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.GState"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">GState</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MGen"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span>.<span class="name">insertFVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.AContext"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">AContext</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.AState"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">AState</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MAbs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MGen.runMAbs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span>.<span class="name">runMAbs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MAbs.findProof?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">findProof?</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MAbs.insertProof"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">insertProof</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MAbs.withLocal"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">withLocal</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.MAbs.withRecurse"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">withRecurse</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">appArgExpectedTypes</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">appArgExpectedTypes</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.mkLambdaFVarsUsedOnly"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">mkLambdaFVarsUsedOnly</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.abstractProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.abstractProofs.visit"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span>.<span class="name">visit</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.abstractProofs.visitProof"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span>.<span class="name">visitProof</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.initialPropToFVar"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">initialPropToFVar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">withGeneralizedProofs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">withGeneralizedProofs</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofsCore</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofsCore</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.generalizeProofs"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">generalizeProofs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.generalizeProofsElab"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">generalizeProofsElab</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-generalize-proofs-tactic">The <code>generalize_proofs</code> tactic <a class="hover-link" href="#The-generalize-proofs-tactic">#</a></h1><p>Generalize any proofs occurring in the goal or in chosen hypotheses,
replacing them by local hypotheses.
When these hypotheses are named, this makes it easy to refer to these proofs later in a proof,
commonly useful when dealing with functions like <code><a href="../.././Init/Classical.html#Classical.choose">Classical.choose</a></code> that produce data from proofs.
It is also useful to eliminate proof terms to handle issues with dependent types.</p><p>For example:</p><pre><code class="language-lean">example : List.nthLe [1, 2] 1 (by simp) = 2 := by
  -- ⊢ [1, 2].nthLe 1 ⋯ = 2
  generalize_proofs h
  -- h : 1 &lt; [1, 2].length
  -- ⊢ [1, 2].nthLe 1 h = 2
</code></pre><p>The tactic is similar in spirit to <code>Lean.Meta.AbstractNestedProofs</code> in core.
One difference is that it the tactic tries to propagate expected types so that
we get <code>1 &lt; [1, 2].length</code> in the above example rather than <code>1 &lt; <a href="../.././Init/Prelude.html#Nat.succ">Nat.succ</a> 1</code>.</p></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.Config"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L43-L52">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">Config</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Configuration for the <code>generalize_proofs</code> tactic.</p><ul class="structure_fields" id="Mathlib.Tactic.GeneralizeProofs.Config.mk"><li id="Mathlib.Tactic.GeneralizeProofs.Config.maxDepth" class="structure_field"><div class="structure_field_info">maxDepth : <a href="../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>The maximum recursion depth when generalizing proofs.
When <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config.maxDepth">maxDepth</a> &gt; 0</code>, then proofs are generalized from the types of the generalized proofs too.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.Config.abstract" class="structure_field"><div class="structure_field_info">abstract : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config.abstract">abstract</a></code> is <code>true</code>, then the tactic will create universally quantified proofs
to account for bound variables.
When it is <code>false</code> then such proofs are left alone.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.Config.debug" class="structure_field"><div class="structure_field_info">debug : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>(Debugging) When <code>true</code>, enables consistency checks.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.Config" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.elabConfig"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L54-L55">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.elabConfig"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">elabConfig</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config">Mathlib.Tactic.GeneralizeProofs.Config</a></span></span></div></div><p>Elaborates a <code>Parser.Tactic.<a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.config">config</a></code> for <code>generalize_proofs</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.elabConfig" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.GState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L58-L60">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">GState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State for the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">MGen</a></code> monad.</p><ul class="structure_fields" id="Mathlib.Tactic.GeneralizeProofs.GState.mk"><li id="Mathlib.Tactic.GeneralizeProofs.GState.propToFVar" class="structure_field"><div class="structure_field_info">propToFVar : <span class="fn"><a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>Mapping from propositions to an fvar in the local context with that type.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.GState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MGen"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L64-L64">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Monad used to generalize proofs.
Carries <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config">Mathlib.Tactic.GeneralizeProofs.Config</a></code> and <code>Mathlib.Tactic.GeneralizeProofs.State</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config">Mathlib.Tactic.GeneralizeProofs.Config</a>
    <span class="fn">(<a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState">Mathlib.Tactic.GeneralizeProofs.GState</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MGen" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L67-L68">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span>.<span class="name">insertFVar</span></a></span><span class="decl_args">
<span class="fn">(prop : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvar : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Inserts a prop/fvar pair into the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState.propToFVar">propToFVar</a></code> map.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar">Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar</a> <span class="fn">prop</span> <span class="fn">fvar</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#modify">modify</a> <span class="fn">fun (<span class="fn">s</span> : <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState">Mathlib.Tactic.GeneralizeProofs.GState</a>) =&gt;
    <span class="fn">{ <span class="fn">propToFVar</span> := <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap.insert">Lean.HashMap.insert</a> <span class="fn"><span class="fn">s</span>.propToFVar</span> <span class="fn">prop</span> <span class="fn">fvar</span></span> }</span></span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MGen.insertFVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.AContext"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L71-L82">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">AContext</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Context for the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">MAbs</a></code> monad.</p><ul class="structure_fields" id="Mathlib.Tactic.GeneralizeProofs.AContext.mk"><li id="Mathlib.Tactic.GeneralizeProofs.AContext.fvars" class="structure_field"><div class="structure_field_info">fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>The local fvars corresponding to bound variables.
Abstraction needs to be sure that these variables do not appear in abstracted terms.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.AContext.propToFVar" class="structure_field"><div class="structure_field_info">propToFVar : <span class="fn"><a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>A copy of <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState.propToFVar">propToFVar</a></code> from <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState">GState</a></code>.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.AContext.depth" class="structure_field"><div class="structure_field_info">depth : <a href="../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>The recursion depth, for how many times <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.abstractProofs.visit">visit</a></code> is called from within `visitProof.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.AContext.initLCtx" class="structure_field"><div class="structure_field_info">initLCtx : <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a></div><div class="structure_field_doc"><p>The initial local context, for resetting when recursing.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.AContext.config" class="structure_field"><div class="structure_field_info">config : <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config">Mathlib.Tactic.GeneralizeProofs.Config</a></div><div class="structure_field_doc"><p>The tactic configuration.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.AContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.AState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L85-L90">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AState"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">AState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State for the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">MAbs</a></code> monad.</p><ul class="structure_fields" id="Mathlib.Tactic.GeneralizeProofs.AState.mk"><li id="Mathlib.Tactic.GeneralizeProofs.AState.generalizations" class="structure_field"><div class="structure_field_info">generalizations : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div><div class="structure_field_doc"><p>The prop/proof triples to add to the local context.
The proofs must not refer to fvars in <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.fvars">fvars</a></code>.</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.AState.propToProof" class="structure_field"><div class="structure_field_info">propToProof : <span class="fn"><a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>Map version of <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AState.generalizations">generalizations</a></code>. Use <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.findProof?">MAbs.findProof?</a></code> and <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.insertProof">MAbs.insertProof</a></code>.</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.AState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MAbs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L98-L98">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Monad used to abstract proofs, to prepare for generalization.
Has a cache (of expr/type? pairs),
and it also has a reader context <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext">Mathlib.Tactic.GeneralizeProofs.AContext</a></code>
and a state <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AState">Mathlib.Tactic.GeneralizeProofs.AState</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MAbs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MGen.runMAbs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L101-L106">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen.runMAbs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MGen</span>.<span class="name">runMAbs</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(mx : <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">(<span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>)</span></span></div></div><p>Runs <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">MAbs</a></code> in <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">MGen</a></code>. Returns the value and the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AState.generalizations">generalizations</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MGen.runMAbs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MAbs.findProof?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L111-L115">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.findProof?"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">findProof?</span></a></span><span class="decl_args">
<span class="fn">(prop : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Finds a proof of <code>prop</code> by looking at <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState.propToFVar">propToFVar</a></code> and <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AState.propToProof">propToProof</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MAbs.findProof?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MAbs.insertProof"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L120-L133">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.insertProof"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">insertProof</span></a></span><span class="decl_args">
<span class="fn">(prop : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(pf : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Generalize <code>prop</code>, where <code>proof</code> is its proof.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MAbs.insertProof" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MAbs.withLocal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L136-L137">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.withLocal"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">withLocal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(fvar : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">α</span></span></div></div><p>Runs <code>x</code> with an additional local variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MAbs.withLocal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.MAbs.withRecurse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L140-L142">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs.withRecurse"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">MAbs</span>.<span class="name">withRecurse</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <span class="fn">α</span></span></div></div><p>Runs <code>x</code> with an increased recursion depth and the initial local context, clearing <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.fvars">fvars</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.MAbs.withRecurse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L149-L183">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">appArgExpectedTypes</span></a></span><span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span>)</span></span></div></div><p>Computes expected types for each argument to <code>f</code>,
given that the type of <code>mkAppN f args</code> is supposed to be <code>ty?</code>
(where if <code>ty?</code> is none, there's no type to propagate inwards).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L156-L183">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">appArgExpectedTypes</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span>)</span></span></div></div><p>Core implementation for <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes">appArgExpectedTypes</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.appArgExpectedTypes.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.mkLambdaFVarsUsedOnly"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L191-L207">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.mkLambdaFVarsUsedOnly"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">mkLambdaFVarsUsedOnly</span></a></span><span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Does <code>mkLambdaFVars <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.fvars">fvars</a> e</code> but</p><ol>
<li>zeta reduces let bindings</li>
<li>only includes used fvars</li>
<li>returns the list of fvars that were actually abstracted</li>
</ol><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.mkLambdaFVarsUsedOnly" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.abstractProofs"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L222-L320">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.abstractProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Abstract proofs occurring in the expression.
A proof is <em>abstracted</em> if it is of the form <code>f a b ...</code> where <code>a b ...</code> are bound variables
(that is, they are variables that are not present in the initial local context)
and where <code>f</code> contains no bound variables.
In this form, <code>f</code> can be immediately lifted to be a local variable and generalized.
The abstracted proofs are recorded in the state.</p><p>This function is careful to track the type of <code>e</code> based on where it's used,
since the inferred type might be different.
For example, <code>(by simp : 1 &lt; [1, 2].length)</code> has <code>1 &lt; <a href="../.././Init/Prelude.html#Nat.succ">Nat.succ</a> 1</code> as the inferred type,
but from knowing it's an argument to <code>List.nthLe</code> we can deduce <code>1 &lt; [1, 2].length</code>.</p></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.abstractProofs.visit"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L231-L273">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.abstractProofs.visit"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span>.<span class="name">visit</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Core implementation of <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.abstractProofs">abstractProofs</a></code>.</p></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.abstractProofs.visitProof"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L277-L320">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.abstractProofs.visitProof"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">abstractProofs</span>.<span class="name">visitProof</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MAbs">Mathlib.Tactic.GeneralizeProofs.MAbs</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Core implementation of abstracting a proof.</p></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.initialPropToFVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L325-L333">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.initialPropToFVar"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">initialPropToFVar</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Create a mapping of all propositions in the local context to their fvars.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.initialPropToFVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L344-L369">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">withGeneralizedProofs</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(ty? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">α</span></span></div></div><p>Generalizes the proofs in the type <code>e</code> and runs <code>k</code> in a local context with these propositions.
This continuation <code>k</code> is passed</p><ol>
<li>an array of fvars for the propositions</li>
<li>an array of proof terms (extracted from <code>e</code>) that prove these propositions</li>
<li>the generalized <code>e</code>, which refers to these fvars</li>
</ol><p>The <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.GState.propToFVar">propToFVar</a></code> map is updated with the new proposition fvars.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L354-L368">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">withGeneralizedProofs</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(k : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(generalizations : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(i : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(pfs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(proofToFVar : <span class="fn"><a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(propToFVar : <span class="fn"><a href="../.././Lean/Expr.html#Lean.ExprMap">Lean.ExprMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">α</span></span></div></div><p>Core loop for <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.withGeneralizedProofs">withGeneralizedProofs</a></code>, adds generalizations one at a time.</p></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L377-L445">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofsCore</span></a></span><span class="decl_args">
<span class="fn">(g : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(rfvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(target : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Main loop for <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Lean.MVarId.generalizeProofs">Lean.MVarId.generalizeProofs</a></code>.
The <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.fvars">fvars</a></code> array is the array of fvars to generalize proofs for,
and <code>rfvars</code> is the array of fvars that have been reverted.
The <code>g</code> metavariable has all of these fvars reverted.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore">Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore</a> <span class="fn">g</span> <span class="fn">fvars</span> <span class="fn">rfvars</span> <span class="fn">target</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore.go">Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore.go</a> <span class="fn">fvars</span> <span class="fn">rfvars</span> <span class="fn">target</span> <span class="fn">g</span> <span class="fn">0</span> <span class="fn">#[]</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L383-L445">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore.go"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofsCore</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(rfvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(target : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(g : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(i : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(hs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.MGen">Mathlib.Tactic.GeneralizeProofs.MGen</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Loop for <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofsCore">generalizeProofsCore</a></code>.</p></div></div><div class="decl" id="Lean.MVarId.generalizeProofs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L463-L469">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Lean.MVarId.generalizeProofs"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">generalizeProofs</span></a></span><span class="decl_args">
<span class="fn">(g : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(target : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config">Mathlib.Tactic.GeneralizeProofs.Config</a> <span class="fn">{ <span class="fn">maxDepth</span> := <span class="fn">8</span>, <span class="fn">abstract</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">debug</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Generalize proofs in the hypotheses <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.AContext.fvars">fvars</a></code> and, if <code>target</code> is true, the target.
Returns the fvars for the generalized proofs and the new goal.</p><p>If a hypothesis is a proposition and a <code>let</code> binding, this will clear the value of the let binding.</p><p>If a hypothesis is a proposition that already appears in the local context, it will be eliminated.</p><p>Only <em>nontrivial</em> proofs are generalized. These are proofs that aren't of the form <code>f a b ...</code>
where <code>f</code> is atomic and <code>a b ...</code> are bound variables.
These sorts of proofs cannot be meaningfully generalized, and also these are the sorts of proofs
that are left in a term after generalization.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.generalizeProofs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.generalizeProofsElab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/20c73142afa995ac9c8fb80a9bb585a55ca38308/Mathlib/Tactic/GeneralizeProofs.lean#L471-L522">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.generalizeProofsElab"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">generalizeProofsElab</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p><code>generalize_proofs ids* [at locs]?</code> generalizes proofs in the current goal,
turning them into new local hypotheses.</p><ul>
<li><code>generalize_proofs</code> generalizes proofs in the target.</li>
<li><code>generalize_proofs at h₁ h₂</code> generalized proofs in hypotheses <code>h₁</code> and <code>h₂</code>.</li>
<li><code>generalize_proofs at *</code> generalizes proofs in the entire local context.</li>
<li><code>generalize_proofs pf₁ pf₂ pf₃</code> uses names <code>pf₁</code>, <code>pf₂</code>, and <code>pf₃</code> for the generalized proofs.
These can be <code>_</code> to not name proofs.</li>
</ul><p>If a proof is already present in the local context, it will use that rather than create a new
local hypothesis.</p><p>When doing <code>generalize_proofs at h</code>, if <code>h</code> is a let binding, its value is cleared,
and furthermore if <code>h</code> duplicates a preceding local hypothesis then it is eliminated.</p><p>The tactic is able to abstract proofs from under binders, creating universally quantified
proofs in the local context.
To disable this, use <code>generalize_proofs (config := { <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config.abstract">abstract</a> := false })</code>.
The tactic is also set to recursively abstract proofs from the types of the generalized proofs.
This can be controlled with the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config.maxDepth">maxDepth</a></code> configuration option,
with <code>generalize_proofs (config := { <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.Config.maxDepth">maxDepth</a> := 0 })</code> turning this feature off.</p><p>For example:</p><pre><code class="language-lean">example : List.nthLe [1, 2] 1 (by simp) = 2 := by
  -- ⊢ [1, 2].nthLe 1 ⋯ = 2
  generalize_proofs h
  -- h : 1 &lt; [1, 2].length
  -- ⊢ [1, 2].nthLe 1 h = 2
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.generalizeProofsElab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>