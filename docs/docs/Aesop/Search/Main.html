<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Aesop.Search.Main</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Aesop.Search.Main";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Aesop</span>.<span class="name">Search</span>.<span class="name">Main</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Aesop/Check.html">Aesop.Check</a></li><li><a href="../.././Aesop/Options.html">Aesop.Options</a></li><li><a href="../.././Aesop/RuleSet.html">Aesop.RuleSet</a></li><li><a href="../.././Aesop/Tree.html">Aesop.Tree</a></li><li><a href="../.././Aesop/Frontend/Attribute.html">Aesop.Frontend.Attribute</a></li><li><a href="../.././Aesop/Script/Check.html">Aesop.Script.Check</a></li><li><a href="../.././Aesop/Script/Main.html">Aesop.Script.Main</a></li><li><a href="../.././Aesop/Search/ExpandSafePrefix.html">Aesop.Search.ExpandSafePrefix</a></li><li><a href="../.././Aesop/Search/Expansion.html">Aesop.Search.Expansion</a></li><li><a href="../.././Aesop/Search/Queue.html">Aesop.Search.Queue</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Aesop.Search.Main" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Aesop.nextActiveGoal"><span class="name">Aesop</span>.<span class="name">nextActiveGoal</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.expandNextGoal"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.expandNextGoal.fmt"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span>.<span class="name">fmt</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.expandNextGoal.traceNewRapps"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span>.<span class="name">traceNewRapps</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.checkGoalLimit"><span class="name">Aesop</span>.<span class="name">checkGoalLimit</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.checkRappLimit"><span class="name">Aesop</span>.<span class="name">checkRappLimit</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.checkRootUnprovable"><span class="name">Aesop</span>.<span class="name">checkRootUnprovable</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.getProof?"><span class="name">Aesop</span>.<span class="name">getProof?</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.finalizeProof"><span class="name">Aesop</span>.<span class="name">finalizeProof</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.traceScript"><span class="name">Aesop</span>.<span class="name">traceScript</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.traceTree"><span class="name">Aesop</span>.<span class="name">traceTree</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.finishIfProven"><span class="name">Aesop</span>.<span class="name">finishIfProven</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.treeHasProgress"><span class="name">Aesop</span>.<span class="name">treeHasProgress</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.throwAesopEx"><span class="name">Aesop</span>.<span class="name">throwAesopEx</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.handleNonfatalError"><span class="name">Aesop</span>.<span class="name">handleNonfatalError</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.searchLoop"><span class="name">Aesop</span>.<span class="name">searchLoop</span></a></div><div class="nav_link"><a class="break_within" href="#Aesop.search"><span class="name">Aesop</span>.<span class="name">search</span></a></div></nav><main>
<div class="decl" id="Aesop.nextActiveGoal"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L27-L33">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.nextActiveGoal"><span class="name">Aesop</span>.<span class="name">nextActiveGoal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Aesop/Tree/Data.html#Aesop.GoalRef">Aesop.GoalRef</a></span></div></div></div></div><div class="decl" id="Aesop.expandNextGoal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L35-L83">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.expandNextGoal"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.expandNextGoal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.expandNextGoal.fmt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L60-L66">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.expandNextGoal.fmt"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span>.<span class="name">fmt</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(id : <a href="../.././Aesop/Tree/Data.html#Aesop.GoalId">Aesop.GoalId</a>)</span></span>
<span class="decl_args">
<span class="fn">(priority : <a href="../.././Aesop/Percent.html#Aesop.Percent">Aesop.Percent</a>)</span></span>
<span class="decl_args">
<span class="fn">(initialGoal : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(initialMetaState : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.SavedState">Lean.Meta.SavedState</a>)</span></span>
<span class="decl_args">
<span class="fn">(result : <span class="fn"><a href="../.././Init/Prelude.html#Except">Except</a> <a href="../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a> <a href="../.././Aesop/Search/Expansion.html#Aesop.RuleResult">Aesop.RuleResult</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.expandNextGoal.fmt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.expandNextGoal.traceNewRapps"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L68-L83">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.expandNextGoal.traceNewRapps"><span class="name">Aesop</span>.<span class="name">expandNextGoal</span>.<span class="name">traceNewRapps</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(newRapps : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Aesop/Tree/Data.html#Aesop.RappRef">Aesop.RappRef</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.expandNextGoal.traceNewRapps" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.checkGoalLimit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L85-L90">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.checkGoalLimit"><span class="name">Aesop</span>.<span class="name">checkGoalLimit</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.checkGoalLimit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.checkRappLimit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L92-L97">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.checkRappLimit"><span class="name">Aesop</span>.<span class="name">checkRappLimit</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.checkRappLimit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.checkRootUnprovable"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L99-L108">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.checkRootUnprovable"><span class="name">Aesop</span>.<span class="name">checkRootUnprovable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.checkRootUnprovable" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.getProof?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L110-L111">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.getProof?"><span class="name">Aesop</span>.<span class="name">getProof?</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Aesop.getProof?</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <a href="../.././Aesop/Tree/TreeM.html#Aesop.getRootMVarId">Aesop.getRootMVarId</a></span>
  <span class="fn"><a href="../.././Lean/MetavarContext.html#Lean.getExprMVarAssignment?">Lean.getExprMVarAssignment?</a> <span class="fn">__do_lift</span></span></span></span></li></ul></details><details id="instances-for-list-Aesop.getProof?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.finalizeProof"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L116-L126">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.finalizeProof"><span class="name">Aesop</span>.<span class="name">finalizeProof</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.finalizeProof" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.traceScript"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L128-L141">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.traceScript"><span class="name">Aesop</span>.<span class="name">traceScript</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(completeProof : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.traceScript" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.traceTree"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L143-L144">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.traceTree"><span class="name">Aesop</span>.<span class="name">traceTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Aesop.traceTree</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <a href="../.././Aesop/Tree/TreeM.html#Aesop.getRootGoal">Aesop.getRootGoal</a></span>
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn">__do_lift</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.traceTree</span> <a href="../.././Aesop/Tracing.html#Aesop.TraceOption.tree">Aesop.TraceOption.tree</a>)</span></span></span></span></li></ul></details><details id="instances-for-list-Aesop.traceTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.finishIfProven"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L146-L152">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.finishIfProven"><span class="name">Aesop</span>.<span class="name">finishIfProven</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.finishIfProven" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.treeHasProgress"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L166-L187">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.treeHasProgress"><span class="name">Aesop</span>.<span class="name">treeHasProgress</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Tree/TreeM.html#Aesop.TreeM">Aesop.TreeM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>This function detects whether the search has made progress, meaning that the
remaining goals after safe prefix expansion are different from the initial goal.
We approximate this by checking whether, after safe prefix expansion, either
of the following statements is true.</p><ul>
<li>There is a safe rapp.</li>
<li>A subgoal of the preprocessing rule has been modified during normalisation.</li>
</ul><p>This is an approximation because a safe rule could, in principle, leave the
initial goal unchanged.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.treeHasProgress" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.throwAesopEx"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L189-L212">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.throwAesopEx"><span class="name">Aesop</span>.<span class="name">throwAesopEx</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(remainingSafeGoals : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(safePrefixExpansionSuccess : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.throwAesopEx" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.handleNonfatalError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L227-L247">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.handleNonfatalError"><span class="name">Aesop</span>.<span class="name">handleNonfatalError</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(err : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.handleNonfatalError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Aesop.searchLoop"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L249-L264">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.searchLoop"><span class="name">Aesop</span>.<span class="name">searchLoop</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{Q : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Aesop/Search/Queue/Class.html#Aesop.Queue">Aesop.Queue</a> <span class="fn">Q</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Aesop/Search/SearchM.html#Aesop.SearchM">Aesop.SearchM</a> <span class="fn">Q</span> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div></div></div><div class="decl" id="Aesop.search"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/aesop/blob/deb279eb7be16848d0bc8387f80d6e41bcdbe738/Aesop/Search/Main.lean#L266-L284">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Aesop/Search/Main.html#Aesop.search"><span class="name">Aesop</span>.<span class="name">search</span></a></span><span class="decl_args">
<span class="fn">(goal : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(ruleSet? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Aesop/RuleSet.html#Aesop.LocalRuleSet">Aesop.LocalRuleSet</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(options : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Aesop/Options/Public.html#Aesop.Options">Aesop.Options</a>
  <span class="fn">{ <span class="fn">strategy</span> := <a href="../.././Aesop/Options/Public.html#Aesop.Strategy.bestFirst">Aesop.Strategy.bestFirst</a>, <span class="fn">maxRuleApplicationDepth</span> := <span class="fn">30</span>, <span class="fn">maxRuleApplications</span> := <span class="fn">200</span>, <span class="fn">maxGoals</span> := <span class="fn">0</span>,
    <span class="fn">maxNormIterations</span> := <span class="fn">100</span>, <span class="fn">maxSafePrefixRuleApplications</span> := <span class="fn">50</span>, <span class="fn">maxRuleHeartbeats</span> := <span class="fn">0</span>, <span class="fn">maxSimpHeartbeats</span> := <span class="fn">0</span>,
    <span class="fn">maxUnfoldHeartbeats</span> := <span class="fn">0</span>, <span class="fn">applyHypsTransparency</span> := <a href="../.././Init/MetaTypes.html#Lean.Meta.TransparencyMode.default">Lean.Meta.TransparencyMode.default</a>,
    <span class="fn">assumptionTransparency</span> := <a href="../.././Init/MetaTypes.html#Lean.Meta.TransparencyMode.default">Lean.Meta.TransparencyMode.default</a>,
    <span class="fn">destructProductsTransparency</span> := <a href="../.././Init/MetaTypes.html#Lean.Meta.TransparencyMode.reducible">Lean.Meta.TransparencyMode.reducible</a>, <span class="fn">introsTransparency?</span> := <span class="fn">none</span>,
    <span class="fn">terminal</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">warnOnNonterminal</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">traceScript</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">enableSimp</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">useSimpAll</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">useDefaultSimpSet</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">enableUnfold</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(simpConfig : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/MetaTypes.html#Lean.Meta.Simp.Config">Lean.Meta.Simp.Config</a>
  <span class="fn">{ <span class="fn">maxSteps</span> := <a href="../.././Init/MetaTypes.html#Lean.Meta.Simp.defaultMaxSteps">Lean.Meta.Simp.defaultMaxSteps</a>, <span class="fn">maxDischargeDepth</span> := <span class="fn">2</span>, <span class="fn">contextual</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">memoize</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">singlePass</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">zeta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">eta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">etaStruct</span> := <a href="../.././Init/MetaTypes.html#Lean.Meta.EtaStructMode.all">Lean.Meta.EtaStructMode.all</a>,
    <span class="fn">iota</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">decide</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">arith</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">autoUnfold</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">dsimp</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">failIfUnchanged</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">ground</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">unfoldPartialApp</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">zetaDelta</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">index</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">implicitDefEqProofs</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(simpConfigSyntax? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(stats : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Aesop/Stats/Basic.html#Aesop.Stats">Aesop.Stats</a> <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Aesop/Stats/Basic.html#Aesop.Stats">Aesop.Stats</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Aesop.search" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>