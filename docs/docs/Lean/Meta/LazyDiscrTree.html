<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.LazyDiscrTree</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Meta.LazyDiscrTree";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lean/Meta/CompletionName.html">Lean.Meta.CompletionName</a></li><li><a href="../.././Lean/Meta/DiscrTree.html">Lean.Meta.DiscrTree</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.LazyDiscrTree" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Key"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instBEqKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instReprKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instReprKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span>.<span class="name">hash</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Key.instHashable"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span>.<span class="name">instHashable</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instEmptyCollectionTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabited"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabited</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.patternPath"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">patternPath</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.targetPath"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">targetPath</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.dropKeyAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKeyAux</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.dropKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchResult.size"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">size</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchResult.appendResultsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">appendResultsAux</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.MatchResult.appendResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">appendResults</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.PartialMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PartialMatch</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedPartialMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPartialMatch</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.getMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getMatch</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPreDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">append</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">instAppendPreDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">fromExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">mkSubEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Cache"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.Cache.empty"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span>.<span class="name">empty</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.blacklistInsertion"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">blacklistInsertion</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedInitResults</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitResults.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">append</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">instAppendInitResults</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.getChildNgen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getChildNgen</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createLocalPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createLocalPreDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.dropKeys"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKeys</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.logImportFailure"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">logImportFailure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createImportedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createImportedDiscrTree.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedDiscrTree</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.findImportMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findImportMatches</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">ModuleDiscrTreeRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createModuleDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createModuleDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.createModuleTreeRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createModuleTreeRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.findModuleMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findModuleMatches</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.findMatchesExt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findMatchesExt</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.LazyDiscrTree.findMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findMatches</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Lazy-Discrimination-Tree">Lazy Discrimination Tree <a class="hover-link" href="#Lazy-Discrimination-Tree">#</a></h1><p>This file defines a new type of discrimination tree optimized for rapid
population of imported modules for use in tactics.  It uses a lazy
initialization strategy.</p><p>The discrimination tree can be created through
<code>createImportedEnvironment</code>. This creates a discrimination tree from all
imported modules in an environment using a callback that provides the
entries as <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">InitEntry</a></code> values.</p><p>The function <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.getMatch">getMatch</a></code> can be used to get the values that match the
expression as well as an updated lazy discrimination tree that has
elaborated additional parts of the tree.</p></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Key"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L31-L39">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Discrimination tree key.</p><ul class="constructors"><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.const">const: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></span></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.fvar">fvar: <span class="fn"><a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></span></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.lit">lit: <span class="fn"><a href="../.././Lean/Expr.html#Lean.Literal">Lean.Literal</a> → <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.star">star: <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.other">other: <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.arrow">arrow: <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></li><li class="constructor" id="Lean.Meta.LazyDiscrTree.Key.proj">proj: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></span></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Key" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L39-L39">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedKey">Lean.Meta.LazyDiscrTree.instInhabitedKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key.const">Lean.Meta.LazyDiscrTree.Key.const</a> <span class="fn">default</span> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instBEqKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L39-L39">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instBEqKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instBEqKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#BEq">BEq</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instBEqKey">Lean.Meta.LazyDiscrTree.instBEqKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.beqKey._@.Lean.Meta.LazyDiscrTree._hyg.100">Lean.Meta.LazyDiscrTree.beqKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instReprKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L39-L39">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instReprKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instReprKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instReprKey">Lean.Meta.LazyDiscrTree.instReprKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.reprKey._@.Lean.Meta.LazyDiscrTree._hyg.354">Lean.Meta.LazyDiscrTree.reprKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Key.hash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L44-L51">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key.hash"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span>.<span class="name">hash</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a> → <a href="../.././Init/Prelude.html#UInt64">UInt64</a></span></div></div><p>Hash function</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Key.hash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Key.instHashable"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L53-L53">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key.instHashable"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Key</span>.<span class="name">instHashable</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key.instHashable">Lean.Meta.LazyDiscrTree.Key.instHashable</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">hash</span> := <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key.hash">Lean.Meta.LazyDiscrTree.Key.hash</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L292-L292">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">{<span class="fn">a</span> : <a href="../.././foundational_types.html">Type</a>} → <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">a</span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedTrie</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">values</span> := <span class="fn">default</span>, <span class="fn">star</span> := <span class="fn">default</span>, <span class="fn">children</span> := <span class="fn">default</span>, <span class="fn">pending</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L294-L294">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instEmptyCollectionTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Core.html#EmptyCollection">EmptyCollection</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instEmptyCollectionTrie</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">emptyCollection</span> := <span class="fn">{ <span class="fn">values</span> := <span class="fn">#[]</span>, <span class="fn">star</span> := <span class="fn">0</span>, <span class="fn">children</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">pending</span> := <span class="fn">#[]</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L315-L321">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p><code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">LazyDiscrTree</a></code> is a variant of the discriminator tree datatype
<code>DiscrTree</code> in Lean core that is designed to be efficiently
initializable with a large number of patterns.  This is useful
in contexts such as searching an entire Lean environment for
expressions that match a pattern.</p><p>Lazy discriminator trees achieve good performance by minimizing
the amount of work that is done up front to build the discriminator
tree.  When first adding patterns to the tree, only the root
discriminator key is computed and processing the remaining
terms is deferred until demanded by a match.</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.mk"><li id="Lean.Meta.LazyDiscrTree.config" class="structure_field"><div class="structure_field_info">config : <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a></div><div class="structure_field_doc"><p>Configuration for normalization.</p></div></li><li id="Lean.Meta.LazyDiscrTree.tries" class="structure_field"><div class="structure_field_info">tries : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.Trie">Lean.Meta.LazyDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div><div class="structure_field_doc"><p>Backing array of trie entries.  Should be owned by this trie.</p></div></li><li id="Lean.Meta.LazyDiscrTree.roots" class="structure_field"><div class="structure_field_info">roots : <span class="fn"><a href="../.././Lean/Data/HashMap.html#Lean.HashMap">Lean.HashMap</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.TrieIndex">Lean.Meta.LazyDiscrTree.TrieIndex</a></span></div><div class="structure_field_doc"><p>Map from discriminator trie roots to the index.</p></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabited"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L327-L328">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabited"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabited</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.patternPath"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L410-L413">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.patternPath"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">patternPath</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span></span></div></div><p>Create a key path from an expression using the function used for patterns.</p><p>This differs from Lean.Meta.DiscrTree.mkPath and targetPath in that the expression
should uses free variables rather than meta-variables for holes.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.patternPath" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.targetPath"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L420-L425">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.targetPath"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">targetPath</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span></span></div></div><p>Create a key path from an expression we are matching against.</p><p>This should have mvars instantiated where feasible.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.targetPath" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.dropKeyAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L501-L512">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.dropKeyAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKeyAux</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(next : <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.TrieIndex">Lean.Meta.LazyDiscrTree.TrieIndex</a>)</span></span>
<span class="decl_args">
<span class="fn">(rest : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.MatchM">Lean.Meta.LazyDiscrTree.MatchM</a> <span class="fn">α</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.dropKeyAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.dropKey"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L518-L523">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.dropKey"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKey</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(path : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><p>This drops a specific key from the lazy discrimination tree so that
all the entries matching that key exactly are removed.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.dropKey" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchResult"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L530-L541">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>A match result contains the terms formed from matching a term against
patterns in the discrimination tree.</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.MatchResult.mk"><li id="Lean.Meta.LazyDiscrTree.MatchResult.elts" class="structure_field"><div class="structure_field_info">elts : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span>)</span>)</span></span></div><div class="structure_field_doc"><p>The elements in the match result.</p><p>The top-level array represents an array from <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PartialMatch.score">score</a></code> values to the
results with that score. A <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PartialMatch.score">score</a></code> is the number of non-star matches
in a pattern against the term, and thus bounded by the size of the
term being matched against.  The elements of this array are themselves
arrays of non-empty arrays so that we can defer concatenating results until
needed.</p></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.MatchResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchResult.size"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L562-L563">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult.size"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">size</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(mr : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Nat">Nat</a></div></div><p>Number of elements in result</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mr</span>.size</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Data/Array/Basic.html#Array.foldl">Array.foldl</a> <span class="fn">(fun (<span class="fn">i</span> : <a href="../.././Init/Prelude.html#Nat">Nat</a>) (<span class="fn">a</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span>)</span></span>) =&gt; <span class="fn"><a href="../.././Init/Data/Array/Basic.html#Array.foldl">Array.foldl</a> <span class="fn">(fun (<span class="fn">n</span> : <a href="../.././Init/Prelude.html#Nat">Nat</a>) (<span class="fn">a</span> : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>) =&gt; <span class="fn"><span class="fn">n</span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn">a</span>.size</span></span>)</span> <span class="fn">i</span> <span class="fn">a</span></span>)</span> <span class="fn">0</span>
    <span class="fn"><span class="fn">mr</span>.elts</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.MatchResult.size" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchResult.appendResultsAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L569-L575">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult.appendResultsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">appendResultsAux</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args">
<span class="fn">(mr : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(a : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <span class="fn"><span class="fn">α</span> → <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span></span></div></div><p>Append results to array</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.MatchResult.appendResultsAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.MatchResult.appendResults"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L577-L578">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult.appendResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">MatchResult</span>.<span class="name">appendResults</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(mr : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(a : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">mr</span>.appendResults</span> <span class="fn">a</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">mr</span>.appendResultsAux</span> <span class="fn">a</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Init/Prelude.html#Nat">Nat</a>) (<span class="fn">a</span> : <span class="fn">α</span>) =&gt; <span class="fn">a</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.MatchResult.appendResults" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.PartialMatch"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L590-L597">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PartialMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PartialMatch</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.PartialMatch.mk"><li id="Lean.Meta.LazyDiscrTree.PartialMatch.todo" class="structure_field"><div class="structure_field_info">todo : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li><li id="Lean.Meta.LazyDiscrTree.PartialMatch.score" class="structure_field"><div class="structure_field_info">score : <a href="../.././Init/Prelude.html#Nat">Nat</a></div></li><li id="Lean.Meta.LazyDiscrTree.PartialMatch.c" class="structure_field"><div class="structure_field_info">c : <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.TrieIndex">Lean.Meta.LazyDiscrTree.TrieIndex</a></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.PartialMatch" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedPartialMatch"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L597-L597">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedPartialMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPartialMatch</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PartialMatch">Lean.Meta.LazyDiscrTree.PartialMatch</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedPartialMatch">Lean.Meta.LazyDiscrTree.instInhabitedPartialMatch</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">todo</span> := <span class="fn">default</span>, <span class="fn">score</span> := <span class="fn">default</span>, <span class="fn">c</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.getMatch"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L695-L696">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.getMatch"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getMatch</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span></span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span></div></div><p>Find values that match <code>e</code> in <code>d</code>.</p><p>The results are ordered so that the longest matches in terms of number of
non-star keys are first with ties going to earlier operators first.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">d</span>.getMatch</span> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.withReducible">Lean.Meta.withReducible</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.runMatch">Lean.Meta.LazyDiscrTree.runMatch</a> <span class="fn">d</span> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.getMatchCore">Lean.Meta.LazyDiscrTree.getMatchCore</a> <span class="fn"><span class="fn">d</span>.roots</span> <span class="fn">e</span>)</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.getMatch" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L707-L707">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedPreDiscrTree</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">{<span class="fn">a</span> : <a href="../.././foundational_types.html">Type</a>} → <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">a</span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedPreDiscrTree</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">roots</span> := <span class="fn">default</span>, <span class="fn">tries</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L733-L740">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PreDiscrTree.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">append</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(y : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span></span></div></div><p>Merge two discrimination trees.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.PreDiscrTree.append" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L742-L743">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">PreDiscrTree</span>.<span class="name">instAppendPreDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Append">Append</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.PreDiscrTree.instAppendPreDiscrTree</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">append</span> := <span class="fn">Lean.Meta.LazyDiscrTree.PreDiscrTree.append</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L748-L752">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Initial entry in lazy discrimination tree</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.InitEntry.mk"><li id="Lean.Meta.LazyDiscrTree.InitEntry.key" class="structure_field"><div class="structure_field_info">key : <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></div><div class="structure_field_doc"><p>Return root key for an entry.</p></div></li><li id="Lean.Meta.LazyDiscrTree.InitEntry.entry" class="structure_field"><div class="structure_field_info">entry : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.LazyEntry">Lean.Meta.LazyDiscrTree.LazyEntry</a> <span class="fn">α</span></span></div><div class="structure_field_doc"><p>Returns rest of entry for later insertion.</p></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L759-L764">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">fromExpr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(expr : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(value : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(config : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>
  <span class="fn">{ <span class="fn">iota</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span></span></div></div><p>Constructs an initial entry from an expression and value.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry.fromExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L772-L776">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitEntry</span>.<span class="name">mkSubEntry</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(idx : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(value : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(config : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>
  <span class="fn">{ <span class="fn">iota</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span></span></div></div><p>Creates an entry for a subterm of an initial entry.</p><p>This is slightly more efficient than using <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry.fromExpr">fromExpr</a></code> on subterms since it avoids a redundant call
to <code>whnf</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitEntry.mkSubEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Cache"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L797-L800">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.Cache.mk"><li id="Lean.Meta.LazyDiscrTree.Cache.ngen" class="structure_field"><div class="structure_field_info">ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a></div></li><li id="Lean.Meta.LazyDiscrTree.Cache.core" class="structure_field"><div class="structure_field_info">core : <a href="../.././Lean/CoreM.html#Lean.Core.Cache">Lean.Core.Cache</a></div></li><li id="Lean.Meta.LazyDiscrTree.Cache.meta" class="structure_field"><div class="structure_field_info">meta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.Cache">Lean.Meta.Cache</a></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Cache" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.Cache.empty"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L802-L802">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache.empty"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">Cache</span>.<span class="name">empty</span></a></span><span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Cache">Lean.Meta.LazyDiscrTree.Cache</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.Cache.empty" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.blacklistInsertion"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L804-L809">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.blacklistInsertion"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">blacklistInsertion</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(declName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.blacklistInsertion" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L849-L850">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.instInhabitedInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">instInhabitedInitResults</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.instInhabitedInitResults</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">tree</span> := <span class="fn">{ <span class="fn">roots</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">tries</span> := <span class="fn">#[]</span> }</span>, <span class="fn">errors</span> := <span class="fn">#[]</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitResults.append"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L855-L858">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitResults.append"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">append</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(y : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span></span></div></div><p>Combine two initial results.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitResults.append">Lean.Meta.LazyDiscrTree.InitResults.append</a> <span class="fn">x</span> <span class="fn">y</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn">{ <span class="fn">tree</span> := <span class="fn">xv</span>, <span class="fn">errors</span> := <span class="fn">xe</span> }</span> =&gt;
    <span class="fn">match <span class="fn">y</span> with
    | <span class="fn">{ <span class="fn">tree</span> := <span class="fn">yv</span>, <span class="fn">errors</span> := <span class="fn">ye</span> }</span> =&gt; <span class="fn">{ <span class="fn">tree</span> := <span class="fn"><span class="fn">xv</span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">yv</span></span>, <span class="fn">errors</span> := <span class="fn"><span class="fn">xe</span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">ye</span></span> }</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.InitResults.append" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L860-L861">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">InitResults</span>.<span class="name">instAppendInitResults</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Append">Append</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.InitResults.instAppendInitResults</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">append</span> := <span class="fn">Lean.Meta.LazyDiscrTree.InitResults.append</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.getChildNgen"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L907-L911">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.getChildNgen"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">getChildNgen</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{M : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">M</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Meta.html#Lean.MonadNameGenerator">Lean.MonadNameGenerator</a> <span class="fn">M</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">M</span> <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Meta.LazyDiscrTree.getChildNgen</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">ngen</span> ← <span class="fn">Lean.getNGen</span>
  <span class="fn">match <span class="fn"><span class="fn">ngen</span>.mkChild</span> with
    | <span class="fn">(<span class="fn">cngen</span>, <span class="fn">ngen</span>)</span> =&gt; <span class="fn">do
      <span class="fn"><a href="../.././Init/Meta.html#Lean.MonadNameGenerator.setNGen">Lean.setNGen</a> <span class="fn">ngen</span></span>
      <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">cngen</span></span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.getChildNgen" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createLocalPreDiscrTree"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L913-L925">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createLocalPreDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createLocalPreDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(cctx : <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(d : <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.ImportData">Lean.Meta.LazyDiscrTree.ImportData</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.PreDiscrTree">Lean.Meta.LazyDiscrTree.PreDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createLocalPreDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.dropKeys"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L927-L928">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.dropKeys"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">dropKeys</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(keys : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">t</span>.dropKeys</span> <span class="fn">keys</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Data/List/Control.html#List.foldlM">List.foldlM</a> <span class="fn">(fun (<span class="fn">x</span> : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span></span>) (<span class="fn">x_1</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">x</span>.dropKey</span> <span class="fn">x_1</span></span>)</span> <span class="fn">t</span> <span class="fn">keys</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.dropKeys" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.logImportFailure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L930-L931">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.logImportFailure"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">logImportFailure</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">Lean.MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Message.html#Lean.AddMessageContext">Lean.AddMessageContext</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(f : <a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.ImportFailure">Lean.Meta.LazyDiscrTree.ImportFailure</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.logImportFailure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createImportedDiscrTree"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L934-L963">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createImportedDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Log.html#Lean.MonadLog">Lean.MonadLog</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Message.html#Lean.AddMessageContext">Lean.AddMessageContext</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(cctx : <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><p>Create a discriminator tree for imported environment.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createImportedDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createImportedDiscrTree.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L942-L958">source</a></div><div class="attributes">@[irreducible]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createImportedDiscrTree.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createImportedDiscrTree</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#BaseIO">BaseIO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(cctx : <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(ngen : <a href="../.././Init/MetaTypes.html#Lean.NameGenerator">Lean.NameGenerator</a>)</span></span>
<span class="decl_args">
<span class="fn">(tasks : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Core.html#Task">Task</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span>)</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(start : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(cnt : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(idx : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Init/Core.html#Task">Task</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#_private.Lean.Meta.LazyDiscrTree.0.Lean.Meta.LazyDiscrTree.InitResults">Lean.Meta.LazyDiscrTree.InitResults</a> <span class="fn">α</span>)</span>)</span>)</span></span></div></div><p>Allocate constants to tasks according to <code>constantsPerTask</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createImportedDiscrTree.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.findImportMatches"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L976-L995">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findImportMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findImportMatches</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(ext : <span class="fn"><a href="../.././Lean/Environment.html#Lean.EnvExtension">Lean.EnvExtension</a> <span class="fn">(<a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span>)</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(addEntry : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(droppedKeys : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span>)</span> <span class="fn">[]</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.findImportMatches" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1004-L1005">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">ModuleDiscrTreeRef</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>A discriminator tree for the current module's declarations only.</p><p>Note. We use different discriminator trees for imported and current module
declarations since imported declarations are typically much more numerous but
not changed after the environment is created.</p><ul class="structure_fields" id="Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef.mk"><li id="Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef.ref" class="structure_field"><div class="structure_field_info">ref : <span class="fn"><a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></li></ul><details id="instances-for-list-Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createModuleDiscrTree"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1008-L1017">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createModuleDiscrTree"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createModuleDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(entriesForConst : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><p>Create a discriminator tree for current module declarations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createModuleDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.createModuleTreeRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1022-L1027">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.createModuleTreeRef"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">createModuleTreeRef</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(entriesForConst : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(droppedKeys : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef">Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef</a> <span class="fn">α</span>)</span></span></div></div><p>Creates reference for lazy discriminator tree that only contains this module's definitions.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.createModuleTreeRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.findModuleMatches"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1035-L1040">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findModuleMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findModuleMatches</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(moduleRef : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef">Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.MatchResult">Lean.Meta.LazyDiscrTree.MatchResult</a> <span class="fn">α</span>)</span></span></div></div><p>Returns candidates from this module in this module that match the expression.</p><ul>
<li><code>moduleRef</code> is a references to a lazy discriminator tree only containing
this module's definitions.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.findModuleMatches" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.findMatchesExt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1060-L1072">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findMatchesExt"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findMatchesExt</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(moduleTreeRef : <span class="fn"><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef">Lean.Meta.LazyDiscrTree.ModuleDiscrTreeRef</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ext : <span class="fn"><a href="../.././Lean/Environment.html#Lean.EnvExtension">Lean.EnvExtension</a> <span class="fn">(<a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span>)</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(addEntry : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(droppedKeys : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span>)</span> <span class="fn">[]</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(adjustResult : <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <span class="fn"><span class="fn">α</span> → <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span>)</span></span></div></div><p><code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findMatchesExt">findMatchesExt</a></code> searches for entries in a lazily initialized discriminator tree.</p><p>It provides some additional capabilities beyond <code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findMatches">findMatches</a></code> to adjust results
based on priority and cache module declarations</p><ul>
<li><code>modulesTreeRef</code> points to the discriminator tree for local environment.
Used for caching and created by <code>createLocalTree</code>.</li>
<li><code>ext</code> should be an environment extension with an IO.Ref for caching the import lazy
discriminator tree.</li>
<li><code>addEntry</code> is the function for creating discriminator tree entries from constants.</li>
<li><code>droppedKeys</code> contains keys we do not want to consider when searching for matches.
It is used for dropping very general keys.</li>
<li><code>constantsPerTask</code> stores number of constants in imported modules used to
decide when to create new task.</li>
<li><code>adjustResult</code> takes the priority and value to produce a final result.</li>
<li><code>ty</code> is the expression type.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.findMatchesExt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.LazyDiscrTree.findMatches"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/LazyDiscrTree.lean#L1083-L1091">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findMatches"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">LazyDiscrTree</span>.<span class="name">findMatches</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(ext : <span class="fn"><a href="../.././Lean/Environment.html#Lean.EnvExtension">Lean.EnvExtension</a> <span class="fn">(<a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree">Lean.Meta.LazyDiscrTree</a> <span class="fn">α</span>)</span>)</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(addEntry : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <span class="fn"><a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a> → <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.InitEntry">Lean.Meta.LazyDiscrTree.InitEntry</a> <span class="fn">α</span>)</span>)</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(droppedKeys : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.Key">Lean.Meta.LazyDiscrTree.Key</a>)</span>)</span> <span class="fn">[]</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(constantsPerTask : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ty : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span>)</span></span></div></div><p><code><a href="../.././Lean/Meta/LazyDiscrTree.html#Lean.Meta.LazyDiscrTree.findMatches">findMatches</a></code> searches for entries in a lazily initialized discriminator tree.</p><ul>
<li><code>ext</code> should be an environment extension with an IO.Ref for caching the import lazy
discriminator tree.</li>
<li><code>addEntry</code> is the function for creating discriminator tree entries from constants.</li>
<li><code>droppedKeys</code> contains keys we do not want to consider when searching for matches.
It is used for dropping very general keys.</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.LazyDiscrTree.findMatches" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>