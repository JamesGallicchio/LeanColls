<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Meta.Tactic.Apply</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Lean.Meta.Tactic.Apply";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">Tactic</span>.<span class="name">Apply</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Lean/PrettyPrinter.html">Lean.PrettyPrinter</a></li><li><a href="../../.././Lean/Meta/CollectMVars.html">Lean.Meta.CollectMVars</a></li><li><a href="../../.././Lean/Meta/SynthInstance.html">Lean.Meta.SynthInstance</a></li><li><a href="../../.././Lean/Util/FindMVar.html">Lean.Util.FindMVar</a></li><li><a href="../../.././Lean/Meta/Tactic/Util.html">Lean.Meta.Tactic.Util</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Meta.Tactic.Apply" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.getExpectedNumArgsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getExpectedNumArgsAux</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.getExpectedNumArgs"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getExpectedNumArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthAppInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthAppInstances</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.synthAppInstances.step"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthAppInstances</span>.<span class="name">step</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.appendParentTag"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">appendParentTag</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.postprocessAppMVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">postprocessAppMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.apply"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">apply</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.apply.go"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">apply</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.applyConst"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">applyConst</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.splitAndCore"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAndCore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.splitAndCore.go"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAndCore</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.splitAnd"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAnd</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.splitAnd"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">splitAnd</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.exfalso"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">exfalso</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.nthConstructor"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">nthConstructor</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.iffOfEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">iffOfEq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.propext"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">propext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.proofIrrelHeq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">proofIrrelHeq</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.MVarId.subsingletonElim"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">subsingletonElim</span></a></div></nav><main>
<div class="decl" id="Lean.Meta.getExpectedNumArgsAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L18-L20">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.getExpectedNumArgsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getExpectedNumArgsAux</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Nat">Nat</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span></div></div><p>Compute the number of expected arguments and whether the result type is of the form
(?m ...) where ?m is an unassigned metavariable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.getExpectedNumArgsAux">Lean.Meta.getExpectedNumArgsAux</a> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.withDefault">Lean.Meta.withDefault</a>
    <span class="fn">(<a href="../../.././Lean/Meta/Basic.html#Lean.Meta.forallTelescopeReducing">Lean.Meta.forallTelescopeReducing</a> <span class="fn">e</span> <span class="fn">fun (<span class="fn">xs</span> : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>) (<span class="fn">body</span> : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>) =&gt;
      <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">xs</span>.size</span>, <span class="fn"><span class="fn"><span class="fn">body</span>.getAppFn</span>.isMVar</span>)</span></span></span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.getExpectedNumArgsAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.getExpectedNumArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L22-L24">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.getExpectedNumArgs"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">getExpectedNumArgs</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.getExpectedNumArgs">Lean.Meta.getExpectedNumArgs</a> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__discr</span> ← <span class="fn"><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.getExpectedNumArgsAux">Lean.Meta.getExpectedNumArgsAux</a> <span class="fn">e</span></span>
  <span class="fn">match <span class="fn">__discr</span> with
    | <span class="fn">(<span class="fn">numArgs</span>, <span class="fn">snd</span>)</span> =&gt; <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">numArgs</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Meta.getExpectedNumArgs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.synthAppInstances"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L32-L98">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.synthAppInstances"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthAppInstances</span></a></span><span class="decl_args">
<span class="fn">(tacticName : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvarsNew : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(binderInfos : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(synthAssignedInstances : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(allowSynthFailures : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.synthAppInstances" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.synthAppInstances.step"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L65-L98">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.synthAppInstances.step"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">synthAppInstances</span>.<span class="name">step</span></a></span><span class="decl_args">
<span class="fn">(tacticName : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(allowSynthFailures : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvars : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Try to synthesize instances for the metavariables <code>mvars</code>.
Returns metavariables that still need to be synthesized.
We can view the resulting array as the set of metavariables that we should try again.
This is needed when applying or rewriting with functions with complex instances.
For example, consider <code>rw [@map_smul]</code> where <code>map_smul</code> is</p><pre><code>map_smul {F : Type u_1} {M : Type u_2} {N : Type u_3} {φ : M → N}
         {X : Type u_4} {Y : Type u_5}
         [SMul M X] [SMul N Y] [FunLike F X Y] [MulActionSemiHomClass F φ X Y]
         (f : F) (c : M) (x : X) : DFunLike.coe f (c • x) = φ c • DFunLike.coe f x
</code></pre><p>and <code>MulActionSemiHomClass</code> is defined as</p><pre><code>class MulActionSemiHomClass (F : Type _)
   {M N : <a href="../../.././Init/Prelude.html#outParam">outParam</a> (Type _)} (φ : <a href="../../.././Init/Prelude.html#outParam">outParam</a> (M → N))
   (X Y : <a href="../../.././Init/Prelude.html#outParam">outParam</a> (Type _)) [SMul M X] [SMul N Y] [FunLike F X Y] : Prop where
</code></pre><p>The left-hand-side of the equation does not bind <code>N</code>. Thus, <code>SMul N Y</code> cannot
be synthesized until we synthesize <code>MulActionSemiHomClass F φ X Y</code>. Note that
<code>N</code> is an output parameter for <code>MulActionSemiHomClass</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.synthAppInstances.step" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.appendParentTag"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L100-L112">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.appendParentTag"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">appendParentTag</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(newMVars : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(binderInfos : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.appendParentTag" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.postprocessAppMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L119-L123">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.postprocessAppMVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">postprocessAppMVars</span></a></span><span class="decl_args">
<span class="fn">(tacticName : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(newMVars : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(binderInfos : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(synthAssignedInstances : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(allowSynthFailures : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>If <code>synthAssignedInstances</code> is <code>true</code>, then <code><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.apply">apply</a></code> will synthesize instance implicit arguments
even if they have assigned by <code>isDefEq</code>, and then check whether the synthesized value matches the
one inferred. The <code><a href="../../.././Init/Prelude.html#congr">congr</a></code> tactic sets this flag to false.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.postprocessAppMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.apply"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L162-L217">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.apply"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">apply</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(cfg : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Meta.html#Lean.Meta.ApplyConfig">Lean.Meta.ApplyConfig</a>
  <span class="fn">{ <span class="fn">newGoals</span> := <a href="../../.././Init/Meta.html#Lean.Meta.ApplyNewGoals.nonDependentFirst">Lean.Meta.ApplyNewGoals.nonDependentFirst</a>, <span class="fn">synthAssignedInstances</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">allowSynthFailures</span> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">approx</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Close the given goal using <code><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.apply">apply</a> e</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.apply" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.apply.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L194-L205">source</a></div><div class="attributes">@[irreducible]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.apply.go"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">apply</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(cfg : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Meta.html#Lean.Meta.ApplyConfig">Lean.Meta.ApplyConfig</a>
  <span class="fn">{ <span class="fn">newGoals</span> := <a href="../../.././Init/Meta.html#Lean.Meta.ApplyNewGoals.nonDependentFirst">Lean.Meta.ApplyNewGoals.nonDependentFirst</a>, <span class="fn">synthAssignedInstances</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">allowSynthFailures</span> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">approx</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(targetType : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(eType : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(rangeNumArgs : <a href="../../.././Init/Data/Range.html#Std.Range">Std.Range</a>)</span></span>
<span class="decl_args">
<span class="fn">(i : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.apply.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.applyConst"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L220-L221">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.applyConst"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">applyConst</span></a></span><span class="decl_args">
<span class="fn">(mvar : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(c : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(cfg : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Meta.html#Lean.Meta.ApplyConfig">Lean.Meta.ApplyConfig</a>
  <span class="fn">{ <span class="fn">newGoals</span> := <a href="../../.././Init/Meta.html#Lean.Meta.ApplyNewGoals.nonDependentFirst">Lean.Meta.ApplyNewGoals.nonDependentFirst</a>, <span class="fn">synthAssignedInstances</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">allowSynthFailures</span> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">approx</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Short-hand for applying a constant to the goal.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">mvar</span>.applyConst</span> <span class="fn">c</span> <span class="fn">cfg</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.mkConstWithFreshMVarLevels">Lean.Meta.mkConstWithFreshMVarLevels</a> <span class="fn">c</span></span>
  <span class="fn"><span class="fn"><span class="fn">mvar</span>.apply</span> <span class="fn">__do_lift</span> <span class="fn">cfg</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.applyConst" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.splitAndCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L228-L249">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.splitAndCore"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAndCore</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.splitAndCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.splitAndCore.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L236-L246">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.splitAndCore.go"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAndCore</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(tag : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(type : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div></div></div><div class="decl" id="Lean.MVarId.splitAnd"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L254-L255">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.splitAnd"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">splitAnd</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Apply <code><a href="../../.././Init/Prelude.html#And.intro">And.intro</a></code> as much as possible to goal <code>mvarId</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">mvarId</span>.splitAnd</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">mvarId</span>.splitAndCore</span></span></li></ul></details><details id="instances-for-list-Lean.MVarId.splitAnd" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.splitAnd"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L258-L259">source</a></div><div class="attributes">@[deprecated Lean.MVarId.splitAnd]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.splitAnd"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">splitAnd</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Lean/Meta/Tactic/Apply.html#Lean.Meta.splitAnd">Lean.Meta.splitAnd</a> <span class="fn">mvarId</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">mvarId</span>.splitAnd</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.splitAnd" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.exfalso"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L261-L268">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.exfalso"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">exfalso</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.exfalso" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.nthConstructor"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L275-L289">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.nthConstructor"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">nthConstructor</span></a></span><span class="decl_args">
<span class="fn">(name : <a href="../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(idx : <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(expected? : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(goal : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Apply the <code>n</code>-th constructor of the target type,
checking that it is an inductive type,
and that there are the expected number of constructors.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.nthConstructor" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.iffOfEq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L297-L301">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.iffOfEq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">iffOfEq</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></div><p>Try to convert an <code><a href="../../.././Init/Core.html#Iff">Iff</a></code> into an <code><a href="../../.././Init/Prelude.html#Eq">Eq</a></code> by applying <code><a href="../../.././Init/Core.html#iff_of_eq">iff_of_eq</a></code>.
If successful, returns the new goal, and otherwise returns the original <code>MVarId</code>.</p><p>This may be regarded as being a special case of <code><a href="../../.././Lean/Meta/Tactic/Rfl.html#Lean.MVarId.liftReflToEq">Lean.MVarId.liftReflToEq</a></code>, specifically for <code><a href="../../.././Init/Core.html#Iff">Iff</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.iffOfEq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.propext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L307-L316">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.propext"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">propext</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></div><p>Try to convert an <code><a href="../../.././Init/Prelude.html#Eq">Eq</a></code> into an <code><a href="../../.././Init/Core.html#Iff">Iff</a></code> by applying <code><a href="../../.././Init/Core.html#propext">propext</a></code>.
If successful, then returns then new goal, otherwise returns the original <code>MVarId</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.propext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.proofIrrelHeq"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L324-L334">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.proofIrrelHeq"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">proofIrrelHeq</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Try to close the goal using <code><a href="../../.././Init/PropLemmas.html#proof_irrel_heq">proof_irrel_heq</a></code>. Returns whether or not it succeeds.</p><p>We need to be somewhat careful not to assign metavariables while doing this, otherwise we might
specialize <code>Sort _</code> to <code>Prop</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.proofIrrelHeq" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.MVarId.subsingletonElim"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Meta/Tactic/Apply.lean#L343-L353">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Lean/Meta/Tactic/Apply.html#Lean.MVarId.subsingletonElim"><span class="name">Lean</span>.<span class="name">MVarId</span>.<span class="name">subsingletonElim</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Try to close the goal using <code><a href="../../.././Init/Core.html#Subsingleton.elim">Subsingleton.elim</a></code>. Returns whether or not it succeeds.</p><p>We are careful to apply <code><a href="../../.././Init/Core.html#Subsingleton.elim">Subsingleton.elim</a></code> in a way that does not assign any metavariables.
This is to prevent the <code><a href="../../.././Init/Core.html#Subsingleton">Subsingleton</a> Prop</code> instance from being used as justification to specialize
<code>Sort _</code> to <code>Prop</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.MVarId.subsingletonElim" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>