<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.Term</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Lean.Elab.Term";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Lean/ReservedNameAction.html">Lean.ReservedNameAction</a></li><li><a href="../.././Lean/Elab/Config.html">Lean.Elab.Config</a></li><li><a href="../.././Lean/Elab/DeclModifiers.html">Lean.Elab.DeclModifiers</a></li><li><a href="../.././Lean/Elab/Level.html">Lean.Elab.Level</a></li><li><a href="../.././Lean/Language/Basic.html">Lean.Language.Basic</a></li><li><a href="../.././Lean/Linter/Deprecated.html">Lean.Linter.Deprecated</a></li><li><a href="../.././Lean/Meta/AppBuilder.html">Lean.Meta.AppBuilder</a></li><li><a href="../.././Lean/Meta/Coe.html">Lean.Meta.Coe</a></li><li><a href="../.././Lean/Meta/CollectMVars.html">Lean.Meta.CollectMVars</a></li><li><a href="../.././Lean/Elab/PreDefinition/TerminationHint.html">Lean.Elab.PreDefinition.TerminationHint</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.Term" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.SavedContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.SyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SyntheticMVarKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedSyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedSyntheticMVarKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.extraMsgToMsg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">extraMsgToMsg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instToStringSyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringSyntheticMVarKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.SyntheticMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SyntheticMVarDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedSyntheticMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedSyntheticMVarDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.MVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedMVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedMVarErrorKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instToStringMVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringMVarErrorKind</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.MVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedMVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedMVarErrorInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.LetRecToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LetRecToLift</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedLetRecToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedLetRecToLift</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instNonemptySavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instNonemptySavedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.Snapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">Snapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.CacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">CacheKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instBEqCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instBEqCacheKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instHashableCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instHashableCacheKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedCacheKey</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.Cache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">Cache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedCache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">SavedState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.TacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticFinishedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedTacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticFinishedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instToSnapshotTreeTacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticFinishedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.TacticParsedSnapshotData"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshotData</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedTacticParsedSnapshotData"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticParsedSnapshotData</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.TacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instInhabitedTacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticParsedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.TacticParsedSnapshot.data"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshot</span>.<span class="name">data</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticParsedSnapshot</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticParsedSnapshot</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">Context</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElab</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instMonadTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instInhabitedTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.saveState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">saveState</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.SavedState.restore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedState</span>.<span class="name">restore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withRestoreOrSaveFull"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withRestoreOrSaveFull</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instMonadBacktrackSavedStateTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadBacktrackSavedStateTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withReuseContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withReuseContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withNarrowedTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withNarrowedTacticReuse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withNarrowedArgTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withNarrowedArgTacticReuse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutTacticIncrementality"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutTacticIncrementality</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutTacticReuse</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElabResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.observing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">observing</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.applyResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.commitIfDidNotPostpone"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">commitIfDidNotPostpone</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getLevelNames</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getFVarLocalDecl!"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getFVarLocalDecl!</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instAddErrorMessageContextTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instAddErrorMessageContextTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutSavingRecAppSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutSavingRecAppSyntax</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkTermElabAttributeUnsafe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermElabAttributeUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkTermElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermElabAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.termElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">termElabAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.LVal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.LVal.getRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span>.<span class="name">getRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.LVal.isFieldName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span>.<span class="name">isFieldName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instToStringLVal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringLVal</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getDeclName?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getDeclName?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getLetRecsToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getLetRecsToLift</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getMVarDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instMonadParentDeclTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadParentDeclTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withDeclName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withDeclName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.setLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">setLevelNames</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withLevelNames</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withAuxDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAuxDecl</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutErrToSorryImp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutErrToSorryImp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutErrToSorry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutErrToSorry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutHeedElabAsElimImp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutHeedElabAsElimImp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutHeedElabAsElim"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutHeedElabAsElim</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutModifyingElabMetaStateWithInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getInfoTreeWithContext?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getInfoTreeWithContext?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.throwErrorIfErrors"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwErrorIfErrors</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.traceAtCmdPos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">traceAtCmdPos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ppGoal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ppGoal</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.liftLevelM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">liftLevelM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabLevel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabLevel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withPushMacroExpansionStack"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withPushMacroExpansionStack</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withMacroExpansion"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withMacroExpansion</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerSyntheticMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerSyntheticMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerSyntheticMVarWithCurrRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerSyntheticMVarWithCurrRef</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerMVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerMVarErrorHoleInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorHoleInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerMVarErrorImplicitArgInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorImplicitArgInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerMVarErrorCustomInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorCustomInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerCustomErrorIfMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerCustomErrorIfMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.registerMVarArgName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarArgName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.throwMVarError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwMVarError</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.MVarErrorInfo.logError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.MVarErrorInfo.logError.addArgName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span>.<span class="name">addArgName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.MVarErrorInfo.logError.appendExtra"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span>.<span class="name">appendExtra</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.logUnassignedUsingErrorInfos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">logUnassignedUsingErrorInfos</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ensureNoUnassignedMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureNoUnassignedMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutPostponing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutPostponing</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkExplicitBinder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkExplicitBinder</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.levelMVarToParam"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">levelMVarToParam</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkFreshBinderName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkFreshBinderName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkFreshIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkFreshIdent</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.applyAttributesAt"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyAttributesAt</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.applyAttributes"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyAttributes</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkTypeMismatchError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTypeMismatchError</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.throwTypeMismatchError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwTypeMismatchError</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutMacroStackAtErr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutMacroStackAtErr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ContainsPendingMVar.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ContainsPendingMVar</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ContainsPendingMVar.visit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ContainsPendingMVar</span>.<span class="name">visit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.containsPendingMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">containsPendingMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.synthesizeInstMVarCore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">synthesizeInstMVarCore</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkCoe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkCoe</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ensureHasType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureHasType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.exceptionToSorry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">exceptionToSorry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.tryPostpone"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostpone</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.isMVarApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isMVarApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.tryPostponeIfMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.tryPostponeIfNoneOrMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfNoneOrMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.tryPostponeIfHasMVars?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfHasMVars?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.tryPostponeIfHasMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfHasMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withExpectedType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withExpectedType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.saveContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">saveContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withSavedContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withSavedContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.getSyntheticMVarDecl?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getSyntheticMVarDecl?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkSaveInfoAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkSaveInfoAnnotation</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.isSaveInfoAnnotation?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isSaveInfoAnnotation?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.removeSaveInfoAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">removeSaveInfoAnnotation</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.isTacticOrPostponedHole?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isTacticOrPostponedHole?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkTermInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addTermInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addTermInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addTermInfo'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addTermInfo'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withInfoContext'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withInfoContext'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.postponeElabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">postponeElabTerm</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instMonadMacroAdapterTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadMacroAdapterTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.hasNoImplicitLambdaAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">hasNoImplicitLambdaAnnotation</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkNoImplicitLambdaAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkNoImplicitLambdaAnnotation</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.blockImplicitLambda"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">blockImplicitLambda</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveLocalName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveLocalName.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveLocalName.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span>.<span class="name">loop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.isLocalIdent?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isLocalIdent?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.UseImplicitLambdaResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">UseImplicitLambdaResult</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addDotCompletionInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addDotCompletionInfo</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabTerm</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabTermEnsuringType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabTermEnsuringType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.commitIfNoErrors?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">commitIfNoErrors?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.adaptExpander"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">adaptExpander</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkInstMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkInstMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.ensureType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.elabType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabType</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withAutoBoundImplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withAutoBoundImplicit.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicit</span>.<span class="name">loop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withoutAutoBoundImplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutAutoBoundImplicit</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.withAutoBoundImplicitForbiddenPred"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicitForbiddenPred</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.collectUnassignedMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">collectUnassignedMVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.collectUnassignedMVars.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">collectUnassignedMVars</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addAutoBoundImplicits"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addAutoBoundImplicits.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.addAutoBoundImplicits'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkAuxName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkAuxName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.isLetRecAuxMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isLetRecAuxMVar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.mkConst"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkConst</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.checkDeprecated"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">checkDeprecated</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveName.process"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName</span>.<span class="name">process</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveName'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.resolveId?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveId?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElabM.run"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">run</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElabM.run'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">run'</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.TermElabM.toIO"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">toIO</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.instMetaEvalTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMetaEvalTermElabM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.universeConstraintsCheckpoint"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">universeConstraintsCheckpoint</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.expandDeclId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">expandDeclId</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.Term.exprToSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">exprToSyntax</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.withoutModifyingStateWithInfoAndMessages"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">withoutModifyingStateWithInfoAndMessages</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.incrementalAttr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">incrementalAttr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.builtinIncrementalElabs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">builtinIncrementalElabs</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.addBuiltinIncrementalElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">addBuiltinIncrementalElab</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.isIncrementalElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">isIncrementalElab</span></a></div></nav><main>
<div class="decl" id="Lean.Elab.Term.SavedContext"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L23-L29">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedContext</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Saved context for postponed terms and tactics to be executed.</p><ul class="structure_fields" id="Lean.Elab.Term.SavedContext.mk"><li id="Lean.Elab.Term.SavedContext.declName?" class="structure_field"><div class="structure_field_info">declName? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></li><li id="Lean.Elab.Term.SavedContext.options" class="structure_field"><div class="structure_field_info">options : <a href="../.././Lean/Data/Options.html#Lean.Options">Lean.Options</a></div></li><li id="Lean.Elab.Term.SavedContext.openDecls" class="structure_field"><div class="structure_field_info">openDecls : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Data/OpenDecl.html#Lean.OpenDecl">Lean.OpenDecl</a></span></div></li><li id="Lean.Elab.Term.SavedContext.macroStack" class="structure_field"><div class="structure_field_info">macroStack : <a href="../.././Lean/Elab/Util.html#Lean.Elab.MacroStack">Lean.Elab.MacroStack</a></div></li><li id="Lean.Elab.Term.SavedContext.errToSorry" class="structure_field"><div class="structure_field_info">errToSorry : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Term.SavedContext.levelNames" class="structure_field"><div class="structure_field_info">levelNames : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></li></ul><details id="instances-for-list-Lean.Elab.Term.SavedContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.SyntheticMVarKind"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L32-L48">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SyntheticMVarKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>We use synthetic metavariables as placeholders for pending elaboration steps.</p><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.SyntheticMVarKind.typeClass">typeClass: <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span><div class="inductive_ctor_doc"><p>Use typeclass resolution to synthesize value for metavariable.
If <code>extraErrorMsg?</code> is <code>some msg</code>, <code>msg</code> contains additional information to include in error messages
regarding type class synthesis failure.</p></div></li><li class="constructor" id="Lean.Elab.Term.SyntheticMVarKind.coe">coe: <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a></span> → <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span></span></span><div class="inductive_ctor_doc"><p>Use coercion to synthesize value for the metavariable.
if <code>f?</code> is <code>some f</code>, we produce an application type mismatch error message.
Otherwise, if <code>header?</code> is <code>some header</code>, we generate the error <code>(header ++ &quot;has type&quot; ++ eType ++ &quot;but it is expected to have type&quot; ++ expectedType)</code>
Otherwise, we generate the error <code>(&quot;type mismatch&quot; ++ e ++ &quot;has type&quot; ++ eType ++ &quot;but it is expected to have type&quot; ++ expectedType)</code></p></div></li><li class="constructor" id="Lean.Elab.Term.SyntheticMVarKind.tactic">tactic: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext">Lean.Elab.Term.SavedContext</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span></span><div class="inductive_ctor_doc"><p>Use tactic to synthesize value for metavariable.</p></div></li><li class="constructor" id="Lean.Elab.Term.SyntheticMVarKind.postponed">postponed: <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext">Lean.Elab.Term.SavedContext</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span><div class="inductive_ctor_doc"><p>Metavariable represents a hole whose elaboration has been postponed.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Term.SyntheticMVarKind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedSyntheticMVarKind"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L48-L48">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedSyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedSyntheticMVarKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedSyntheticMVarKind">Lean.Elab.Term.instInhabitedSyntheticMVarKind</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind.typeClass">Lean.Elab.Term.SyntheticMVarKind.typeClass</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.extraMsgToMsg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L53-L54">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.extraMsgToMsg"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">extraMsgToMsg</span></a></span><span class="decl_args">
<span class="fn">(extraErrorMsg? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></div></div><p>Convert an &quot;extra&quot; optional error message into a message <code>&quot;\n{msg}&quot;</code> (if <code>some msg</code>) and <code>MessageData.nil</code> (if <code>none</code>)</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.extraMsgToMsg">Lean.Elab.Term.extraMsgToMsg</a> <span class="fn">extraErrorMsg?</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">extraErrorMsg?</span> with
  | <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">msg</span></span> =&gt; <span class="fn"><span class="fn"><span class="fn"><a href="../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">&quot;\n&quot;</span></span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">msg</span></span></span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">&quot;&quot;</span></span></span>
  | <span class="fn">x</span> =&gt; <a href="../.././Lean/Message.html#Lean.MessageData.nil">Lean.MessageData.nil</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.extraMsgToMsg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instToStringSyntheticMVarKind"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L56-L61">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instToStringSyntheticMVarKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringSyntheticMVarKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.SyntheticMVarDecl"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L63-L66">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SyntheticMVarDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.SyntheticMVarDecl.mk"><li id="Lean.Elab.Term.SyntheticMVarDecl.stx" class="structure_field"><div class="structure_field_info">stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></li><li id="Lean.Elab.Term.SyntheticMVarDecl.kind" class="structure_field"><div class="structure_field_info">kind : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a></div></li></ul><details id="instances-for-list-Lean.Elab.Term.SyntheticMVarDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedSyntheticMVarDecl"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L66-L66">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedSyntheticMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedSyntheticMVarDecl</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl">Lean.Elab.Term.SyntheticMVarDecl</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedSyntheticMVarDecl">Lean.Elab.Term.instInhabitedSyntheticMVarDecl</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">stx</span> := <span class="fn">default</span>, <span class="fn">kind</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.MVarErrorKind"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L72-L79">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>We can optionally associate an error context with a metavariable (see <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">MVarErrorInfo</a></code>).
We have three different kinds of error context.</p><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.MVarErrorKind.implicitArg">implicitArg: <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a></span><div class="inductive_ctor_doc"><p>Metavariable for implicit arguments. <code>ctx</code> is the parent application.</p></div></li><li class="constructor" id="Lean.Elab.Term.MVarErrorKind.hole">hole: <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a><div class="inductive_ctor_doc"><p>Metavariable for explicit holes provided by the user (e.g., <code>_</code> and <code>?m</code>)</p></div></li><li class="constructor" id="Lean.Elab.Term.MVarErrorKind.custom">custom: <span class="fn"><a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a></span><div class="inductive_ctor_doc"><p>&quot;Custom&quot;, <code>msgData</code> stores the additional error messages.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Term.MVarErrorKind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedMVarErrorKind"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L79-L79">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedMVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedMVarErrorKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedMVarErrorKind">Lean.Elab.Term.instInhabitedMVarErrorKind</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind.implicitArg">Lean.Elab.Term.MVarErrorKind.implicitArg</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instToStringMVarErrorKind"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L81-L85">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instToStringMVarErrorKind"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringMVarErrorKind</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.MVarErrorInfo"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L90-L94">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>We can optionally associate an error context with metavariables.</p><ul class="structure_fields" id="Lean.Elab.Term.MVarErrorInfo.mk"><li id="Lean.Elab.Term.MVarErrorInfo.mvarId" class="structure_field"><div class="structure_field_info">mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></div></li><li id="Lean.Elab.Term.MVarErrorInfo.ref" class="structure_field"><div class="structure_field_info">ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></li><li id="Lean.Elab.Term.MVarErrorInfo.kind" class="structure_field"><div class="structure_field_info">kind : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind">Lean.Elab.Term.MVarErrorKind</a></div></li></ul><details id="instances-for-list-Lean.Elab.Term.MVarErrorInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedMVarErrorInfo"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L94-L94">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedMVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedMVarErrorInfo</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">Lean.Elab.Term.MVarErrorInfo</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedMVarErrorInfo">Lean.Elab.Term.instInhabitedMVarErrorInfo</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">mvarId</span> := <span class="fn">default</span>, <span class="fn">ref</span> := <span class="fn">default</span>, <span class="fn">kind</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.LetRecToLift"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L100-L112">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LetRecToLift</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Nested <code>let rec</code> expressions are eagerly lifted by the elaborator.
We store the information necessary for performing the lifting here.</p><ul class="structure_fields" id="Lean.Elab.Term.LetRecToLift.mk"><li id="Lean.Elab.Term.LetRecToLift.ref" class="structure_field"><div class="structure_field_info">ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></li><li id="Lean.Elab.Term.LetRecToLift.fvarId" class="structure_field"><div class="structure_field_info">fvarId : <a href="../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></div></li><li id="Lean.Elab.Term.LetRecToLift.attrs" class="structure_field"><div class="structure_field_info">attrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Attributes.html#Lean.Elab.Attribute">Lean.Elab.Attribute</a></span></div></li><li id="Lean.Elab.Term.LetRecToLift.shortDeclName" class="structure_field"><div class="structure_field_info">shortDeclName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></div></li><li id="Lean.Elab.Term.LetRecToLift.declName" class="structure_field"><div class="structure_field_info">declName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></div></li><li id="Lean.Elab.Term.LetRecToLift.lctx" class="structure_field"><div class="structure_field_info">lctx : <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a></div></li><li id="Lean.Elab.Term.LetRecToLift.localInstances" class="structure_field"><div class="structure_field_info">localInstances : <a href="../.././Lean/MetavarContext.html#Lean.LocalInstances">Lean.LocalInstances</a></div></li><li id="Lean.Elab.Term.LetRecToLift.type" class="structure_field"><div class="structure_field_info">type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.LetRecToLift.val" class="structure_field"><div class="structure_field_info">val : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></li><li id="Lean.Elab.Term.LetRecToLift.mvarId" class="structure_field"><div class="structure_field_info">mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></div></li><li id="Lean.Elab.Term.LetRecToLift.termination" class="structure_field"><div class="structure_field_info">termination : <a href="../.././Lean/Elab/PreDefinition/TerminationHint.html#Lean.Elab.TerminationHints">Lean.Elab.TerminationHints</a></div></li></ul><details id="instances-for-list-Lean.Elab.Term.LetRecToLift" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedLetRecToLift"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L112-L112">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedLetRecToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedLetRecToLift</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift">Lean.Elab.Term.LetRecToLift</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L117-L136">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State of the <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">TermElabM</a></code> monad.</p><ul class="structure_fields" id="Lean.Elab.Term.State.mk"><li id="Lean.Elab.Term.State.levelNames" class="structure_field"><div class="structure_field_info">levelNames : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></li><li id="Lean.Elab.Term.State.syntheticMVars" class="structure_field"><div class="structure_field_info">syntheticMVars : <span class="fn"><a href="../.././Lean/Expr.html#Lean.MVarIdMap">Lean.MVarIdMap</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl">Lean.Elab.Term.SyntheticMVarDecl</a></span></div></li><li id="Lean.Elab.Term.State.pendingMVars" class="structure_field"><div class="structure_field_info">pendingMVars : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li><li id="Lean.Elab.Term.State.mvarErrorInfos" class="structure_field"><div class="structure_field_info">mvarErrorInfos : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">Lean.Elab.Term.MVarErrorInfo</a></span></div><div class="structure_field_doc"><p>List of errors associated to a metavariable that are shown to the user if the metavariable could not be fully instantiated</p></div></li><li id="Lean.Elab.Term.State.mvarArgNames" class="structure_field"><div class="structure_field_info">mvarArgNames : <span class="fn"><a href="../.././Lean/Expr.html#Lean.MVarIdMap">Lean.MVarIdMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div><div class="structure_field_doc"><p><code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarArgNames">mvarArgNames</a></code> stores the argument names associated to metavariables.
These are used in combination with <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarErrorInfos">mvarErrorInfos</a></code> for throwing errors about metavariables that could not be fully instantiated.
For example when elaborating <code><a href="../.././Init/Prelude.html#List">List</a> _</code>, the argument name of the placeholder will be <code>α</code>.</p><p>While elaborating an application, <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarArgNames">mvarArgNames</a></code> is set for each metavariable argument, using the available argument name.
This may happen before or after the <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarErrorInfos">mvarErrorInfos</a></code> is set for the same metavariable.</p><p>We used to store the argument names in <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarErrorInfos">mvarErrorInfos</a></code>, updating the <code>MVarErrorInfos</code> to add the argument name when it is available,
but this doesn't work if the argument name is available <em>before</em> the <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State.mvarErrorInfos">mvarErrorInfos</a></code> is set for that metavariable.</p></div></li><li id="Lean.Elab.Term.State.letRecsToLift" class="structure_field"><div class="structure_field_info">letRecsToLift : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift">Lean.Elab.Term.LetRecToLift</a></span></div></li></ul><details id="instances-for-list-Lean.Elab.Term.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedState"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L136-L136">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.SavedState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L141-L144">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Backtrackable state for the <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">TermElabM</a></code> monad.</p><ul class="structure_fields" id="Lean.Elab.Term.SavedState.mk"><li id="Lean.Elab.Term.SavedState.meta" class="structure_field"><div class="structure_field_info">meta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.SavedState">Lean.Meta.SavedState</a></div></li><li id="Lean.Elab.Term.SavedState.elab" class="structure_field"><div class="structure_field_info">elab : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a></div></li></ul><details id="instances-for-list-Lean.Elab.Term.SavedState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instNonemptySavedState"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L144-L144">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instNonemptySavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instNonemptySavedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Nonempty">Nonempty</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instNonemptySavedState">Lean.Elab.Term.instNonemptySavedState</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">⋯</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L153-L155">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.State"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State of the <code>TacticM</code> monad.</p><ul class="structure_fields" id="Lean.Elab.Tactic.State.mk"><li id="Lean.Elab.Tactic.State.goals" class="structure_field"><div class="structure_field_info">goals : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedState"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L155-L155">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.State">Lean.Elab.Tactic.State</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedState">Lean.Elab.Tactic.instInhabitedState</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">goals</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.Snapshot"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L163-L168">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Snapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">Snapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Snapshots are used to implement the <code>save</code> tactic.
This tactic caches the state of the system, and allows us to &quot;replay&quot;
expensive proofs efficiently. This is only relevant implementing the
LSP server.</p><ul class="structure_fields" id="Lean.Elab.Tactic.Snapshot.mk"><li id="Lean.Elab.Tactic.Snapshot.core" class="structure_field"><div class="structure_field_info">core : <a href="../.././Lean/CoreM.html#Lean.Core.State">Lean.Core.State</a></div></li><li id="Lean.Elab.Tactic.Snapshot.meta" class="structure_field"><div class="structure_field_info">meta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.State">Lean.Meta.State</a></div></li><li id="Lean.Elab.Tactic.Snapshot.term" class="structure_field"><div class="structure_field_info">term : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a></div></li><li id="Lean.Elab.Tactic.Snapshot.tactic" class="structure_field"><div class="structure_field_info">tactic : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.State">Lean.Elab.Tactic.State</a></div></li><li id="Lean.Elab.Tactic.Snapshot.stx" class="structure_field"><div class="structure_field_info">stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.Snapshot" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.CacheKey"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L173-L176">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">CacheKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Key for the cache used to implement the <code>save</code> tactic.</p><ul class="structure_fields" id="Lean.Elab.Tactic.CacheKey.mk"><li id="Lean.Elab.Tactic.CacheKey.mvarId" class="structure_field"><div class="structure_field_info">mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></div></li><li id="Lean.Elab.Tactic.CacheKey.pos" class="structure_field"><div class="structure_field_info">pos : <a href="../.././Init/Prelude.html#String.Pos">String.Pos</a></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.CacheKey" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instBEqCacheKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L176-L176">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instBEqCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instBEqCacheKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#BEq">BEq</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey">Lean.Elab.Tactic.CacheKey</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instBEqCacheKey">Lean.Elab.Tactic.instBEqCacheKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Tactic.beqCacheKey._@.Lean.Elab.Term._hyg.731">Lean.Elab.Tactic.beqCacheKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instHashableCacheKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L176-L176">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instHashableCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instHashableCacheKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey">Lean.Elab.Tactic.CacheKey</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instHashableCacheKey">Lean.Elab.Tactic.instHashableCacheKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">hash</span> := <a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Tactic.hashCacheKey._@.Lean.Elab.Term._hyg.805">Lean.Elab.Tactic.hashCacheKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedCacheKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L176-L176">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedCacheKey"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedCacheKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey">Lean.Elab.Tactic.CacheKey</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedCacheKey">Lean.Elab.Tactic.instInhabitedCacheKey</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">mvarId</span> := <span class="fn">default</span>, <span class="fn">pos</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.Cache"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L181-L184">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Cache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">Cache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Cache for the <code>save</code> tactic.</p><ul class="structure_fields" id="Lean.Elab.Tactic.Cache.mk"><li id="Lean.Elab.Tactic.Cache.pre" class="structure_field"><div class="structure_field_info">pre : <span class="fn"><a href="../.././Lean/Data/PersistentHashMap.html#Lean.PHashMap">Lean.PHashMap</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey">Lean.Elab.Tactic.CacheKey</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Snapshot">Lean.Elab.Tactic.Snapshot</a></span></div></li><li id="Lean.Elab.Tactic.Cache.post" class="structure_field"><div class="structure_field_info">post : <span class="fn"><a href="../.././Lean/Data/PersistentHashMap.html#Lean.PHashMap">Lean.PHashMap</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.CacheKey">Lean.Elab.Tactic.CacheKey</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Snapshot">Lean.Elab.Tactic.Snapshot</a></span></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.Cache" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedCache"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L184-L184">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedCache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Cache">Lean.Elab.Tactic.Cache</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedCache">Lean.Elab.Tactic.instInhabitedCache</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">pre</span> := <span class="fn">default</span>, <span class="fn">post</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.SavedState"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L189-L191">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.SavedState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">SavedState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Tactic.SavedState.mk"><li id="Lean.Elab.Tactic.SavedState.term" class="structure_field"><div class="structure_field_info">term : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a></div></li><li id="Lean.Elab.Tactic.SavedState.tactic" class="structure_field"><div class="structure_field_info">tactic : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.State">Lean.Elab.Tactic.State</a></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.SavedState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.TacticFinishedSnapshot"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L194-L197">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticFinishedSnapshot</span></a></span><span class="decl_extends">extends</span><span class="decl_parent">
<span class="fn"><a class="break_within" href="../.././Lean/Language/Basic.html#Lean.Language.Snapshot"><span class="name">Lean</span>.<span class="name">Language</span>.<span class="name">Snapshot</span></a></span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Snapshot after finishing execution of a tactic.</p><ul class="structure_fields" id="Lean.Elab.Tactic.TacticFinishedSnapshot.mk"><li id="Lean.Elab.Tactic.TacticFinishedSnapshot.desc" class="structure_field"><div class="structure_field_info">desc : <a href="../.././Init/Prelude.html#String">String</a></div></li><li id="Lean.Elab.Tactic.TacticFinishedSnapshot.diagnostics" class="structure_field"><div class="structure_field_info">diagnostics : <a href="../.././Lean/Language/Basic.html#Lean.Language.Snapshot.Diagnostics">Lean.Language.Snapshot.Diagnostics</a></div></li><li id="Lean.Elab.Tactic.TacticFinishedSnapshot.infoTree?" class="structure_field"><div class="structure_field_info">infoTree? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree">Lean.Elab.InfoTree</a></span></div></li><li id="Lean.Elab.Tactic.TacticFinishedSnapshot.isFatal" class="structure_field"><div class="structure_field_info">isFatal : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Tactic.TacticFinishedSnapshot.state?" class="structure_field"><div class="structure_field_info">state? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.SavedState">Lean.Elab.Tactic.SavedState</a></span></div><div class="structure_field_doc"><p>State saved for reuse, if no fatal exception occurred.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.TacticFinishedSnapshot" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedTacticFinishedSnapshot"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L197-L197">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedTacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticFinishedSnapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticFinishedSnapshot">Lean.Elab.Tactic.TacticFinishedSnapshot</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedTacticFinishedSnapshot">Lean.Elab.Tactic.instInhabitedTacticFinishedSnapshot</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">toSnapshot</span> := <span class="fn">default</span>, <span class="fn">state?</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instToSnapshotTreeTacticFinishedSnapshot"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L198-L199">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticFinishedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticFinishedSnapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Language/Basic.html#Lean.Language.ToSnapshotTree">Lean.Language.ToSnapshotTree</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticFinishedSnapshot">Lean.Elab.Tactic.TacticFinishedSnapshot</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticFinishedSnapshot">Lean.Elab.Tactic.instToSnapshotTreeTacticFinishedSnapshot</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{
    <span class="fn">toSnapshotTree</span> := <span class="fn">fun (<span class="fn">s</span> : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticFinishedSnapshot">Lean.Elab.Tactic.TacticFinishedSnapshot</a>) =&gt;
      <span class="fn"><a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotTree.mk">Lean.Language.SnapshotTree.mk</a> <span class="fn"><span class="fn">s</span>.toSnapshot</span> <span class="fn">#[]</span></span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.TacticParsedSnapshotData"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L202-L211">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshotData"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshotData</span></a></span><span class="decl_args">
<span class="fn">(TacticParsedSnapshot : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_extends">extends</span><span class="decl_parent">
<span class="fn"><a class="break_within" href="../.././Lean/Language/Basic.html#Lean.Language.Snapshot"><span class="name">Lean</span>.<span class="name">Language</span>.<span class="name">Snapshot</span></a></span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Snapshot just before execution of a tactic.</p><ul class="structure_fields" id="Lean.Elab.Tactic.TacticParsedSnapshotData.mk"><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.desc" class="structure_field"><div class="structure_field_info">desc : <a href="../.././Init/Prelude.html#String">String</a></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.diagnostics" class="structure_field"><div class="structure_field_info">diagnostics : <a href="../.././Lean/Language/Basic.html#Lean.Language.Snapshot.Diagnostics">Lean.Language.Snapshot.Diagnostics</a></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.infoTree?" class="structure_field"><div class="structure_field_info">infoTree? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree">Lean.Elab.InfoTree</a></span></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.isFatal" class="structure_field"><div class="structure_field_info">isFatal : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.stx" class="structure_field"><div class="structure_field_info">stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div><div class="structure_field_doc"><p>Syntax tree of the tactic, stored and compared for incremental reuse.</p></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.inner?" class="structure_field"><div class="structure_field_info">inner? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotTask">Lean.Language.SnapshotTask</a> <span class="fn">TacticParsedSnapshot</span>)</span></span></div><div class="structure_field_doc"><p>Task for nested incrementality, if enabled for tactic.</p></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.finished" class="structure_field"><div class="structure_field_info">finished : <span class="fn"><a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotTask">Lean.Language.SnapshotTask</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticFinishedSnapshot">Lean.Elab.Tactic.TacticFinishedSnapshot</a></span></div><div class="structure_field_doc"><p>Task for state after tactic execution.</p></div></li><li id="Lean.Elab.Tactic.TacticParsedSnapshotData.next" class="structure_field"><div class="structure_field_info">next : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotTask">Lean.Language.SnapshotTask</a> <span class="fn">TacticParsedSnapshot</span>)</span></span></div><div class="structure_field_doc"><p>Tasks for subsequent, potentially parallel, tactic steps.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Tactic.TacticParsedSnapshotData" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedTacticParsedSnapshotData"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L211-L211">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedTacticParsedSnapshotData"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticParsedSnapshotData</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">{<span class="fn">a</span> : <a href="../.././foundational_types.html">Type</a>} → <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshotData">Lean.Elab.Tactic.TacticParsedSnapshotData</a> <span class="fn">a</span>)</span></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Elab.Tactic.instInhabitedTacticParsedSnapshotData</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">toSnapshot</span> := <span class="fn">default</span>, <span class="fn">stx</span> := <span class="fn">default</span>, <span class="fn">inner?</span> := <span class="fn">default</span>, <span class="fn">finished</span> := <span class="fn">default</span>, <span class="fn">next</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.TacticParsedSnapshot"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L214-L216">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State after execution of a single synchronous tactic step.</p><ul class="constructors"><li class="constructor" id="Lean.Elab.Tactic.TacticParsedSnapshot.mk">mk: <span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshotData">Lean.Elab.Tactic.TacticParsedSnapshotData</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a></span> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a></span></li></ul><details id="instances-for-list-Lean.Elab.Tactic.TacticParsedSnapshot" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instInhabitedTacticParsedSnapshot"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L216-L216">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedTacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instInhabitedTacticParsedSnapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instInhabitedTacticParsedSnapshot">Lean.Elab.Tactic.instInhabitedTacticParsedSnapshot</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot.mk">Lean.Elab.Tactic.TacticParsedSnapshot.mk</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.TacticParsedSnapshot.data"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L217-L218">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot.data"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">TacticParsedSnapshot</span>.<span class="name">data</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshotData">Lean.Elab.Tactic.TacticParsedSnapshotData</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.data</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot.mk">Lean.Elab.Tactic.TacticParsedSnapshot.mk</a> <span class="fn">data</span></span> =&gt; <span class="fn">data</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Tactic.TacticParsedSnapshot.data" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L219-L224">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticParsedSnapshot</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Language/Basic.html#Lean.Language.ToSnapshotTree">Lean.Language.ToSnapshotTree</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot">Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">toSnapshotTree</span> := <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot.go">Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot.go</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L221-L224">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.instToSnapshotTreeTacticParsedSnapshot.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Tactic</span>.<span class="name">instToSnapshotTreeTacticParsedSnapshot</span>.<span class="name">go</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a> → <a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotTree">Lean.Language.SnapshotTree</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.Context"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L231-L304">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">Context</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="Lean.Elab.Term.Context.mk"><li id="Lean.Elab.Term.Context.declName?" class="structure_field"><div class="structure_field_info">declName? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></li><li id="Lean.Elab.Term.Context.auxDeclToFullName" class="structure_field"><div class="structure_field_info">auxDeclToFullName : <span class="fn"><a href="../.././Lean/Expr.html#Lean.FVarIdMap">Lean.FVarIdMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div><div class="structure_field_doc"><p>Map <code>.auxDecl</code> local declarations used to encode recursive declarations to their full-names.</p></div></li><li id="Lean.Elab.Term.Context.macroStack" class="structure_field"><div class="structure_field_info">macroStack : <a href="../.././Lean/Elab/Util.html#Lean.Elab.MacroStack">Lean.Elab.MacroStack</a></div></li><li id="Lean.Elab.Term.Context.mayPostpone" class="structure_field"><div class="structure_field_info">mayPostpone : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.mayPostpone">mayPostpone</a> == true</code>, an elaboration function may interrupt its execution by throwing <code>Exception.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code>.
The function <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">elabTerm</a></code> catches this exception and creates fresh synthetic metavariable <code>?m</code>, stores <code>?m</code> in
the list of pending synthetic metavariables, and returns <code>?m</code>.</p></div></li><li id="Lean.Elab.Term.Context.errToSorry" class="structure_field"><div class="structure_field_info">errToSorry : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> is set to true, the method <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">elabTerm</a></code> catches
exceptions and converts them into synthetic <code>sorry</code>s.
The implementation of choice nodes and overloaded symbols rely on the fact
that when <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> is set to false for an elaboration function <code>F</code>, then
<code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> remains <code>false</code> for all elaboration functions invoked by <code>F</code>.
That is, it is safe to transition <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> from <code>true</code> to <code>false</code>, but
we must not set <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> to <code>true</code> when it is currently set to <code>false</code>.</p></div></li><li id="Lean.Elab.Term.Context.autoBoundImplicit" class="structure_field"><div class="structure_field_info">autoBoundImplicit : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicit">autoBoundImplicit</a></code> is set to true, instead of producing
an &quot;unknown identifier&quot; error for unbound variables, we generate an
internal exception. This exception is caught at <code>elabBinders</code> and
<code>elabTypeWithUnboldImplicit</code>. Both methods add implicit declarations
for the unbound variable and try again.</p></div></li><li id="Lean.Elab.Term.Context.autoBoundImplicits" class="structure_field"><div class="structure_field_info">autoBoundImplicits : <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PArray">Lean.PArray</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></li><li id="Lean.Elab.Term.Context.autoBoundImplicitForbidden" class="structure_field"><div class="structure_field_info">autoBoundImplicitForbidden : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div><div class="structure_field_doc"><p>A name <code>n</code> is only eligible to be an auto implicit name if <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicitForbidden">autoBoundImplicitForbidden</a> n = false</code>.
We use this predicate to disallow <code>f</code> to be considered an auto implicit name in a definition such
as</p><pre><code>def f : f → <a href="../.././Init/Prelude.html#Bool">Bool</a> := fun _ =&gt; true
</code></pre></div></li><li id="Lean.Elab.Term.Context.sectionVars" class="structure_field"><div class="structure_field_info">sectionVars : <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap">Lake.NameMap</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div><div class="structure_field_doc"><p>Map from user name to internal unique name</p></div></li><li id="Lean.Elab.Term.Context.sectionFVars" class="structure_field"><div class="structure_field_info">sectionFVars : <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap">Lake.NameMap</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>Map from internal name to fvar</p></div></li><li id="Lean.Elab.Term.Context.implicitLambda" class="structure_field"><div class="structure_field_info">implicitLambda : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>Enable/disable implicit lambdas feature.</p></div></li><li id="Lean.Elab.Term.Context.heedElabAsElim" class="structure_field"><div class="structure_field_info">heedElabAsElim : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>Heed <code>elab_as_elim</code> attribute.</p></div></li><li id="Lean.Elab.Term.Context.isNoncomputableSection" class="structure_field"><div class="structure_field_info">isNoncomputableSection : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>Noncomputable sections automatically add the <code>noncomputable</code> modifier to any declaration we cannot generate code for.</p></div></li><li id="Lean.Elab.Term.Context.ignoreTCFailures" class="structure_field"><div class="structure_field_info">ignoreTCFailures : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>When <code>true</code> we skip TC failures. We use this option when processing patterns.</p></div></li><li id="Lean.Elab.Term.Context.inPattern" class="structure_field"><div class="structure_field_info">inPattern : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p><code>true</code> when elaborating patterns. It affects how we elaborate named holes.</p></div></li><li id="Lean.Elab.Term.Context.tacticCache?" class="structure_field"><div class="structure_field_info">tacticCache? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.Cache">Lean.Elab.Tactic.Cache</a>)</span></span></div><div class="structure_field_doc"><p>Cache for the <code>save</code> tactic. It is only <code>some</code> in the LSP server.</p></div></li><li id="Lean.Elab.Term.Context.tacSnap?" class="structure_field"><div class="structure_field_info">tacSnap? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotBundle">Lean.Language.SnapshotBundle</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a>)</span></span></div><div class="structure_field_doc"><p>Snapshot for incremental processing of current tactic, if any.</p><p>Invariant: if the bundle's <code>old?</code> is set, then the state <em>up to the start</em> of the tactic is
unchanged, i.e. reuse is possible.</p></div></li><li id="Lean.Elab.Term.Context.saveRecAppSyntax" class="structure_field"><div class="structure_field_info">saveRecAppSyntax : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>If <code>true</code>, we store in the <code>Expr</code> the <code>Syntax</code> for recursive applications (i.e., applications
of free variables tagged with <code>isAuxDecl</code>). We store the <code>Syntax</code> using <code>mkRecAppWithSyntax</code>.
We use the <code>Syntax</code> object to produce better error messages at <code>Structural.lean</code> and <code>WF.lean</code>.</p></div></li><li id="Lean.Elab.Term.Context.holesAsSyntheticOpaque" class="structure_field"><div class="structure_field_info">holesAsSyntheticOpaque : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.holesAsSyntheticOpaque">holesAsSyntheticOpaque</a></code> is <code>true</code>, then we mark metavariables associated
with <code>_</code>s as <code>syntheticOpaque</code> if they do not occur in patterns.
This option is useful when elaborating terms in tactics such as <code>refine'</code> where
we want holes there to become new goals. See issue #1681, we have
`refine' (fun x =&gt; _)</p></div></li></ul><details id="instances-for-list-Lean.Elab.Term.Context" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElabM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L306-L306">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a> <span class="fn">(<a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElabM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L307-L307">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElab</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instMonadTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L314-L316">source</a></div><div class="attributes">@[always_inline]</div>
<div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadTermElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadTermElabM">Lean.Elab.Term.instMonadTermElabM</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">let <span class="fn">i</span> := <span class="fn"><a href="../.././Init/Prelude.html#inferInstanceAs">inferInstanceAs</a> <span class="fn">(<a href="../.././Init/Prelude.html#Monad">Monad</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a>)</span></span>;
  <span class="fn">Monad.mk</span></span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instInhabitedTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L320-L321">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instInhabitedTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instInhabitedTermElabM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Elab.Term.instInhabitedTermElabM</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Init/Prelude.html#MonadExcept.throw">throw</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.saveState"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L323-L324">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.saveState"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">saveState</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.saveState">Lean.Elab.Term.saveState</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.saveState">Lean.Meta.saveState</a></span>
  let <span class="fn">__do_lift_1</span> ← <span class="fn">get</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ <span class="fn">meta</span> := <span class="fn">__do_lift</span>, <span class="fn">elab</span> := <span class="fn">__do_lift_1</span> }</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.saveState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.SavedState.restore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L326-L333">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState.restore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">SavedState</span>.<span class="name">restore</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a>)</span></span>
<span class="decl_args">
<span class="fn">(restoreInfo : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.SavedState.restore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withRestoreOrSaveFull"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L348-L362">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withRestoreOrSaveFull"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withRestoreOrSaveFull</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(reusableResult? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(tacSnap? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Language/Basic.html#Lean.Language.SnapshotBundle">Lean.Language.SnapshotBundle</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Tactic.TacticParsedSnapshot">Lean.Elab.Tactic.TacticParsedSnapshot</a>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a>)</span></span></div></div><p>Like <code>Meta.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withRestoreOrSaveFull">withRestoreOrSaveFull</a></code> for <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">TermElabM</a></code>, but also takes a <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">tacSnap?</a></code> that</p><ul>
<li>when running <code>act</code>, is set as <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">Context.tacSnap?</a></code></li>
<li>otherwise (i.e. on restore) is used to update the new snapshot promise to the old task's
value.
This extra restore step is necessary because while <code>reusableResult?</code> can be used to replay any
effects on <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">State</a></code>, <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">Context.tacSnap?</a></code> is not part of it but changed via an <code><a href="../.././Init/System/IO.html#IO">IO</a></code> side effect, so
it needs to be replayed separately.</li>
</ul><p>We use an explicit parameter instead of accessing <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">Context.tacSnap?</a></code> directly because this prevents
<code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withRestoreOrSaveFull">withRestoreOrSaveFull</a></code> and <code>withReader</code> from being used in the wrong order.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withRestoreOrSaveFull" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instMonadBacktrackSavedStateTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L364-L366">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadBacktrackSavedStateTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadBacktrackSavedStateTermElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Util/MonadBacktrack.html#Lean.MonadBacktrack">Lean.MonadBacktrack</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadBacktrackSavedStateTermElabM">Lean.Elab.Term.instMonadBacktrackSavedStateTermElabM</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">saveState</span> := <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.saveState">Lean.Elab.Term.saveState</a>, <span class="fn">restoreState</span> := <span class="fn">fun (<span class="fn">b</span> : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a>) =&gt; <span class="fn"><span class="fn">b</span>.restore</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withReuseContext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L380-L384">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withReuseContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withReuseContext</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Incremental elaboration helper. Avoids leakage of data from outside syntax via the monadic context
when running <code>act</code> on <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> by</p><ul>
<li>setting <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> as the <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.ref">ref</a></code> and</li>
<li>deactivating <code>suppressElabErrors</code> if <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> is <code>missing</code>-free, which also helps with not hiding
useful errors in this part of the input. Note that if <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> has <code>missing</code>, this should always be
true for the outer syntax as well, so taking the old value of <code>suppressElabErrors</code> into account
should not introduce data leakage.</li>
</ul><p>This combinator should always be used when narrowing reuse to a syntax subtree, usually (in the case
of tactics, to be generalized) via <code>withNarrowed(Arg)TacticReuse</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withReuseContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withNarrowedTacticReuse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L398-L410">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withNarrowedTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withNarrowedTacticReuse</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(split : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Manages reuse information for nested tactics by <code>split</code>ting given syntax into an outer and inner
part. <code>act</code> is then run on the inner part but with reuse information adjusted as following:</p><ul>
<li>If the old (from <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">tacSnap?</a></code>'s <code>SyntaxGuarded.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>) and new (from <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>) outer syntax are not
identical according to <code>Syntax.eqWithInfo</code>, reuse is disabled.</li>
<li>Otherwise, the old syntax as stored in <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">tacSnap?</a></code> is updated to the old <em>inner</em> syntax.</li>
<li>In any case, <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withReuseContext">withReuseContext</a></code> is used on the new inner syntax to further prepare the monadic
context.</li>
</ul><p>For any tactic that participates in reuse, <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withNarrowedTacticReuse">withNarrowedTacticReuse</a></code> should be applied to the
tactic's syntax and <code>act</code> should be used to do recursive tactic evaluation of nested parts.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withNarrowedTacticReuse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withNarrowedArgTacticReuse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L421-L423">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withNarrowedArgTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withNarrowedArgTacticReuse</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(argIdx : <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>A variant of <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withNarrowedTacticReuse">withNarrowedTacticReuse</a></code> that uses <code>stx[argIdx]</code> as the inner syntax and all <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>
child nodes before that as the outer syntax, i.e. reuse is disabled if there was any change before
<code>argIdx</code>.</p><p>NOTE: child nodes after <code>argIdx</code> are not tested (which would almost always disable reuse as they are
necessarily shifted by changes at <code>argIdx</code>) so it must be ensured that the result of <code>arg</code> does not
depend on them (i.e. they should not be inspected beforehand).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withNarrowedArgTacticReuse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutTacticIncrementality"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L431-L439">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutTacticIncrementality"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutTacticIncrementality</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(cond : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Disables incremental tactic reuse <em>and</em> reporting for <code>act</code> if <code><a href="../.././Init/Prelude.html#cond">cond</a></code> is true by setting <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.tacSnap?">tacSnap?</a></code>
to <code>none</code>. This should be done for tactic blocks that are run multiple times as otherwise the
reported progress will jump back and forth (and partial reuse for these kinds of tact blocks is
similarly questionable).</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutTacticIncrementality" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutTacticReuse"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L442-L450">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutTacticReuse"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutTacticReuse</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadWithReaderOf">MonadWithReaderOf</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Data/Options.html#Lean.MonadOptions">Lean.MonadOptions</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(cond : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(act : <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Disables incremental tactic reuse for <code>act</code> if <code><a href="../.././Init/Prelude.html#cond">cond</a></code> is true.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutTacticReuse" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElabResult"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L452-L452">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabResult</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabResult">Lean.Elab.Term.TermElabResult</a> <span class="fn">α</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#EStateM.Result">EStateM.Result</a> <a href="../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a> <span class="fn">α</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElabResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.observing"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L461-L476">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.observing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">observing</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabResult">Lean.Elab.Term.TermElabResult</a> <span class="fn">α</span>)</span></span></div></div><p>Execute <code>x</code>, save resulting expression and new state.
We remove any <code>Info</code> created by <code>x</code>.
The info nodes are committed when we execute <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyResult">applyResult</a></code>.
We use <code><a href="../.././Init/Control/Except.html#observing">observing</a></code> to implement overloaded notation and decls.
We want to save <code>Info</code> nodes for the chosen alternative.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.observing" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.applyResult"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L481-L484">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyResult</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(result : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabResult">Lean.Elab.Term.TermElabResult</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Apply the result/exception and state captured with <code><a href="../.././Init/Control/Except.html#observing">observing</a></code>.
We use this method to implement overloaded notation and symbols.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyResult">Lean.Elab.Term.applyResult</a> <span class="fn">result</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">result</span> with
  | <span class="fn"><a href="../.././Init/Prelude.html#EStateM.Result.ok">EStateM.Result.ok</a> <span class="fn">a</span> <span class="fn">r</span></span> =&gt; <span class="fn">do
    <span class="fn"><span class="fn"><span class="fn">r</span>.restore</span> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
    <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">a</span></span></span>
  | <span class="fn"><a href="../.././Init/Prelude.html#EStateM.Result.error">EStateM.Result.error</a> <span class="fn">ex</span> <span class="fn">r</span></span> =&gt; <span class="fn">do
    <span class="fn"><span class="fn"><span class="fn">r</span>.restore</span> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>
    <span class="fn"><a href="../.././Init/Prelude.html#MonadExcept.throw">throw</a> <span class="fn">ex</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.applyResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.commitIfDidNotPostpone"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L490-L493">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.commitIfDidNotPostpone"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">commitIfDidNotPostpone</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code>, but keep state modifications only if <code>x</code> did not postpone.
This method is useful to implement elaboration functions that cannot decide whether
they need to postpone or not without updating the state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.commitIfDidNotPostpone">Lean.Elab.Term.commitIfDidNotPostpone</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">r</span> ← <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.observing">Lean.Elab.Term.observing</a> <span class="fn">x</span></span>
  <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyResult">Lean.Elab.Term.applyResult</a> <span class="fn">r</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.commitIfDidNotPostpone" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getLevelNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L498-L499">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getLevelNames</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span></div></div><p>Return the universe level names explicitly provided by the user.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getLevelNames">Lean.Elab.Term.getLevelNames</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">get</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.levelNames</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.getLevelNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getFVarLocalDecl!"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L505-L508">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getFVarLocalDecl!"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getFVarLocalDecl!</span></a></span><span class="decl_args">
<span class="fn">(fvar : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/LocalContext.html#Lean.LocalDecl">Lean.LocalDecl</a></span></div></div><p>Given a free variable <code>fvar</code>, return its declaration.
This function panics if <code>fvar</code> is not a free variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.getFVarLocalDecl!" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instAddErrorMessageContextTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L510-L516">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instAddErrorMessageContextTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instAddErrorMessageContextTermElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Exception.html#Lean.AddErrorMessageContext">Lean.AddErrorMessageContext</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutSavingRecAppSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L521-L522">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutSavingRecAppSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutSavingRecAppSyntax</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> without storing <code>Syntax</code> for recursive applications. See <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.saveRecAppSyntax">saveRecAppSyntax</a></code> field at <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Context</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutSavingRecAppSyntax" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkTermElabAttributeUnsafe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L524-L525">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTermElabAttributeUnsafe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermElabAttributeUnsafe</span></a></span><span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">Lean.KeyedDeclsAttribute</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTermElabAttributeUnsafe">Lean.Elab.Term.mkTermElabAttributeUnsafe</a> <span class="fn">ref</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/Util.html#Lean.Elab.mkElabAttribute">Lean.Elab.mkElabAttribute</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a> <span class="fn">`builtin_term_elab</span> <span class="fn">`term_elab</span> <span class="fn">`Lean.Parser.Term</span>
    <span class="fn">`Lean.Elab.Term.TermElab</span> <span class="fn">&quot;term&quot;</span> <span class="fn">ref</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkTermElabAttributeUnsafe" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkTermElabAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L528-L528">source</a></div><div class="attributes">@[implemented_by Lean.Elab.Term.mkTermElabAttributeUnsafe]</div>
<div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTermElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermElabAttribute</span></a></span><span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<a href="../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">Lean.KeyedDeclsAttribute</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a>)</span></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.termElabAttribute"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L530-L530">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.termElabAttribute"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">termElabAttribute</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/KeyedDeclsAttribute.html#Lean.KeyedDeclsAttribute">Lean.KeyedDeclsAttribute</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.LVal"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L538-L542">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Auxiliary datatype for presenting a Lean lvalue modifier.
We represent an unelaborated lvalue as a <code>Syntax</code> (or <code>Expr</code>) and <code><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">LVal</a></code>.
Example: <code>a.foo.1</code> is represented as the <code>Syntax</code> <code>a</code> and the list
<code>[LVal.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.fieldName">fieldName</a> &quot;foo&quot;, <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.fieldIdx">LVal.fieldIdx</a> 1]</code>.</p><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.LVal.fieldIdx">fieldIdx: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">Nat</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">Lean.Elab.Term.LVal</a></span></span></li><li class="constructor" id="Lean.Elab.Term.LVal.fieldName">fieldName: <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Init/Prelude.html#String">String</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">Lean.Elab.Term.LVal</a></span></span></span></span><div class="inductive_ctor_doc"><p>Field <code>suffix?</code> is for producing better error messages because <code>x.y</code> may be a field access or a hierarchical/composite name.
<code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.ref">ref</a></code> is the syntax object representing the field. <code>fullRef</code> includes the LHS.</p></div></li></ul><details id="instances-for-list-Lean.Elab.Term.LVal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.LVal.getRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L544-L546">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.getRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span>.<span class="name">getRef</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">Lean.Elab.Term.LVal</a> → <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.getRef</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.fieldIdx">Lean.Elab.Term.LVal.fieldIdx</a> <span class="fn">ref</span> <span class="fn">i</span></span> =&gt; <span class="fn">ref</span>
  | <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.fieldName">Lean.Elab.Term.LVal.fieldName</a> <span class="fn">ref</span> <span class="fn">name</span> <span class="fn">suffix?</span> <span class="fn">fullRef</span></span> =&gt; <span class="fn">ref</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.LVal.getRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.LVal.isFieldName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L548-L550">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.isFieldName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">LVal</span>.<span class="name">isFieldName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">Lean.Elab.Term.LVal</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.isFieldName</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal.fieldName">Lean.Elab.Term.LVal.fieldName</a> <span class="fn">ref</span> <span class="fn">name</span> <span class="fn">suffix?</span> <span class="fn">fullRef</span></span> =&gt; <a href="../.././Init/Prelude.html#Bool.true">true</a>
  | <span class="fn">x</span> =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.LVal.isFieldName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instToStringLVal"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L552-L555">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instToStringLVal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instToStringLVal</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LVal">Lean.Elab.Term.LVal</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getDeclName?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L558-L558">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getDeclName?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getDeclName?</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span></div></div><p>Return the name of the declaration being elaborated if available.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getDeclName?">Lean.Elab.Term.getDeclName?</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">read</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.declName?</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.getDeclName?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getLetRecsToLift"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L560-L560">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getLetRecsToLift"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getLetRecsToLift</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift">Lean.Elab.Term.LetRecToLift</a>)</span></span></div></div><p>Return the list of nested <code>let rec</code> declarations that need to be lifted.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getLetRecsToLift">Lean.Elab.Term.getLetRecsToLift</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">get</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">__do_lift</span>.letRecsToLift</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.getLetRecsToLift" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getMVarDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L562-L562">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getMVarDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getMVarDecl</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/MetavarContext.html#Lean.MetavarDecl">Lean.MetavarDecl</a></span></div></div><p>Return the declaration of the given metavariable</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getMVarDecl">Lean.Elab.Term.getMVarDecl</a> <span class="fn">mvarId</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.getMCtx</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span>.getDecl</span> <span class="fn">mvarId</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.getMVarDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instMonadParentDeclTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L564-L565">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadParentDeclTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadParentDeclTermElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.MonadParentDecl">Lean.Elab.MonadParentDecl</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadParentDeclTermElabM">Lean.Elab.Term.instMonadParentDeclTermElabM</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">getParentDeclName?</span> := <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getDeclName?">Lean.Elab.Term.getDeclName?</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withDeclName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L568-L569">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withDeclName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withDeclName</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(name : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>withSaveParentDeclInfoContext x</code> with <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.declName?">declName?</a> := name</code>. See <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getDeclName?">getDeclName?</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withDeclName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.setLevelNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L572-L573">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.setLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">setLevelNames</span></a></span><span class="decl_args">
<span class="fn">(levelNames : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Update the universe level parameter names.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.setLevelNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withLevelNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L576-L579">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withLevelNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withLevelNames</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(levelNames : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> using <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.levelNames">levelNames</a></code> as the universe level parameter names. See <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getLevelNames">getLevelNames</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withLevelNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withAuxDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L585-L588">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withAuxDecl"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAuxDecl</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(shortDeclName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(declName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Declare an auxiliary local declaration <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.shortDeclName">shortDeclName</a> : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.type">type</a></code> for elaborating recursive declaration <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.declName">declName</a></code>,
update the mapping <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.auxDeclToFullName">auxDeclToFullName</a></code>, and then execute <code>k</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withAuxDecl" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutErrToSorryImp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L590-L591">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutErrToSorryImp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutErrToSorryImp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutErrToSorryImp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutErrToSorry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L597-L598">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutErrToSorry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutErrToSorry</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadFunctorT">MonadFunctorT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span></div></div><p>Execute <code>x</code> without converting errors (i.e., exceptions) to <code>sorry</code> applications.
Recall that when <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a> = true</code>, the method <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">elabTerm</a></code> catches exceptions and converts them into <code>sorry</code> applications.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Elab.Term.withoutErrToSorry</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#MonadFunctorT.monadMap">monadMap</a> <span class="fn">fun {<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>} =&gt; <span class="fn">Lean.Elab.Term.withoutErrToSorryImp</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutErrToSorry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutHeedElabAsElimImp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L600-L601">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutHeedElabAsElimImp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutHeedElabAsElimImp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutHeedElabAsElimImp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutHeedElabAsElim"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L608-L609">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutHeedElabAsElim"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutHeedElabAsElim</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadFunctorT">MonadFunctorT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span></div></div><p>Execute <code>x</code> without heeding the <code>elab_as_elim</code> attribute. Useful when there is
no expected type (so <code>elabAppArgs</code> would fail), but expect that the user wants
to use such constants.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Elab.Term.withoutHeedElabAsElim</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#MonadFunctorT.monadMap">monadMap</a> <span class="fn">fun {<span class="fn">β</span> : <a href="../.././foundational_types.html">Type</a>} =&gt; <span class="fn">Lean.Elab.Term.withoutHeedElabAsElimImp</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutHeedElabAsElim" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L618-L625">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutModifyingElabMetaStateWithInfo</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> but discard changes performed at <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Term.State</a></code> and <code>Meta.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">State</a></code>.
Recall that the <code>Environment</code> and <code>InfoState</code> are at <code>Core.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">State</a></code>. Thus, any updates to it will
be preserved. This method is useful for performing computations where all
metavariable must be resolved or discarded.
The <code>InfoTree</code>s are not discarded, however, and wrapped in <code>InfoTree.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Context</a></code>
to store their metavariable context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo">Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">s</span> ← <span class="fn">get</span>
  let <span class="fn">sMeta</span> ← <span class="fn"><a href="../.././Init/Prelude.html#getThe">getThe</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.State">Lean.Meta.State</a></span>
  <span class="fn"><a href="../.././Init/Control/Except.html#tryFinally">tryFinally</a> <span class="fn">(<a href="../.././Lean/Elab/InfoTree/Main.html#Lean.Elab.withSaveInfoContext">Lean.Elab.withSaveInfoContext</a> <span class="fn">x</span>)</span> <span class="fn">do
      <span class="fn"><a href="../.././Init/Prelude.html#MonadStateOf.set">set</a> <span class="fn">s</span></span>
      <span class="fn"><a href="../.././Init/Prelude.html#MonadStateOf.set">set</a> <span class="fn">sMeta</span></span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutModifyingElabMetaStateWithInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getInfoTreeWithContext?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L649-L662">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getInfoTreeWithContext?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getInfoTreeWithContext?</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree">Lean.Elab.InfoTree</a>)</span></span></div></div><p>Wraps the trees returned from <code>getInfoTrees</code>, if any, in an <code>InfoTree.context</code> node based on the
current monadic context and state. This is mainly used to report info trees early via
<code>Snapshot.infoTree?</code>. The trees are not removed from the <code>getInfoTrees</code> state as the final info tree
of the elaborated command should be complete and not depend on whether parts have been reported
early.</p><p>As <code>InfoTree.context</code> can have only one child, this function panics if <code>trees</code> contains more than 1
tree. Also, <code>PartialContextInfo.parentDeclCtx</code> is not currently generated as that information is not
available in the monadic context and only needed for the final info tree.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.getInfoTreeWithContext?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.throwErrorIfErrors"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L665-L667">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.throwErrorIfErrors"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwErrorIfErrors</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>For testing <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">TermElabM</a></code> methods. The #eval command will sign the error.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.throwErrorIfErrors">Lean.Elab.Term.throwErrorIfErrors</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.MonadLog.hasErrors</span>
  <span class="fn">if <span class="fn"><span class="fn">__do_lift</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../.././Lean/Exception.html#Lean.throwError">Lean.throwError</a> <span class="fn">(<a href="../.././Lean/Message.html#Lean.ToMessageData.toMessageData">Lean.toMessageData</a> <span class="fn">&quot;Error(s)&quot;</span>)</span></span> else <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.throwErrorIfErrors" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.traceAtCmdPos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L669-L670">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.traceAtCmdPos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">traceAtCmdPos</span></a></span><span class="decl_args">
<span class="fn">(cls : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <span class="fn"><a href="../.././Init/Prelude.html#Unit">Unit</a> → <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.traceAtCmdPos">Lean.Elab.Term.traceAtCmdPos</a> <span class="fn">cls</span> <span class="fn">msg</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.withRef">Lean.withRef</a> <a href="../.././Init/Prelude.html#Lean.Syntax.missing">Lean.Syntax.missing</a> <span class="fn">(<a href="../.././Lean/Util/Trace.html#Lean.trace">Lean.trace</a> <span class="fn">cls</span> <span class="fn">msg</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.traceAtCmdPos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ppGoal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L672-L673">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ppGoal"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ppGoal</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Data/Format/Basic.html#Std.Format">Lean.Format</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ppGoal">Lean.Elab.Term.ppGoal</a> <span class="fn">mvarId</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../.././Lean/Meta/PPGoal.html#Lean.Meta.ppGoal">Lean.Meta.ppGoal</a> <span class="fn">mvarId</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.ppGoal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.liftLevelM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L677-L684">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.liftLevelM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">liftLevelM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Level.html#Lean.Elab.Level.LevelElabM">Lean.Elab.Level.LevelElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.liftLevelM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabLevel"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L686-L687">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabLevel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabLevel</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabLevel">Lean.Elab.Term.elabLevel</a> <span class="fn">stx</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.liftLevelM">Lean.Elab.Term.liftLevelM</a> <span class="fn">(<a href="../.././Lean/Elab/Level.html#Lean.Elab.Level.elabLevel">Lean.Elab.Level.elabLevel</a> <span class="fn">stx</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.elabLevel" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withPushMacroExpansionStack"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L690-L691">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withPushMacroExpansionStack"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withPushMacroExpansionStack</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(beforeStx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(afterStx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Elaborate <code>x</code> with <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> on the macro stack</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withPushMacroExpansionStack" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withMacroExpansion"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L694-L696">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withMacroExpansion"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withMacroExpansion</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(beforeStx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(afterStx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Elaborate <code>x</code> with <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> on the macro stack and produce macro expansion info</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withMacroExpansion">Lean.Elab.Term.withMacroExpansion</a> <span class="fn">beforeStx</span> <span class="fn">afterStx</span> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/InfoTree/Main.html#Lean.Elab.withMacroExpansionInfo">Lean.Elab.withMacroExpansionInfo</a> <span class="fn">beforeStx</span> <span class="fn">afterStx</span> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withPushMacroExpansionStack">Lean.Elab.Term.withPushMacroExpansionStack</a> <span class="fn">beforeStx</span> <span class="fn">afterStx</span> <span class="fn">x</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.withMacroExpansion" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerSyntheticMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L701-L702">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerSyntheticMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerSyntheticMVar</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add the given metavariable to the list of pending synthetic metavariables.
The method <code>synthesizeSyntheticMVars</code> is used to process the metavariables on this list.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerSyntheticMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerSyntheticMVarWithCurrRef"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L704-L705">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerSyntheticMVarWithCurrRef"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerSyntheticMVarWithCurrRef</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind">Lean.Elab.Term.SyntheticMVarKind</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerSyntheticMVarWithCurrRef">Lean.Elab.Term.registerSyntheticMVarWithCurrRef</a> <span class="fn">mvarId</span> <span class="fn">kind</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.getRef</span>
  <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerSyntheticMVar">Lean.Elab.Term.registerSyntheticMVar</a> <span class="fn">__do_lift</span> <span class="fn">mvarId</span> <span class="fn">kind</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerSyntheticMVarWithCurrRef" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerMVarErrorInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L707-L708">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorInfo</span></a></span><span class="decl_args">
<span class="fn">(mvarErrorInfo : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">Lean.Elab.Term.MVarErrorInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerMVarErrorInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerMVarErrorHoleInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L710-L711">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorHoleInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorHoleInfo</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorHoleInfo">Lean.Elab.Term.registerMVarErrorHoleInfo</a> <span class="fn">mvarId</span> <span class="fn">ref</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorInfo">Lean.Elab.Term.registerMVarErrorInfo</a> <span class="fn">{ <span class="fn">mvarId</span> := <span class="fn">mvarId</span>, <span class="fn">ref</span> := <span class="fn">ref</span>, <span class="fn">kind</span> := <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind.hole">Lean.Elab.Term.MVarErrorKind.hole</a> }</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerMVarErrorHoleInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerMVarErrorImplicitArgInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L713-L714">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorImplicitArgInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorImplicitArgInfo</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(app : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorImplicitArgInfo">Lean.Elab.Term.registerMVarErrorImplicitArgInfo</a> <span class="fn">mvarId</span> <span class="fn">ref</span> <span class="fn">app</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorInfo">Lean.Elab.Term.registerMVarErrorInfo</a>
    <span class="fn">{ <span class="fn">mvarId</span> := <span class="fn">mvarId</span>, <span class="fn">ref</span> := <span class="fn">ref</span>, <span class="fn">kind</span> := <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind.implicitArg">Lean.Elab.Term.MVarErrorKind.implicitArg</a> <span class="fn">app</span></span> }</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerMVarErrorImplicitArgInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerMVarErrorCustomInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L716-L717">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorCustomInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarErrorCustomInfo</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(msgData : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorCustomInfo">Lean.Elab.Term.registerMVarErrorCustomInfo</a> <span class="fn">mvarId</span> <span class="fn">ref</span> <span class="fn">msgData</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorInfo">Lean.Elab.Term.registerMVarErrorInfo</a>
    <span class="fn">{ <span class="fn">mvarId</span> := <span class="fn">mvarId</span>, <span class="fn">ref</span> := <span class="fn">ref</span>, <span class="fn">kind</span> := <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorKind.custom">Lean.Elab.Term.MVarErrorKind.custom</a> <span class="fn">msgData</span></span> }</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerMVarErrorCustomInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerCustomErrorIfMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L719-L722">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerCustomErrorIfMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerCustomErrorIfMVar</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(msgData : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerCustomErrorIfMVar">Lean.Elab.Term.registerCustomErrorIfMVar</a> <span class="fn">e</span> <span class="fn">ref</span> <span class="fn">msgData</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn"><span class="fn">e</span>.getAppFn</span> with
  | <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.mvar">Lean.Expr.mvar</a> <span class="fn">mvarId</span></span> =&gt; <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarErrorCustomInfo">Lean.Elab.Term.registerMVarErrorCustomInfo</a> <span class="fn">mvarId</span> <span class="fn">ref</span> <span class="fn">msgData</span></span>
  | <span class="fn">x</span> =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Unit.unit">()</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerCustomErrorIfMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.registerMVarArgName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L724-L725">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.registerMVarArgName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">registerMVarArgName</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(argName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.registerMVarArgName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.throwMVarError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L732-L736">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.throwMVarError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwMVarError</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(m : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Auxiliary method for reporting errors of the form &quot;... contains metavariables ...&quot;.
This kind of error is thrown, for example, at <code>Match.lean</code> where elaboration
cannot continue if there are metavariables in patterns.
We only want to log it if we haven't logged any errors so far.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.throwMVarError">Lean.Elab.Term.throwMVarError</a> <span class="fn">m</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.MonadLog.hasErrors</span>
  <span class="fn">if <span class="fn"><span class="fn">__do_lift</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">Lean.Elab.throwAbortTerm</span> else <span class="fn"><a href="../.././Lean/Exception.html#Lean.throwError">Lean.throwError</a> <span class="fn">m</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.throwMVarError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.MVarErrorInfo.logError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L738-L762">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.logError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span></a></span><span class="decl_args">
<span class="fn">(mvarErrorInfo : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">Lean.Elab.Term.MVarErrorInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(extraMsg? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.MVarErrorInfo.logError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.MVarErrorInfo.logError.addArgName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L754-L757">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.logError.addArgName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span>.<span class="name">addArgName</span></a></span><span class="decl_args">
<span class="fn">(mvarErrorInfo : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo">Lean.Elab.Term.MVarErrorInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args">
<span class="fn">(extra : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#String">String</a> <span class="fn">&quot;&quot;</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span></div></div><p>Append the argument name (if available) to the message.
Remark: if the argument name contains macro scopes we do not append it.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.MVarErrorInfo.logError.addArgName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.MVarErrorInfo.logError.appendExtra"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L759-L762">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.logError.appendExtra"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">MVarErrorInfo</span>.<span class="name">logError</span>.<span class="name">appendExtra</span></a></span><span class="decl_args">
<span class="fn">(extraMsg? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.logError.appendExtra">Lean.Elab.Term.MVarErrorInfo.logError.appendExtra</a> <span class="fn">extraMsg?</span> <span class="fn">msg</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">extraMsg?</span> with
  | <span class="fn">none</span> =&gt; <span class="fn">msg</span>
  | <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">extraMsg</span></span> =&gt; <span class="fn"><span class="fn">msg</span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">extraMsg</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.MVarErrorInfo.logError.appendExtra" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.logUnassignedUsingErrorInfos"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L771-L795">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.logUnassignedUsingErrorInfos"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">logUnassignedUsingErrorInfos</span></a></span><span class="decl_args">
<span class="fn">(pendingMVarIds : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(extraMsg? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Try to log errors for the unassigned metavariables <code>pendingMVarIds</code>.</p><p>Return <code>true</code> if there were &quot;unfilled holes&quot;, and we should &quot;abort&quot; declaration.
TODO: try to fill &quot;all&quot; holes using synthetic &quot;sorry's&quot;</p><p>Remark: We only log the &quot;unfilled holes&quot; as new errors if no error has been logged so far.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.logUnassignedUsingErrorInfos" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ensureNoUnassignedMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L798-L801">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ensureNoUnassignedMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureNoUnassignedMVars</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../.././Lean/Declaration.html#Lean.Declaration">Lean.Declaration</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Ensure metavariables registered using <code>registerMVarErrorInfos</code> (and used in the given declaration) have been assigned.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.ensureNoUnassignedMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutPostponing"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L806-L807">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutPostponing"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutPostponing</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> without allowing it to postpone elaboration tasks.
That is, <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone">tryPostpone</a></code> is a noop.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutPostponing" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkExplicitBinder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L810-L811">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkExplicitBinder"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkExplicitBinder</span></a></span><span class="decl_args">
<span class="fn">(ident : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(type : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></div><p>Creates syntax for <code>(</code> &lt;ident&gt; <code>:</code> &lt;type&gt; <code>)</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkExplicitBinder" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.levelMVarToParam"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L816-L822">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.levelMVarToParam"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">levelMVarToParam</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(except : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Lean/Level.html#Lean.LMVarId">Lean.LMVarId</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lean/Level.html#Lean.LMVarId">Lean.LMVarId</a>) =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Convert unassigned universe level metavariables into parameters.
The new parameter names are fresh names of the form <code>u_i</code> with regard to <code>ctx.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.levelNames">levelNames</a></code>, which is updated with the new names.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.levelMVarToParam" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkFreshBinderName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L827-L828">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkFreshBinderName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkFreshBinderName</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Lean.MonadQuotation">Lean.MonadQuotation</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></div><p>Auxiliary method for creating fresh binder names.
Do not confuse with the method for creating fresh free/meta variable ids.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Lean.Elab.Term.mkFreshBinderName</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.MonadQuotation.withFreshMacroScope">Lean.withFreshMacroScope</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.MonadQuotation.addMacroScope">Lean.MonadQuotation.addMacroScope</a> <span class="fn">`x</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkFreshBinderName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkFreshIdent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L834-L835">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkFreshIdent"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkFreshIdent</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Lean.MonadQuotation">Lean.MonadQuotation</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(canonical : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Meta.html#Lean.Syntax.Ident">Lean.Ident</a></span></div></div><p>Auxiliary method for creating a <code>Syntax.ident</code> containing
a fresh name. This method is intended for creating fresh binder names.
It is just a thin layer on top of <code>mkFreshUserName</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkFreshIdent">Lean.Elab.Term.mkFreshIdent</a> <span class="fn">ref</span> <span class="fn">canonical</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">Lean.Elab.Term.mkFreshBinderName</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../.././Init/Meta.html#Lean.mkIdentFrom">Lean.mkIdentFrom</a> <span class="fn">ref</span> <span class="fn">__do_lift</span> <span class="fn">canonical</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkFreshIdent" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.applyAttributesAt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L871-L872">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyAttributesAt"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyAttributesAt</span></a></span><span class="decl_args">
<span class="fn">(declName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(attrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Attributes.html#Lean.Elab.Attribute">Lean.Elab.Attribute</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(applicationTime : <a href="../.././Lean/Attributes.html#Lean.AttributeApplicationTime">Lean.AttributeApplicationTime</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Apply given attributes <strong>at</strong> a given application time</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyAttributesAt">Lean.Elab.Term.applyAttributesAt</a> <span class="fn">declName</span> <span class="fn">attrs</span> <span class="fn">applicationTime</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Term.applyAttributesCore">Lean.Elab.Term.applyAttributesCore</a> <span class="fn">declName</span> <span class="fn">attrs</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">applicationTime</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.applyAttributesAt" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.applyAttributes"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L874-L875">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyAttributes"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">applyAttributes</span></a></span><span class="decl_args">
<span class="fn">(declName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(attrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Elab/Attributes.html#Lean.Elab.Attribute">Lean.Elab.Attribute</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.applyAttributes">Lean.Elab.Term.applyAttributes</a> <span class="fn">declName</span> <span class="fn">attrs</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Term.applyAttributesCore">Lean.Elab.Term.applyAttributesCore</a> <span class="fn">declName</span> <span class="fn">attrs</span> <span class="fn">none</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.applyAttributes" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkTypeMismatchError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L877-L881">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTypeMismatchError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTypeMismatchError</span></a></span><span class="decl_args">
<span class="fn">(header? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(eType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkTypeMismatchError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.throwTypeMismatchError"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L883-L902">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.throwTypeMismatchError"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">throwTypeMismatchError</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(header? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(eType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(f? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(_extraMsg? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.throwTypeMismatchError" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withoutMacroStackAtErr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L904-L905">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutMacroStackAtErr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutMacroStackAtErr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutMacroStackAtErr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ContainsPendingMVar.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L909-L909">source</a></div><div class="attributes">@[reducible, inline]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ContainsPendingMVar.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ContainsPendingMVar</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ContainsPendingMVar.M">Lean.Elab.Term.ContainsPendingMVar.M</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Util/MonadCache.html#Lean.MonadCacheT">Lean.MonadCacheT</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Unit">Unit</a> <span class="fn">(<a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.ContainsPendingMVar.M" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ContainsPendingMVar.visit"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L912-L933">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ContainsPendingMVar.visit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ContainsPendingMVar</span>.<span class="name">visit</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ContainsPendingMVar.M">Lean.Elab.Term.ContainsPendingMVar.M</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>See <code>containsPostponedTerm</code></p></div></div><div class="decl" id="Lean.Elab.Term.containsPendingMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L938-L941">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.containsPendingMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">containsPendingMVar</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Return <code>true</code> if <code>e</code> contains a pending metavariable. Remark: it also visits let-declarations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.containsPendingMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.synthesizeInstMVarCore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L954-L999">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.synthesizeInstMVarCore"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">synthesizeInstMVarCore</span></a></span><span class="decl_args">
<span class="fn">(instMVar : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args">
<span class="fn">(maxResultSize? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Nat">Nat</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(extraErrorMsg? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Try to synthesize metavariable using type class resolution.
This method assumes the local context and local instances of <code>instMVar</code> coincide
with the current local context and local instances.
Return <code>true</code> if the instance was synthesized successfully, and <code>false</code> if
the instance contains unassigned metavariables that are blocking the type class
resolution procedure. Throw an exception if resolution or assignment irrevocably fails.</p><p>If <code>extraErrorMsg?</code> is not none, it contains additional information that should be attached
to type class synthesis failures.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.synthesizeInstMVarCore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkCoe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1001-L1014">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkCoe"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkCoe</span></a></span><span class="decl_args">
<span class="fn">(expectedType : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(f? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(errorMsgHeader? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkCoe" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ensureHasType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1021-L1027">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ensureHasType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureHasType</span></a></span><span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(errorMsgHeader? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>If <code>expectedType?</code> is <code>some t</code>, then ensures <code>t</code> and <code>eType</code> are definitionally equal by inserting a coercion if necessary.</p><p>Argument <code>f?</code> is used only for generating error messages when inserting coercions fails.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.ensureHasType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.exceptionToSorry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1043-L1046">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.exceptionToSorry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">exceptionToSorry</span></a></span><span class="decl_args">
<span class="fn">(ex : <a href="../.././Lean/Exception.html#Lean.Exception">Lean.Exception</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Log the given exception, and create a synthetic sorry for representing the failed
elaboration step with exception <code>ex</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.exceptionToSorry">Lean.Elab.Term.exceptionToSorry</a> <span class="fn">ex</span> <span class="fn">expectedType?</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">syntheticSorry</span> ← <span class="fn"><a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Term.mkSyntheticSorryFor">Lean.Elab.Term.mkSyntheticSorryFor</a> <span class="fn">expectedType?</span></span>
  <span class="fn"><a href="../.././Lean/Elab/Util.html#Lean.Elab.logException">Lean.Elab.logException</a> <span class="fn">ex</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">syntheticSorry</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.exceptionToSorry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.tryPostpone"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1049-L1051">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostpone</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.mayPostpone">mayPostpone</a> == true</code>, throw <code>Expection.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone">Lean.Elab.Term.tryPostpone</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">read</span>
  <span class="fn">if <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.mayPostpone</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">Lean.Elab.throwPostpone</span> else <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.tryPostpone" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.isMVarApp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1054-L1055">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isMVarApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isMVarApp</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Return <code>true</code> if <code>e</code> reduces (by unfolding only <code>[reducible]</code> declarations) to <code>?m ...</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isMVarApp">Lean.Elab.Term.isMVarApp</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../.././Lean/Meta/Basic.html#Lean.Meta.whnfR">Lean.Meta.whnfR</a> <span class="fn">e</span>)</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn"><span class="fn">__do_lift</span>.getAppFn</span>.isMVar</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.isMVarApp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.tryPostponeIfMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1058-L1060">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfMVar</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.mayPostpone">mayPostpone</a> == true</code> and <code>e</code>'s head is a metavariable, throw <code>Exception.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfMVar">Lean.Elab.Term.tryPostponeIfMVar</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isMVarApp">Lean.Elab.Term.isMVarApp</a> <span class="fn">e</span></span>
  <span class="fn">if <span class="fn"><span class="fn">__do_lift</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone">Lean.Elab.Term.tryPostpone</a> else <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.tryPostponeIfMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.tryPostponeIfNoneOrMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1063-L1066">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfNoneOrMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfNoneOrMVar</span></a></span><span class="decl_args">
<span class="fn">(e? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>If <code>e? = some e</code>, then <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfMVar">tryPostponeIfMVar</a> e</code>, otherwise it is just <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone">tryPostpone</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfNoneOrMVar">Lean.Elab.Term.tryPostponeIfNoneOrMVar</a> <span class="fn">e?</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">e?</span> with
  | <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">e</span></span> =&gt; <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfMVar">Lean.Elab.Term.tryPostponeIfMVar</a> <span class="fn">e</span></span>
  | <span class="fn">none</span> =&gt; <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostpone">Lean.Elab.Term.tryPostpone</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.tryPostponeIfNoneOrMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.tryPostponeIfHasMVars?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1072-L1079">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfHasMVars?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfHasMVars?</span></a></span><span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Throws <code>Exception.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code>, if <code>expectedType?</code> contains unassigned metavariables.
It is a noop if <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.mayPostpone">mayPostpone</a> == false</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.tryPostponeIfHasMVars?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.tryPostponeIfHasMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1085-L1088">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.tryPostponeIfHasMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">tryPostponeIfHasMVars</span></a></span><span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Throws <code>Exception.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code>, if <code>expectedType?</code> contains unassigned metavariables.
If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.mayPostpone">mayPostpone</a> == false</code>, it throws error <code>msg</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.tryPostponeIfHasMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withExpectedType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1090-L1094">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withExpectedType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withExpectedType</span></a></span><span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withExpectedType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.saveContext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1099-L1107">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.saveContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">saveContext</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext">Lean.Elab.Term.SavedContext</a></span></div></div><p>Save relevant context for term elaboration postponement.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.saveContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withSavedContext"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1112-L1115">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withSavedContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withSavedContext</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(savedCtx : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext">Lean.Elab.Term.SavedContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> with the context saved using <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.saveContext">saveContext</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withSavedContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.getSyntheticMVarDecl?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1128-L1129">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getSyntheticMVarDecl?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">getSyntheticMVarDecl?</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl">Lean.Elab.Term.SyntheticMVarDecl</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.getSyntheticMVarDecl?">Lean.Elab.Term.getSyntheticMVarDecl?</a> <span class="fn">mvarId</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn">get</span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<a href="../.././Lean/Data/RBMap.html#Lean.RBMap.find?">Lean.RBMap.find?</a> <span class="fn"><span class="fn">__do_lift</span>.syntheticMVars</span> <span class="fn">mvarId</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.getSyntheticMVarDecl?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkSaveInfoAnnotation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1148-L1152">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkSaveInfoAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkSaveInfoAnnotation</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></div><p>Create an auxiliary annotation to make sure we create an <code>Info</code> even if <code>e</code> is a metavariable.
See <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTermInfo">mkTermInfo</a></code>.</p><p>We use this function because some elaboration functions elaborate subterms that may not be immediately
part of the resulting term. Example:</p><pre><code>let_mvar% ?m := b; wait_if_type_mvar% ?m; body
</code></pre><p>If the type of <code>b</code> is not known, then <code>wait_if_type_mvar% ?m; body</code> is postponed and just returns a fresh
metavariable <code>?n</code>. The elaborator for</p><pre><code>let_mvar% ?m := b; wait_if_type_mvar% ?m; body
</code></pre><p>returns <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkSaveInfoAnnotation">mkSaveInfoAnnotation</a> ?n</code> to make sure the info nodes created when elaborating <code>b</code> are &quot;saved&quot;.
This is a bit hackish, but elaborators like <code>let_mvar%</code> are rare.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkSaveInfoAnnotation">Lean.Elab.Term.mkSaveInfoAnnotation</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">if <span class="fn"><span class="fn"><span class="fn">e</span>.isMVar</span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="../.././Lean/Expr.html#Lean.mkAnnotation">Lean.mkAnnotation</a> <span class="fn">`save_info</span> <span class="fn">e</span></span> else <span class="fn">e</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkSaveInfoAnnotation" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.isSaveInfoAnnotation?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1154-L1155">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isSaveInfoAnnotation?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isSaveInfoAnnotation?</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isSaveInfoAnnotation?">Lean.Elab.Term.isSaveInfoAnnotation?</a> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Expr.html#Lean.annotation?">Lean.annotation?</a> <span class="fn">`save_info</span> <span class="fn">e</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.isSaveInfoAnnotation?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.removeSaveInfoAnnotation"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1157-L1160">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.removeSaveInfoAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">removeSaveInfoAnnotation</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></div></div></div><div class="decl" id="Lean.Elab.Term.isTacticOrPostponedHole?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1167-L1174">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isTacticOrPostponedHole?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isTacticOrPostponedHole?</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><p>Return <code>some <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.MVarErrorInfo.mvarId">mvarId</a></code> if <code>e</code> corresponds to a hole that is going to be filled &quot;later&quot; by executing a tactic or resuming elaboration.</p><p>We do not save <code>ofTermInfo</code> for this kind of node in the <code>InfoTree</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.isTacticOrPostponedHole?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1176-L1181">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkTermInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkTermInfo</span></a></span><span class="decl_args">
<span class="fn">(elaborator : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(lctx? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(isBinder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.Info">Lean.Elab.Info</a> <a href="../.././Init/Core.html#Sum">⊕</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.addTermInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1198-L1205">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addTermInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addTermInfo</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(lctx? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(elaborator : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> <a href="../.././Init/Prelude.html#Lean.Name.anonymous">Lean.Name.anonymous</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(isBinder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(force : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Pushes a new leaf node to the info tree associating the expression <code>e</code> to the syntax <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>.
As a result, when the user hovers over <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> they will see the type of <code>e</code>, and if <code>e</code>
is a constant they will see the constant's doc string.</p><ul>
<li><code>expectedType?</code>: the expected type of <code>e</code> at the point of elaboration, if available</li>
<li><code>lctx?</code>: the local context in which to interpret <code>e</code> (otherwise it will use <code>← getLCtx</code>)</li>
<li><code>elaborator</code>: a declaration name used as an alternative target for go-to-definition</li>
<li><code>isBinder</code>: if true, this will be treated as defining <code>e</code> (which should be a local constant)
for the purpose of go-to-definition on local variables</li>
<li><code>force</code>: In patterns, the effect of <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addTermInfo">addTermInfo</a></code> is usually suppressed and replaced
by a <code>patternWithRef?</code> annotation which will be turned into a term info on the
post-match-elaboration expression. This flag overrides that behavior and adds the term
info immediately. (See <a href="https://github.com/leanprover/lean4/pull/1664">https://github.com/leanprover/lean4/pull/1664</a>.)</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.addTermInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.addTermInfo'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1207-L1208">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addTermInfo'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addTermInfo'</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(lctx? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(elaborator : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> <a href="../.././Init/Prelude.html#Lean.Name.anonymous">Lean.Name.anonymous</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(isBinder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addTermInfo'">Lean.Elab.Term.addTermInfo'</a> <span class="fn">stx</span> <span class="fn">e</span> <span class="fn">expectedType?</span> <span class="fn">lctx?</span> <span class="fn">elaborator</span> <span class="fn">isBinder</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Control/Basic.html#Functor.discard">discard</a> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addTermInfo">Lean.Elab.Term.addTermInfo</a> <span class="fn">stx</span> <span class="fn">e</span> <span class="fn">expectedType?</span> <span class="fn">lctx?</span> <span class="fn">elaborator</span> <span class="fn">isBinder</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.addTermInfo'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withInfoContext'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1210-L1215">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withInfoContext'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withInfoContext'</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(mkInfo : <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Lean/Elab/InfoTree/Types.html#Lean.Elab.Info">Lean.Elab.Info</a> <a href="../.././Init/Core.html#Sum">⊕</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withInfoContext'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.postponeElabTerm"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1222-L1224">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.postponeElabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">postponeElabTerm</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Postpone the elaboration of <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>, return a metavariable that acts as a placeholder, and
ensures the info tree is updated and a hole id is introduced.
When <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> is elaborated, new info nodes are created and attached to the new hole id in the info tree.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.postponeElabTerm" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instMonadMacroAdapterTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1284-L1287">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMonadMacroAdapterTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMonadMacroAdapterTermElabM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Util.html#Lean.Elab.MonadMacroAdapter">Lean.Elab.MonadMacroAdapter</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.hasNoImplicitLambdaAnnotation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1332-L1333">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.hasNoImplicitLambdaAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">hasNoImplicitLambdaAnnotation</span></a></span><span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.hasNoImplicitLambdaAnnotation">Lean.Elab.Term.hasNoImplicitLambdaAnnotation</a> <span class="fn">type</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">(<a href="../.././Lean/Expr.html#Lean.annotation?">Lean.annotation?</a> <span class="fn">`noImplicitLambda</span> <span class="fn">type</span>)</span>.isSome</span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.hasNoImplicitLambdaAnnotation" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkNoImplicitLambdaAnnotation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1335-L1339">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkNoImplicitLambdaAnnotation"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkNoImplicitLambdaAnnotation</span></a></span><span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkNoImplicitLambdaAnnotation">Lean.Elab.Term.mkNoImplicitLambdaAnnotation</a> <span class="fn">type</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.hasNoImplicitLambdaAnnotation">Lean.Elab.Term.hasNoImplicitLambdaAnnotation</a> <span class="fn">type</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">type</span> else <span class="fn"><a href="../.././Lean/Expr.html#Lean.mkAnnotation">Lean.mkAnnotation</a> <span class="fn">`noImplicitLambda</span> <span class="fn">type</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkNoImplicitLambdaAnnotation" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.blockImplicitLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1342-L1346">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.blockImplicitLambda"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">blockImplicitLambda</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Block usage of implicit lambdas if <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> is <code>@f</code> or <code>@f arg1 ...</code> or <code>fun</code> with an implicit binder annotation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.blockImplicitLambda" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveLocalName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1348-L1509">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveLocalName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveLocalName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveLocalName.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1432-L1437">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveLocalName.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(localDecl : <a href="../.././Lean/LocalContext.html#Lean.LocalDecl">Lean.LocalDecl</a>)</span></span>
<span class="decl_args">
<span class="fn">(givenNameView : <a href="../.././Init/Prelude.html#Lean.MacroScopesView">Lean.MacroScopesView</a>)</span></span>
<span class="decl_args">
<span class="fn">(fullDeclName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(ns : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/LocalContext.html#Lean.LocalDecl">Lean.LocalDecl</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveLocalName.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveLocalName.loop"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1483-L1508">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveLocalName.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveLocalName</span>.<span class="name">loop</span></a></span><span class="decl_args">
<span class="fn">(view : <a href="../.././Init/Prelude.html#Lean.MacroScopesView">Lean.MacroScopesView</a>)</span></span>
<span class="decl_args">
<span class="fn">(findLocalDecl? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.MacroScopesView">Lean.MacroScopesView</a> → <span class="fn"><a href="../.././Init/Prelude.html#Bool">Bool</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/LocalContext.html#Lean.LocalDecl">Lean.LocalDecl</a></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(projs : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(globalDeclFound : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveLocalName.loop" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.isLocalIdent?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1512-L1519">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isLocalIdent?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isLocalIdent?</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Return true iff <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> is a <code>Syntax.ident</code>, and it is a local variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.isLocalIdent?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.UseImplicitLambdaResult"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1521-L1524">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">UseImplicitLambdaResult</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="constructors"><li class="constructor" id="Lean.Elab.Term.UseImplicitLambdaResult.no">no: <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult">Lean.Elab.Term.UseImplicitLambdaResult</a></li><li class="constructor" id="Lean.Elab.Term.UseImplicitLambdaResult.yes">yes: <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult">Lean.Elab.Term.UseImplicitLambdaResult</a></span></li><li class="constructor" id="Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone: <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult">Lean.Elab.Term.UseImplicitLambdaResult</a></li></ul><details id="instances-for-list-Lean.Elab.Term.UseImplicitLambdaResult" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.addDotCompletionInfo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1647-L1648">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addDotCompletionInfo"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addDotCompletionInfo</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Store in the <code>InfoTree</code> that <code>e</code> is a &quot;dot&quot;-completion target. <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> should cover the entire term.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.addDotCompletionInfo" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabTerm"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1667-L1668">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabTerm</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(catchExPostpone : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(implicitLambda : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Main function for elaborating terms.
It extracts the elaboration methods from the environment using the node kind.
Recall that the environment has a mapping from <code>SyntaxNodeKind</code> to <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">TermElab</a></code> methods.
It creates a fresh macro scope for executing the elaboration method.
All unlogged trace messages produced by the elaboration method are logged using
the position information at <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code>. If the elaboration method throws an <code>Exception.error</code> and <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a> == true</code>,
the error is logged and a synthetic sorry expression is returned.
If the elaboration throws <code>Exception.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.UseImplicitLambdaResult.postpone">postpone</a></code> and <code>catchExPostpone == true</code>,
a new synthetic metavariable of kind <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarKind.postponed">SyntheticMVarKind.postponed</a></code> is created, registered,
and returned.
The option <code>catchExPostpone == false</code> is used to implement <code>resumeElabTerm</code>
to prevent the creation of another synthetic metavariable when resuming the elaboration.</p><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.implicitLambda">implicitLambda</a> == false</code>, then disable implicit lambdas feature for the given syntax, but not for its subterms.
We use this flag to implement, for example, the <code>@</code> modifier. If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.implicitLambda">Context.implicitLambda</a> == false</code>, then this parameter has no effect.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">Lean.Elab.Term.elabTerm</a> <span class="fn">stx</span> <span class="fn">expectedType?</span> <span class="fn">catchExPostpone</span> <span class="fn">implicitLambda</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.withRef">Lean.withRef</a> <span class="fn">stx</span> <span class="fn">(<a href="../.././Lean/Elab/Term.html#_private.Lean.Elab.Term.0.Lean.Elab.Term.elabTermAux">Lean.Elab.Term.elabTermAux</a> <span class="fn">expectedType?</span> <span class="fn">catchExPostpone</span> <span class="fn">implicitLambda</span> <span class="fn">stx</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.elabTerm" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabTermEnsuringType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1677-L1685">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTermEnsuringType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabTermEnsuringType</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(catchExPostpone : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(implicitLambda : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(errorMsgHeader? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Similar to <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">Lean.Elab.Term.elabTerm</a></code>, but ensures that the type of the elaborated term is <code>expectedType?</code>
by inserting coercions if necessary.</p><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedContext.errToSorry">errToSorry</a></code> is true, then if coercion insertion fails, this function returns <code>sorry</code> and logs the error.
Otherwise, it throws the error.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.elabTermEnsuringType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.commitIfNoErrors?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1688-L1701">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.commitIfNoErrors?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">commitIfNoErrors?</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <span class="fn">α</span>)</span></span></div></div><p>Execute <code>x</code> and return <code>some</code> if no new errors were recorded or exceptions were thrown. Otherwise, return <code>none</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.commitIfNoErrors?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.adaptExpander"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1704-L1706">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.adaptExpander"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">adaptExpander</span></a></span><span class="decl_args">
<span class="fn">(exp : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElab">Lean.Elab.Term.TermElab</a></div></div><p>Adapt a syntax transformation to a regular, term-producing elaborator.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.adaptExpander">Lean.Elab.Term.adaptExpander</a> <span class="fn">exp</span> <span class="fn">stx</span> <span class="fn">expectedType?</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">stx'</span> ← <span class="fn"><span class="fn">exp</span> <span class="fn">stx</span></span>
  <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withMacroExpansion">Lean.Elab.Term.withMacroExpansion</a> <span class="fn">stx</span> <span class="fn">stx'</span> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">Lean.Elab.Term.elabTerm</a> <span class="fn">stx'</span> <span class="fn">expectedType?</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.adaptExpander" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkInstMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1713-L1718">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkInstMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkInstMVar</span></a></span><span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(extraErrorMsg? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Message.html#Lean.MessageData">Lean.MessageData</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Create a new metavariable with the given type, and try to synthesize it.
If type class resolution cannot be executed (e.g., it is stuck because of metavariables in <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.type">type</a></code>),
register metavariable as a pending one.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkInstMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.ensureType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1723-L1736">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ensureType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">ensureType</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Make sure <code>e</code> is a type by inferring its type and making sure it is an <code>Expr.sort</code>
or is unifiable with <code>Expr.sort</code>, or can be coerced into one.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.ensureType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.elabType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1739-L1742">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabType"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">elabType</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Elaborate <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SyntheticMVarDecl.stx">stx</a></code> and ensure result is a type.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabType">Lean.Elab.Term.elabType</a> <span class="fn">stx</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">u</span> ← <span class="fn"><a href="../.././Init/Prelude.html#liftM">liftM</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.mkFreshLevelMVar">Lean.Meta.mkFreshLevelMVar</a></span>
  let <span class="fn">type</span> ← <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.elabTerm">Lean.Elab.Term.elabTerm</a> <span class="fn">stx</span> <span class="fn">(<a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.mkSort">Lean.mkSort</a> <span class="fn">u</span>)</span>)</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Lean.withRef">Lean.withRef</a> <span class="fn">stx</span> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.ensureType">Lean.Elab.Term.ensureType</a> <span class="fn">type</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.elabType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withAutoBoundImplicit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1747-L1766">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withAutoBoundImplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicit</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Enable auto-bound implicits, and execute <code>k</code> while catching auto bound implicit exceptions. When an exception is caught,
a new local declaration is created, registered, and <code>k</code> is tried to be executed again.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withAutoBoundImplicit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withAutoBoundImplicit.loop"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1751-L1763">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withAutoBoundImplicit.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicit</span>.<span class="name">loop</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(s : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.SavedState">Lean.Elab.Term.SavedState</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.withoutAutoBoundImplicit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1768-L1769">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withoutAutoBoundImplicit"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withoutAutoBoundImplicit</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withoutAutoBoundImplicit" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.withAutoBoundImplicitForbiddenPred"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1771-L1772">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.withAutoBoundImplicitForbiddenPred"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">withAutoBoundImplicitForbiddenPred</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(p : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.withAutoBoundImplicitForbiddenPred" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.collectUnassignedMVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1777-L1801">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.collectUnassignedMVars"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">collectUnassignedMVars</span></a></span><span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(init : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">#[]</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(except : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>) =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Collect unassigned metavariables in <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.type">type</a></code> that are not already in <code>init</code> and not satisfying <code>except</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.collectUnassignedMVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.collectUnassignedMVars.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1785-L1801">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.collectUnassignedMVars.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">collectUnassignedMVars</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(except : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span> <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>) =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(mvarIds : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(result : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(visited : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div></div></div><div class="decl" id="Lean.Elab.Term.addAutoBoundImplicits"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1812-L1828">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addAutoBoundImplicits"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits</span></a></span><span class="decl_args">
<span class="fn">(xs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><p>Return <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicits">autoBoundImplicits</a> ++ xs</code>
This method throws an error if a variable in <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicits">autoBoundImplicits</a></code> depends on some <code>x</code> in <code>xs</code>.
The <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicits">autoBoundImplicits</a></code> may contain free variables created by the auto-implicit feature, and unassigned free variables.
It avoids the hack used at <code>autoBoundImplicitsOld</code>.</p><p>Remark: we cannot simply replace every occurrence of <code>addAutoBoundImplicitsOld</code> with this one because a particular
use-case may not be able to handle the metavariables in the array being given to <code>k</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.addAutoBoundImplicits" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.addAutoBoundImplicits.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1816-L1828">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addAutoBoundImplicits.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(xs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(todo : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(autos : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.addAutoBoundImplicits.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.addAutoBoundImplicits'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1836-L1841">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.addAutoBoundImplicits'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">addAutoBoundImplicits'</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(xs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(type : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Similar to <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicits">autoBoundImplicits</a></code>, but immediately if the resulting array of expressions contains metavariables,
it immediately uses <code>mkForallFVars</code> + <code>forallBoundedTelescope</code> to convert them into free variables.
The type <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.LetRecToLift.type">type</a></code> is modified during the process if type depends on <code>xs</code>.
We use this method to simplify the conversion of code using <code>autoBoundImplicitsOld</code> to <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context.autoBoundImplicits">autoBoundImplicits</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.addAutoBoundImplicits'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkAuxName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1843-L1846">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkAuxName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkAuxName</span></a></span><span class="decl_args">
<span class="fn">(suffix : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkAuxName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.isLetRecAuxMVar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1852-L1856">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.isLetRecAuxMVar"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">isLetRecAuxMVar</span></a></span><span class="decl_args">
<span class="fn">(mvarId : <a href="../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Return true if mvarId is an auxiliary metavariable created for compiling <code>let rec</code> or it
is delayed assigned to one.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.isLetRecAuxMVar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.mkConst"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1865-L1874">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkConst"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">mkConst</span></a></span><span class="decl_args">
<span class="fn">(constName : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(explicitLevels : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a>)</span> <span class="fn">[]</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(checkDeprecated : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Create an <code>Expr.const</code> using the given name and explicit levels.
Remark: fresh universe metavariables are created if the constant has more universe
parameters than <code>explicitLevels</code>.</p><p>If <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.checkDeprecated">checkDeprecated</a> := true</code>, then <code>Linter.<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.checkDeprecated">checkDeprecated</a></code> is invoked.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.mkConst" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.checkDeprecated"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1876-L1878">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.checkDeprecated"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">checkDeprecated</span></a></span><span class="decl_args">
<span class="fn">(ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.checkDeprecated">Lean.Elab.Term.checkDeprecated</a> <span class="fn">ref</span> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn"><span class="fn">e</span>.getAppFn</span> with
  | <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.const">Lean.Expr.const</a> <span class="fn">declName</span> <span class="fn">us</span></span> =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Lean.withRef">Lean.withRef</a> <span class="fn">ref</span> <span class="fn">(<a href="../.././Lean/Linter/Deprecated.html#Lean.Linter.checkDeprecated">Lean.Linter.checkDeprecated</a> <span class="fn">declName</span>)</span></span>
  | <span class="fn">x</span> =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.checkDeprecated" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1893-L1919">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveName"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(preresolved : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Syntax.Preresolved">Lean.Syntax.Preresolved</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(explicitLevels : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveName" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveName.process"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1911-L1919">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveName.process"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName</span>.<span class="name">process</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(explicitLevels : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(candidates : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>)</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveName.process" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveName'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1925-L1932">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveName'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveName'</span></a></span><span class="decl_args">
<span class="fn">(ident : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(explicitLevels : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Lean/Level.html#Lean.Level">Lean.Level</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(expectedType? : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span> <span class="fn">none</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></span>)</span>)</span></span></div></div><p>Similar to <code><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveName">resolveName</a></code>, but creates identifiers for the main part and each projection with position information derived from <code>ident</code>.
Example: Assume resolveName <code>v.head.bla.boo</code> produces <code>(v.head, [&quot;bla&quot;, &quot;boo&quot;])</code>, then this method produces
<code>(v.head, id, [f₁, f₂])</code> where <code><a href="../.././Init/Prelude.html#id">id</a></code> is an identifier for <code>v.head</code>, and <code>f₁</code> and <code>f₂</code> are identifiers for fields <code>&quot;bla&quot;</code> and <code>&quot;boo&quot;</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveName'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.resolveId?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1934-L1947">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.resolveId?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">resolveId?</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#String">String</a> <span class="fn">&quot;term&quot;</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(withInfo : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">(<a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.resolveId?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElabM.run"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1949-L1950">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM.run"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">run</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ctx : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a>
  <span class="fn">{ <span class="fn">declName?</span> := <span class="fn">none</span>, <span class="fn">auxDeclToFullName</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">macroStack</span> := <span class="fn">[]</span>, <span class="fn">mayPostpone</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">errToSorry</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">autoBoundImplicit</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">autoBoundImplicits</span> :=
      <span class="fn">{ <span class="fn">root</span> := <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArrayNode.node">Lean.PersistentArrayNode.node</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.branching">Lean.PersistentArray.branching</a>.toNat</span>)</span></span>,
        <span class="fn">tail</span> := <span class="fn"><a href="../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.branching">Lean.PersistentArray.branching</a>.toNat</span></span>, <span class="fn">size</span> := <span class="fn">0</span>, <span class="fn">shift</span> := <a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.initShift">Lean.PersistentArray.initShift</a>,
        <span class="fn">tailOff</span> := <span class="fn">0</span> }</span>,
    <span class="fn">autoBoundImplicitForbidden</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>) =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span>, <span class="fn">sectionVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">sectionFVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>,
    <span class="fn">implicitLambda</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">heedElabAsElim</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">isNoncomputableSection</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">ignoreTCFailures</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">inPattern</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">tacticCache?</span> := <span class="fn">none</span>, <span class="fn">tacSnap?</span> := <span class="fn">none</span>, <span class="fn">saveRecAppSyntax</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">holesAsSyntheticOpaque</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a> }</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(s : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a>
  <span class="fn">{ <span class="fn">levelNames</span> := <span class="fn">[]</span>, <span class="fn">syntheticMVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">pendingMVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">mvarErrorInfos</span> := <span class="fn">[]</span>, <span class="fn">mvarArgNames</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>,
    <span class="fn">letRecsToLift</span> := <span class="fn">[]</span> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">x</span>.run</span> <span class="fn">ctx</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.withConfig">Lean.Meta.withConfig</a> <a href="../.././Lean/Elab/Config.html#Lean.Elab.Term.setElabConfig">Lean.Elab.Term.setElabConfig</a> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn">x</span> <span class="fn">ctx</span>)</span>.run</span> <span class="fn">s</span>)</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElabM.run" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElabM.run'"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1952-L1953">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM.run'"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">run'</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ctx : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a>
  <span class="fn">{ <span class="fn">declName?</span> := <span class="fn">none</span>, <span class="fn">auxDeclToFullName</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">macroStack</span> := <span class="fn">[]</span>, <span class="fn">mayPostpone</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">errToSorry</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">autoBoundImplicit</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">autoBoundImplicits</span> :=
      <span class="fn">{ <span class="fn">root</span> := <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArrayNode.node">Lean.PersistentArrayNode.node</a> <span class="fn">(<a href="../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.branching">Lean.PersistentArray.branching</a>.toNat</span>)</span></span>,
        <span class="fn">tail</span> := <span class="fn"><a href="../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn"><a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.branching">Lean.PersistentArray.branching</a>.toNat</span></span>, <span class="fn">size</span> := <span class="fn">0</span>, <span class="fn">shift</span> := <a href="../.././Lean/Data/PersistentArray.html#Lean.PersistentArray.initShift">Lean.PersistentArray.initShift</a>,
        <span class="fn">tailOff</span> := <span class="fn">0</span> }</span>,
    <span class="fn">autoBoundImplicitForbidden</span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>) =&gt; <a href="../.././Init/Prelude.html#Bool.false">false</a></span>, <span class="fn">sectionVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">sectionFVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>,
    <span class="fn">implicitLambda</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">heedElabAsElim</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">isNoncomputableSection</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">ignoreTCFailures</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>,
    <span class="fn">inPattern</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a>, <span class="fn">tacticCache?</span> := <span class="fn">none</span>, <span class="fn">tacSnap?</span> := <span class="fn">none</span>, <span class="fn">saveRecAppSyntax</span> := <a href="../.././Init/Prelude.html#Bool.true">true</a>,
    <span class="fn">holesAsSyntheticOpaque</span> := <a href="../.././Init/Prelude.html#Bool.false">false</a> }</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(s : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a>
  <span class="fn">{ <span class="fn">levelNames</span> := <span class="fn">[]</span>, <span class="fn">syntheticMVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">pendingMVars</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>, <span class="fn">mvarErrorInfos</span> := <span class="fn">[]</span>, <span class="fn">mvarArgNames</span> := <a href="../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a>,
    <span class="fn">letRecsToLift</span> := <span class="fn">[]</span> }</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">x</span>.run'</span> <span class="fn">ctx</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">(fun (<span class="fn">x</span> : <span class="fn"><span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a></span>) =&gt; <span class="fn"><span class="fn">x</span>.fst</span>)</span> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn"><span class="fn">x</span>.run</span> <span class="fn">ctx</span> <span class="fn">s</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElabM.run'" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.TermElabM.toIO"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1955-L1960">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM.toIO"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">TermElabM</span>.<span class="name">toIO</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ctxCore : <a href="../.././Lean/CoreM.html#Lean.Core.Context">Lean.Core.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(sCore : <a href="../.././Lean/CoreM.html#Lean.Core.State">Lean.Core.State</a>)</span></span>
<span class="decl_args">
<span class="fn">(ctxMeta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.Context">Lean.Meta.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(sMeta : <a href="../.././Lean/Meta/Basic.html#Lean.Meta.State">Lean.Meta.State</a>)</span></span>
<span class="decl_args">
<span class="fn">(ctx : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.Context">Lean.Elab.Term.Context</a>)</span></span>
<span class="decl_args">
<span class="fn">(s : <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">(<span class="fn">α</span> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.State">Lean.Core.State</a> <a href="../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.State">Lean.Meta.State</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.State">Lean.Elab.Term.State</a></span></span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">x</span>.toIO</span> <span class="fn">ctxCore</span> <span class="fn">sCore</span> <span class="fn">ctxMeta</span> <span class="fn">sMeta</span> <span class="fn">ctx</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__discr</span> ← <span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">x</span>.run</span> <span class="fn">ctx</span> <span class="fn">s</span>)</span>.toIO</span> <span class="fn">ctxCore</span> <span class="fn">sCore</span> <span class="fn">ctxMeta</span> <span class="fn">sMeta</span></span>
  <span class="fn">match <span class="fn">__discr</span> with
    | <span class="fn">(<span class="fn">(<span class="fn">a</span>, <span class="fn">s</span>)</span>, <span class="fn">sCore</span>, <span class="fn">sMeta</span>)</span> =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn">a</span>, <span class="fn">sCore</span>, <span class="fn">sMeta</span>, <span class="fn">s</span>)</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.TermElabM.toIO" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.instMetaEvalTermElabM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1962-L1967">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.instMetaEvalTermElabM"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">instMetaEvalTermElabM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Eval.html#Lean.MetaEval">Lean.MetaEval</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Eval.html#Lean.MetaEval">Lean.MetaEval</a> <span class="fn">(<a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.Term.universeConstraintsCheckpoint"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1973-L1976">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.universeConstraintsCheckpoint"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">universeConstraintsCheckpoint</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">α</span></span></div></div><p>Execute <code>x</code> and then tries to solve pending universe constraints.
Note that, stuck constraints will not be discarded.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.universeConstraintsCheckpoint">Lean.Elab.Term.universeConstraintsCheckpoint</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">a</span> ← <span class="fn">x</span>
  <span class="fn"><a href="../.././Init/Control/Basic.html#Functor.discard">discard</a> <span class="fn">(<a href="../.././Init/Prelude.html#liftM">liftM</a> <span class="fn">(<a href="../.././Lean/Meta/Basic.html#Lean.Meta.processPostponed">Lean.Meta.processPostponed</a> <a href="../.././Init/Prelude.html#Bool.true">true</a> <a href="../.././Init/Prelude.html#Bool.true">true</a>)</span>)</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">a</span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.Term.universeConstraintsCheckpoint" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.expandDeclId"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1978-L1982">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.expandDeclId"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">expandDeclId</span></a></span><span class="decl_args">
<span class="fn">(currNamespace : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(currLevelNames : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(declId : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(modifiers : <a href="../.././Lean/Elab/DeclModifiers.html#Lean.Elab.Modifiers">Lean.Elab.Modifiers</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Lean/Elab/DeclModifiers.html#Lean.Elab.ExpandDeclIdResult">Lean.Elab.ExpandDeclIdResult</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.expandDeclId" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.Term.exprToSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L1993-L1998">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.Term.exprToSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">Term</span>.<span class="name">exprToSyntax</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href="../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></div></div><p>Helper function for &quot;embedding&quot; an <code>Expr</code> in <code>Syntax</code>.
It creates a named hole <code>?m</code> and immediately assigns <code>e</code> to it.
Examples:</p><pre><code class="language-lean">let e := <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.mkConst">mkConst</a> ``Nat.zero
`(Nat.succ $(← <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.exprToSyntax">exprToSyntax</a> e))
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.Term.exprToSyntax" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.withoutModifyingStateWithInfoAndMessages"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L2003-L2004">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.withoutModifyingStateWithInfoAndMessages"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">withoutModifyingStateWithInfoAndMessages</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Control/Basic.html#MonadControlT">MonadControlT</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(x : <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.withoutModifyingStateWithInfoAndMessages" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.incrementalAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L2012-L2015">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.incrementalAttr"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">incrementalAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Attributes.html#Lean.TagAttribute">Lean.TagAttribute</a></div></div></div></div><div class="decl" id="Lean.Elab.builtinIncrementalElabs"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L2017-L2017">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.builtinIncrementalElabs"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">builtinIncrementalElabs</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></span></div></div></div></div><div class="decl" id="Lean.Elab.addBuiltinIncrementalElab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L2019-L2020">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.addBuiltinIncrementalElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">addBuiltinIncrementalElab</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/System/IO.html#IO">IO</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.addBuiltinIncrementalElab">Lean.Elab.addBuiltinIncrementalElab</a> <span class="fn">decl</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <a href="../.././Lean/Elab/Term.html#Lean.Elab.builtinIncrementalElabs">Lean.Elab.builtinIncrementalElabs</a> <span class="fn">fun (<span class="fn">s</span> : <a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a>) =&gt; <span class="fn"><span class="fn"><span class="fn">s</span>.insert</span> <span class="fn">decl</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.addBuiltinIncrementalElab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.isIncrementalElab"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/ec3042d94bd11a42430f9e14d39e26b1f880f99b/src/Lean/Elab/Term.lean#L2035-L2037">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Lean/Elab/Term.html#Lean.Elab.isIncrementalElab"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">isIncrementalElab</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Lean/Environment.html#Lean.MonadEnv">Lean.MonadEnv</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Init/System/IO.html#IO">IO</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(decl : <a href="../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Checks whether a declaration is annotated with <code>[builtin_incremental]</code> or <code>[incremental]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.isIncrementalElab" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>